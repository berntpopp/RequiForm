import{Z as e,c as l,b as a,o as t,v as s,H as o,_ as i,$ as r,a0 as n,j as c,R as d,a1 as u,N as g,u as v,ac as m,a8 as p,a2 as w,ab as f,F as y}from"./vendor-vue.MuR-ak5S.js";import{_ as h,u as x,l as b,L as V}from"./index.CRAG7JXt.js";import{v as L,e as R,H as _,x as j,f as k,g as O,I as S,J as C,E as N}from"./vendor-vuetify-core.BS_X3kim.js";import"./vendor-pdf.CZcEIuwn.js";/* empty css                     */const D={class:"log-header-controls"},E={class:"d-flex align-center"},U={class:"timestamp mr-2"},I={class:"level mr-2"},z={class:"message flex-grow-1"},F={key:0,class:"log-details mt-1"},H=h({__name:"LogViewer",setup(h){const{t:H}=e(),$=x(),q=l((()=>b.entries)),B=()=>{$.toggleLogViewer()},J=()=>{if(q.value&&0!==q.value.length)try{const e=JSON.stringify(q.value,null,2),l=new Blob([e],{type:"application/json"}),a=`requiform-logs-${(new Date).toISOString().replace(/[:.]/g,"-")}.json`,t=document.createElement("a");t.href=URL.createObjectURL(l),t.download=a,document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(t.href),b.info("LogViewer: Logs downloaded successfully.")}catch(e){b.error("LogViewer: Failed to download logs:",e)}else b.warn("LogViewer: No logs to download.")},T=()=>{b.clear()},A=l((()=>[{title:H("logViewer.levels.debug"),value:V.DEBUG},{title:H("logViewer.levels.info"),value:V.INFO},{title:H("logViewer.levels.warn"),value:V.WARN},{title:H("logViewer.levels.error"),value:V.ERROR}])),G=l({get:()=>b.currentLogLevel,set:e=>{b.setLevel(e)}}),W=l((()=>{switch(G.value){case V.DEBUG:return"text-log-debug";case V.INFO:return"text-log-info";case V.WARN:return"text-log-warn";case V.ERROR:return"text-log-error";default:return""}})),M=a(new Set),Z=e=>M.value.has(e),K=e=>{try{return JSON.stringify(e,null,2)}catch(l){return`Error formatting data: ${l.message}`}};return t(q,(async()=>{await s();const e=document.querySelector(".log-list");e&&(e.scrollTop=e.scrollHeight)}),{deep:!0}),o((async()=>{await s();const e=document.querySelector(".log-list");e&&(e.scrollTop=e.scrollHeight)})),(e,l)=>(r(),i(C,{class:"log-viewer-card",elevation:"8","max-width":"500","max-height":"400"},{default:n((()=>[c(_,{class:"d-flex justify-space-between align-center py-2"},{default:n((()=>[u("span",null,g(v(H)("logViewer.title")),1),l[4]||(l[4]=d()),u("div",D,[c(L,{modelValue:G.value,"onUpdate:modelValue":l[0]||(l[0]=e=>G.value=e),items:A.value,density:"compact","hide-details":"",variant:"plain",class:m(["log-level-select",W.value])},null,8,["modelValue","items","class"]),l[1]||(l[1]=d()),c(R,{icon:"mdi-download",variant:"text",size:"small",onClick:J,title:v(H)("logViewer.buttons.download"),disabled:!q.value.length},null,8,["title","disabled"]),l[2]||(l[2]=d()),c(R,{icon:"mdi-delete-sweep",variant:"text",size:"small",onClick:T,title:v(H)("logViewer.buttons.clear"),disabled:!q.value.length},null,8,["title","disabled"]),l[3]||(l[3]=d()),c(R,{icon:"mdi-close",variant:"text",size:"small",onClick:B,title:v(H)("logViewer.buttons.close")},null,8,["title"])])])),_:1}),l[10]||(l[10]=d()),c(j),l[11]||(l[11]=d()),c(S,{class:"log-list pa-0"},{default:n((()=>[c(k,{density:"compact",class:"py-0"},{default:n((()=>[(r(!0),p(y,null,f(q.value,((e,a)=>(r(),i(O,{key:a,class:m([["log-entry",`log-${e.level.toLowerCase()}`],"py-1 px-3"])},{default:n((()=>{return[u("div",E,[u("span",U,g((t=e.timestamp,new Date(t).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}))),1),l[5]||(l[5]=d()),u("span",I,"["+g(e.level)+"]",1),l[6]||(l[6]=d()),u("span",z,g(e.displayMessage),1),l[7]||(l[7]=d()),null!==e.rawData?(r(),i(R,{key:0,icon:Z(a)?"mdi-chevron-up":"mdi-chevron-down",variant:"text",size:"x-small",onClick:e=>(e=>{M.value.has(e)?M.value.delete(e):M.value.add(e)})(a),class:"ml-1",title:v(H)("logViewer.buttons.toggleDetails")},null,8,["icon","onClick","title"])):w("",!0)]),l[8]||(l[8]=d()),c(N,null,{default:n((()=>[Z(a)?(r(),p("div",F,[u("pre",null,g(K(e.rawData)),1)])):w("",!0)])),_:2},1024)];var t})),_:2},1032,["class"])))),128)),l[9]||(l[9]=d()),q.value.length?w("",!0):(r(),i(O,{key:0,class:"text-center text-disabled py-2"},{default:n((()=>[d(g(v(H)("logViewer.emptyState")),1)])),_:1}))])),_:1})])),_:1})])),_:1}))}},[["__scopeId","data-v-ccc42ee4"]]);export{H as default};
