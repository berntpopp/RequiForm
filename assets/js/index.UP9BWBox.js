const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/PatientForm.D64Hf04F.js","assets/js/vendor-vuetify-core.gPhD-pXQ.js","assets/js/vendor-vue.MuR-ak5S.js","assets/css/framework-8ZqFLDl0.css","assets/js/vendor-pdf.CZcEIuwn.js","assets/css/PatientForm-Dm63gRtG.css","assets/css/vendor-fonts-CdG8iPLw.css","assets/js/TestSelector.Xl_J2DXE.js","assets/css/TestSelector-D_U0QGQP.css","assets/js/PhenotypeSelector.CkIREc7_.js","assets/css/PhenotypeSelector-D0j_JN0D.css","assets/js/SelectedPanelsSummary.DHcP8wp8.js","assets/css/SelectedPanelsSummary-5goM7jQv.css","assets/js/PedigreeDrawer.BuNNnNn9.js","assets/css/PedigreeDrawer-Dq3bcHYx.css","assets/js/ValidationSummary.D_e_vQcj.js","assets/css/ValidationSummary-PIjxSNQF.css","assets/js/AppFooter.DYbM0xAQ.js","assets/css/AppFooter-CfzncdH3.css","assets/js/LogViewer.CpRNlBy2.js","assets/css/LogViewer-CNNgOCyi.css","assets/js/Disclaimer.C4UiqV8A.js","assets/css/Disclaimer-tn0RQdqM.css","assets/js/PdfGenerator.DgIFEDqL.js","assets/js/vendor-utils.CQfLIqa1.js","assets/js/PasteDataModal.KDEm6zAs.js","assets/css/PasteDataModal-mcUupalc.css","assets/js/EncryptionDialog.CqWfmfbq.js","assets/js/DecryptionDialog.zCd3YSQb.js","assets/js/FAQDialog.Bctk6lE5.js","assets/css/FAQDialog-DTUaY98X.css","assets/js/ResetConfirmationDialog.Dh5jf_ty.js","assets/js/SaveDataDialog.C6M-jpL5.js","assets/js/LoadDataDialog.BWgcjjfr.js"])))=>i.map(i=>d[i]);
import{_ as e}from"./vendor-pdf.CZcEIuwn.js";import{r as t,G as n,Z as a,c as r,_ as o,$ as i,a0 as s,a1 as l,j as c,R as d,N as u,u as h,m as p,a2 as f,D as m,b as g,P as y,l as b,a3 as w,E as v,a4 as x,B as D,o as S,v as A,t as P,d as k,a5 as _,a6 as E,H as C,a7 as I,a8 as F,p as L,a9 as N}from"./vendor-vue.MuR-ak5S.js";import{V as O,a as T,b as R,c as z,d as M,e as V,f as B,g as H,h as U,i as q,j,k as G,l as J,m as K,n as W,o as Z,p as Q,q as Y,r as X}from"./vendor-vuetify-core.gPhD-pXQ.js";/* empty css                     */!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();let ee=25,te={};function ne(e){try{if("array"===e.store_type)return!1;if("local"!==e.store_type&&"session"!==e.store_type&&void 0!==e.store_type)return!1;let t="test";return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch(t){return!1}}function ae(e){return"PEDIGREE_"+e.btn_target+"_"}function re(e){return te[ae(e)]}function oe(e,t){return"local"===e.store_type?localStorage.getItem(t):sessionStorage.getItem(t)}function ie(e,t,n){return"local"===e.store_type?localStorage.setItem(t,n):sessionStorage.setItem(t,n)}function se(e){let t=ae(e),n="local"===e.store_type?localStorage:sessionStorage,a=[];for(let r=0;r<n.length;r++)0===n.key(r).indexOf(t)&&a.push(n.key(r));for(let r=0;r<a.length;r++)n.removeItem(a[r])}function le(e){let t;return t=ne(e)?oe(e,ae(e)+"COUNT"):te[ae(e)+"COUNT"],null!=t?t:0}function ce(e,t){ne(e)?ie(e,ae(e)+"COUNT",t):te[ae(e)+"COUNT"]=t}function de(e){if(!e.dataset)return;let t=le(e);ne(e)?ie(e,ae(e)+t,JSON.stringify(e.dataset)):(ee=500,void 0===re(e)&&(te[ae(e)]=[]),re(e).push(JSON.stringify(e.dataset))),t<ee?t++:t=0,ce(e,t)}function ue(e){if(!ne(e))return re(e)&&re(e).length>0?re(e).length:-1;for(let t=ee;t>0;t--)if(null!==oe(e,ae(e)+(t-1)))return t;return-1}function he(e){let t=le(e)-1;return-1===t&&(t=ee),ne(e)?JSON.parse(oe(e,ae(e)+t)):re(e)?JSON.parse(re(e)[t]):void 0}function pe(e,t){if(void 0===t&&(t=le(e)-2),t<0){let n=ue(e);t=n<ee?n-1:ee-1}return ce(e,t+1),ne(e)?JSON.parse(oe(e,ae(e)+t)):JSON.parse(re(e)[t])}function fe(e,t){return void 0===t&&(t=le(e)),t>=ee&&(t=0),ce(e,parseInt(t)+1),ne(e)?JSON.parse(oe(e,ae(e)+t)):JSON.parse(re(e)[t])}function me(e){ne(e)&&function(e){"local"===e.store_type?localStorage.clear():sessionStorage.clear()}(e),te={}}function ge(e,t,n,a){if(ne(e)){let r="local"===e.store_type?localStorage:sessionStorage;t?(ie(e,ae(e)+"_X",t),ie(e,ae(e)+"_Y",n)):(r.removeItem(ae(e)+"_X"),r.removeItem(ae(e)+"_Y"));let o=ae(e)+"_ZOOM";a?ie(e,o,a):r.removeItem(o)}}function ye(e){if(!ne(e)||null===localStorage.getItem(ae(e)+"_X")&&null===sessionStorage.getItem(ae(e)+"_X"))return[null,null];let t=[parseInt(oe(e,ae(e)+"_X")),parseInt(oe(e,ae(e)+"_Y"))];return null!==oe(e,ae(e)+"_ZOOM")&&t.push(parseFloat(oe(e,ae(e)+"_ZOOM"))),t}var be=Object.freeze({__proto__:null,clear:me,clear_pedigree_data:se,current:he,get_count:le,getposition:ye,init_cache:de,last:function(e){if(ne(e))for(let t=ee;t>0;t--){let n=oe(e,ae(e)+(t-1));if(null!==n)return ce(e,t),JSON.parse(n)}else{let t=re(e);if(t)return JSON.parse(t(t.length-1))}},next:fe,nstore:ue,previous:pe,setposition:ge});let we,ve={};function xe(e){return new Error(e)}function De(e){if(e.validate){if("function"==typeof e.validate)return e.DEBUG,e.validate.call(this,e);let t,n=[],a=[];for(let r=0;r<e.dataset.length;r++){if(!r.hidden&&(e.dataset[r].mother||e.dataset[r].father)){t=e.dataset[r].display_name,t||(t="unnamed"),t+=" (IndivID: "+e.dataset[r].name+")";let n=e.dataset[r].mother,a=e.dataset[r].father;if(!n||!a)throw xe("Missing parent for "+t);let o=He(e.dataset,n),i=He(e.dataset,a);if(-1===o)throw xe("The mother (IndivID: "+n+") of family member "+t+" is missing from the pedigree.");if(-1===i)throw xe("The father (IndivID: "+a+") of family member "+t+" is missing from the pedigree.");if("F"!==e.dataset[o].sex)throw xe("The mother of family member "+t+" is not specified as female. All mothers in the pedigree must have sex specified as 'F'.");if("M"!==e.dataset[i].sex)throw xe("The father of family member "+t+" is not specified as male. All fathers in the pedigree must have sex specified as 'M'.")}if(!e.dataset[r].name)throw xe(t+" has no IndivID.");if($.inArray(e.dataset[r].name,n)>-1)throw xe("IndivID for family member "+t+" is not unique.");n.push(e.dataset[r].name),-1===$.inArray(e.dataset[r].famid,a)&&e.dataset[r].famid&&a.push(e.dataset[r].famid)}if(a.length>1)throw xe("More than one family found: "+a.join(", ")+".");Oe(e.dataset).length}}function Se(e){e[0].id&&e.sort((function(e,t){return e.id&&t.id?e.id>t.id?1:t.id>e.id?-1:0:0}));let t=["id","parent_node"],n=[];for(let a=0;a<e.length;a++){let r={};for(let n in e[a])-1===t.indexOf(n)&&(r[n]=e[a][n]);n.push(r)}return n}function Ae(e,t){let n=!1;return t&&$.each(t,(function(t,a){if(0===t.indexOf(e+"_")||t===e)return n=!0,n})),n}function Pe(e,t,n,a,r){try{n?$('<div id="msgDialog">'+t+"</div>").dialog({modal:!0,title:e,width:350,buttons:{Yes:function(){$(this).dialog("close"),n(a,r)},No:function(){$(this).dialog("close")}}}):$('<div id="msgDialog">'+t+"</div>").dialog({title:e,width:350,buttons:[{text:"OK",click:function(){$(this).dialog("close")}}]})}catch(o){!function(e,t,n,a,r){const o=document.getElementById("errModal"),i=o.querySelector(".modal-title"),s=o.querySelector(".modal-body");if(n)$("#errModal button.hidden").removeClass("hidden"),$('#errModal button:contains("OK")').on("click",(function(){n(a,r),$('#errModal button:contains("OK")').off("click")}));else{const e=$('#errModal button:contains("CANCEL")');e.hasClass("hidden")||e.addClass("hidden"),$('#errModal button:contains("OK")').off("click")}i.textContent=e,s.textContent=t,$("#errModal").modal("show")}(e,t,n,a,r)}}function ke(e){let t="";for(let n=0;n<e;n++)t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".charAt(Math.floor(52*Math.random()));return t}function _e(e,t,n,a,r){void 0===t.children&&(t.children=Re(e.dataset,t)),void 0===a&&(a=[],r=1);let o=je(n),i=[];return $.each(t.children,(function(t,n){$.each(e.dataset,(function(t,a){if((n.name===a.mother||n.name===a.father)&&void 0===n.id){let t=Ge(o,a.mother),n=Ge(o,a.father);t=void 0!==t?t:Ge(e.dataset,a.mother),n=void 0!==n?n:Ge(e.dataset,a.father),function(e,t,n){for(let a=0;a<e.length;a++)if(e[a].mother===t&&e[a].father===n)return!0;return!1}(i,t,n)||i.push({mother:t,father:n})}}))})),$.merge(a,i),$.each(i,(function(n,a){let i=a.mother,s=a.father;i.children=[];let l={name:ke(4),hidden:!0,parent:null,father:s,mother:i,children:Re(e.dataset,i,s)},c=He(e.dataset,i.name),d=He(e.dataset,s.name);"id"in s||"id"in i||(r=Ce(t.children,r));let u=function(e,t,n){let a=t,r=n;for(;"mother"in e[a]&&"mother"in e[r]&&!("noparents"in e[a])&&!("noparents"in e[r]);)a=He(e,e[a].mother),r=He(e,e[r].mother);return{midx:a,fidx:r}}(e.dataset,c,d);u.fidx<u.midx?(s.id=r++,l.id=r++,i.id=r++):(i.id=r++,l.id=r++,s.id=r++),r=Ee(i,l,r,o,e),r=Ee(s,l,r,o,e),t.children.push(l)})),r=Ce(t.children,r),$.each(t.children,(function(t,o){r=_e(e,o,n,a,r)[1]})),[a,r]}function Ee(e,t,n,a,r){if("parent_node"in e?e.parent_node.push(t):e.parent_node=[t],e.mztwin||e.dztwins){let t=ze(r.dataset,e);for(let e=0;e<t.length;e++){let r=Ge(a,t[e].name);r&&(r.id=n++)}}return n}function Ce(e,t){return e.sort((function(e,t){return e.mztwin&&t.mztwin&&e.mztwin===t.mztwin||e.dztwin&&t.dztwin&&e.dztwin===t.dztwin?0:e.mztwin||t.mztwin||e.dztwin||t.dztwin?1:0})),$.each(e,(function(e,n){void 0===n.id&&(n.id=t++)})),t}function Ie(e){return void 0!==$(e).attr("proband")&&!1!==$(e).attr("proband")}function Fe(e,t){for(let n=0;n<t.length;n++)-1===$.inArray(t[n],e)&&e.push(t[n])}function Le(e,t,n){if(-1===$.inArray(t.name,e))return;Fe(e,Ne(n,t));let a=Ve(n,t);$.each(a,(function(t,a){-1===$.inArray(a.name,e)&&(e.push(a.name),Fe(e,Ne(n,a)))}))}function Ne(e,t){let n=[];for(let a=0;a<e.length;a++){let r=e[a];t.name===r.mother&&-1===$.inArray(r.father,n)?n.push(r.father):t.name===r.father&&-1===$.inArray(r.mother,n)&&n.push(r.mother)}return n}function Oe(e){let t=e[Te(e)];if(!t){if(0===e.length)throw new Error("empty pedigree data set");t=e[0]}let n=[t.name],a=!0,r=0;for(;a&&r<200;){r++;let o=n.length;$.each(e,(function(a,r){if(-1!==$.inArray(r.name,n)){let a=Ne(e,r),o=r.name===t.name||!r.noparents;for(let t=0;t<a.length;t++)Ge(e,a[t]).noparents||(o=!0);o&&(r.mother&&-1===$.inArray(r.mother,n)&&n.push(r.mother),r.father&&-1===$.inArray(r.father,n)&&n.push(r.father))}else!r.noparents&&(r.mother&&-1!==$.inArray(r.mother,n)||r.father&&-1!==$.inArray(r.father,n))&&n.push(r.name);Le(n,r,e)})),a=o!==n.length}let o=$.map(e,(function(e,t){return e.name}));return $.map(o,(function(e,t){return-1===$.inArray(e,n)?e:null}))}function Te(e){let t;return $.each(e,(function(e,n){if(Ie(n))return t=e,t})),t}function Re(e,t,n){let a=[],r=[];return"F"===t.sex&&$.each(e,(function(e,o){t.name===o.mother&&(n&&n.name!==o.father||-1===$.inArray(o.name,r)&&(a.push(o),r.push(o.name)))})),a}function ze(e,t){let n=function(e,t){return void 0===t||!t.mother||t.noparents?[]:$.map(e,(function(e,n){return e.name===t.name||"noparents"in e||!e.mother||e.mother!==t.mother||e.father!==t.father?null:e}))}(e,t),a=t.mztwin?"mztwin":"dztwin";return $.map(n,(function(e,n){return e.name!==t.name&&e[a]===t[a]?e:null}))}function Me(e,t,n){return $.map(e,(function(e,a){return e.name===t.name||"noparents"in e||!e.mother||e.mother!==t.mother||e.father!==t.father||n&&e.sex!==n?null:e}))}function Ve(e,t,n){return $.map(e,(function(e,a){return"noparents"in e||e.mother!==t.name&&e.father!==t.name||n&&e.sex!==n?null:e}))}function Be(e,t){let n=He(e,t),a=1;for(;n>=0&&("mother"in e[n]||e[n].top_level);)n=He(e,e[n].mother),a++;return a}function He(e,t){let n=-1;return $.each(e,(function(e,a){if(t===a.name)return n=e,n})),n}function Ue(e,t,n){return $.map(e,(function(e,a){return e.depth!==t||e.data.hidden||-1!==$.inArray(e.data.name,n)?null:e})).sort((function(e,t){return e.x-t.x}))}function qe(e,t){let n=[];return function t(a){a.data&&(a=a.data),"mother"in a&&"father"in a&&!("noparents"in a)&&(t(Ge(e,a.mother)),t(Ge(e,a.father))),n.push(a)}(t),n}function je(e){let t=[];return function e(n){n.children&&n.children.forEach(e),t.push(n)}(e),t}function $e(e,t,n,a,r){for(let o=0;o<t.length;o++)if(a===t[o].depth&&-1===$.inArray(t[o].data.name,r)&&Math.abs(n-t[o].x)<1.15*e.symbol_size)return!0;return!1}function Ge(e,t){for(let n=0;n<e.length;n++){if(e[n].data&&t===e[n].data.name)return e[n];if(t===e[n].name)return e[n]}}function Je(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement}function Ke(e){return{width:Je()?window.innerWidth:e.width,height:Je()?window.innerHeight:e.height}}function We(e,t){let n=e.symbol_size/2,a=2.5*-e.symbol_size;we=d3.zoom().scaleExtent([e.zoomIn,e.zoomOut]).filter((function(t){return!((!e.zoomSrc||-1===e.zoomSrc.indexOf("wheel"))&&t.type&&"wheel"===t.type||"dblclick"===t.type||t.button)})).on("zoom",(function(t){!function(e,t){t.DEBUG;let n=e.transform,a=n.k&&1!==n.k?n.k:void 0;ge(t,n.x,n.y,a),d3.select("#"+t.targetDiv).select(".diagram").attr("transform","translate("+n.x+","+n.y+")"+(a?" scale("+a+")":""))}(t,e)})),t.call(we);let r=ye(e),o=3===r.length?r[2]:1,i=null!==r[0]?r[0]/o:n*o,s=null!==r[1]?r[1]/o:a*o;var l=d3.zoomIdentity.scale(o).translate(i,s);t.call(we.transform,l)}function Ze(e,t){d3.select("#"+e.targetDiv).select("svg").transition().duration(50).call(we.scaleBy,t)}function Qe(e){let t=function(e){let t=Ye(e);return{wid:Math.abs(t.xmax-t.xmin),hgt:Math.abs(t.ymax-t.ymin)}}(e),n=d3.select("#"+e.targetDiv).select("svg"),a=function(e){return{w:e.node().clientWidth,h:e.node().clientHeight}}(n),r=1/Math.max(t.wid/a.w,t.hgt/a.h);r<e.zoomIn&&we.scaleExtent([r,e.zoomOut]);let o=function(e){let t=Ye(e);return{x:t.xmin+(t.xmax-t.xmin)/2,y:t.ymin+(t.ymax-t.ymin)/2}}(e);n.call(we.translateTo,o.x-e.symbol_size,o.y-e.symbol_size),setTimeout((function(){n.transition().duration(700).call(we.scaleTo,r)}),400)}function Ye(e){let t=d3.select("#"+e.targetDiv).select(".diagram"),n=Number.MAX_VALUE,a=-1e6,r=Number.MAX_VALUE,o=-1e6,i=e.symbol_size;return t.selectAll("g").each((function(t,s){if(t.x&&"hidden_root"!==t.data.name&&!t.data.hidden){let s=function(e,t,n){let a=d3.select(t).node().getBBox(),r=a.width,o=a.height;if(0===r&&0===o)try{r=2*n,o=2*n;let a=d3.select(t).selectAll(".indi_details");for(let t=0;t<a._groups[0].length;t++){let i=Xe(a._groups[0][t].firstChild.nodeValue,e.font_family,e.font_size);r=Math.max(i.w+n/2,r),o=Math.max(2*n+t*i.h,o)}}catch(i){r=2*n,o=2*n}return{w:r,h:o}}(e,this,i);t.x-i<n&&(n=t.x-i),t.x+s.w+i>a&&(a=t.x+s.w+i),t.y<r&&(r=t.y),t.y+s.h+i>o&&(o=t.y+s.h+i)}})),{xmin:n,xmax:a,ymin:r,ymax:o}}function Xe(e,t,n){let a=$("<div></div>").text(e).css({position:"absolute",float:"left","white-space":"nowrap",visibility:"hidden",font:t||"Helvetica",fontSize:n||"1em"}).appendTo($("body")),r={w:a.width(),h:a.height()};return a.remove(),r}var et=Object.freeze({__proto__:null,btn_zoom:Ze,get_bounds:Ye,init_zoom:We,scale_to_fit:Qe});function tt(e){let t;if(e.keep_proband_on_reset){let n=Se(he(e));t=n[Te(n)],t.name="ch1",t.mother="f21",t.father="m21",se(e)}else t={name:"ch1",sex:"F",mother:"f21",father:"m21",proband:!0,status:"0",display_name:"me"},me(e);delete e.dataset;let n=$("input[name='default_fam']:checked");n.length>0&&"extended2"===n.val()?e.dataset=[{name:"wZA",sex:"M",top_level:!0,status:"0",display_name:"paternal grandfather"},{name:"MAk",sex:"F",top_level:!0,status:"0",display_name:"paternal grandmother"},{name:"zwB",sex:"M",top_level:!0,status:"0",display_name:"maternal grandfather"},{name:"dOH",sex:"F",top_level:!0,status:"0",display_name:"maternal grandmother"},{name:"MKg",sex:"F",mother:"MAk",father:"wZA",status:"0",display_name:"paternal aunt"},{name:"xsm",sex:"M",mother:"MAk",father:"wZA",status:"0",display_name:"paternal uncle"},{name:"m21",sex:"M",mother:"MAk",father:"wZA",status:"0",display_name:"father"},{name:"f21",sex:"F",mother:"dOH",father:"zwB",status:"0",display_name:"mother"},{name:"aOH",sex:"F",mother:"f21",father:"m21",status:"0",display_name:"sister"},{name:"Vha",sex:"M",mother:"f21",father:"m21",status:"0",display_name:"brother"},{name:"Spj",sex:"M",mother:"f21",father:"m21",noparents:!0,status:"0",display_name:"partner"},t,{name:"zhk",sex:"F",mother:"ch1",father:"Spj",status:"0",display_name:"daughter"},{name:"Knx",display_name:"son",sex:"M",mother:"ch1",father:"Spj",status:"0"},{name:"uuc",display_name:"maternal aunt",sex:"F",mother:"dOH",father:"zwB",status:"0"},{name:"xIw",display_name:"maternal uncle",sex:"M",mother:"dOH",father:"zwB",status:"0"}]:n.length>0&&"extended1"===n.val()?e.dataset=[{name:"m21",sex:"M",mother:null,father:null,status:"0",display_name:"father",noparents:!0},{name:"f21",sex:"F",mother:null,father:null,status:"0",display_name:"mother",noparents:!0},{name:"aOH",sex:"F",mother:"f21",father:"m21",status:"0",display_name:"sister"},{name:"Vha",sex:"M",mother:"f21",father:"m21",status:"0",display_name:"brother"},{name:"Spj",sex:"M",mother:"f21",father:"m21",noparents:!0,status:"0",display_name:"partner"},t,{name:"zhk",sex:"F",mother:"ch1",father:"Spj",status:"0",display_name:"daughter"},{name:"Knx",display_name:"son",sex:"M",mother:"ch1",father:"Spj",status:"0"}]:e.dataset=[{name:"m21",display_name:"father",sex:"M",top_level:!0},{name:"f21",display_name:"mother",sex:"F",top_level:!0},t],$(document).trigger("rebuild",[e])}let nt={breast_cancer:"breast_cancer_diagnosis_age",breast_cancer2:"breast_cancer2_diagnosis_age",ovarian_cancer:"ovarian_cancer_diagnosis_age",prostate_cancer:"prostate_cancer_diagnosis_age",pancreatic_cancer:"pancreatic_cancer_diagnosis_age"},at=["brca1","brca2","palb2","atm","chek2","rad51d","rad51c","brip1"],rt=["brca1","brca2","palb2","atm","chek2","bard1","rad51d","rad51c","brip1"],ot=["brca1","brca2","palb2","atm","chek2","bard1","rad51d","rad51c","brip1","hoxb13"],it=["er","pr","her2","ck14","ck56"];function st(e){return 1===(e=parseInt(e))?at:2===e||3===e?rt:ot}function lt(e){$("#load").change((function(t){!function(e,t){let n=e.target.files[0];if(n){let e=new FileReader;e.onload=function(e){bt(e.target.result,t)},e.onerror=function(){Pe("File Error","File could not be read! Code "+e.error)},e.readAsText(n)}$("#load")[0].value=""}(t,e)})),$("#save").click((function(t){!function(e){gt(e,JSON.stringify(he(e)))}(e)})),$("#print").click((function(t){mt(pt(e))})),$("#svg_download").click((function(t){ft(pt(e))})),$("#png_download, .fa-file-image").click((function(t){dt(e,4,"image/png")}))}function ct(e,t){let n=["svg","g"],a=e.childNodes,r=t.childNodes;for(let i=0;i<a.length;i++){let e=a[i];if(-1===n.indexOf(e.tagName))try{let t=r[i].currentStyle||window.getComputedStyle(r[i]);if("undefined"===t||null===t)continue;let n=t.length,a=e.style;for(let e=0;e<n;e++){let n=t[e];(n.indexOf("text-")>-1||n.indexOf("font-")>-1)&&a.setProperty(n,t.getPropertyValue(n))}}catch(o){continue}else ct(e,r[i])}}function dt(e,t,n){let a=ht($("#"+e.targetDiv).find("svg"),"pedigree",{resolution:t,img_type:n});$.when.apply($,[a]).done((function(){let e=(t=arguments,$.grep(t,(function(e){return e&&"pedigree"===e.name}))[0]);var t;if(navigator.userAgent.match(/Edge/g)||function(){let e=navigator.userAgent;return e.indexOf("MSIE ")>-1||e.indexOf("Trident/")>-1}()){let t="<img src='"+e.img+"' alt='canvas image'/>";window.open().document.write(t)}else{let t=document.createElement("a");t.href=e.img,t.download="plot.png",t.target="_blank",document.body.appendChild(t),t.click(),document.body.removeChild(t)}}))}function ut(e){let t=e.get(0).cloneNode(!0);d3.select(t).selectAll("text").filter((function(){return 0===d3.select(this).text().length||d3.select(this),"FontAwesome"===d3.select(this).attr("font-family")})).remove(),ct(t,e.get(0));let n=(new XMLSerializer).serializeToString(t);return"data:image/svg+xml;base64,"+window.btoa(decodeURI(encodeURI(n)))}function ht(e,t,n){let a={iscanvg:!1,resolution:1,img_type:"image/png"};n||(n=a),$.each(a,(function(e,t){e in n||(n[e]=t)}));let r=$.Deferred(),o=ut(e),i=document.createElement("canvas");i.width=e.width()*n.resolution,i.height=e.height()*n.resolution;let s=i.getContext("2d");s.fillStyle="white",s.fillRect(0,0,i.width,i.height);let l=document.createElement("img");return l.onload=function(){s.drawImage(l,0,0,i.width,i.height),r.resolve({name:t,resolution:n.resolution,img:i.toDataURL(n.img_type,1),w:i.width,h:i.height}),s.clearRect(0,0,i.width,i.height)},l.src=o,r.promise()}function pt(e){let t=he(e);null!=t&&(e.dataset=t);let n=$("<div></div>"),a=$("#"+e.targetDiv).find("svg").clone().appendTo(n),r=Ye(e),o=Math.abs(r.xmax-r.xmin),i=Math.abs(r.ymax-r.ymin),s=1/Math.max(o/555,i/792),l=-(r.xmin-e.symbol_size)*s,c=-(r.ymin-e.symbol_size)*s;return a.attr("width",555),a.attr("height",i*s),a.find(".diagram").attr("transform","translate("+l+", "+c+") scale("+s+")"),n}function ft(e){let t=document.createElement("a");t.href=ut(e),t.download="plot.svg",t.target="_blank",document.body.appendChild(t),t.click(),document.body.removeChild(t)}function mt(e,t){e.constructor!==Array&&(e=[e]);let n=.9*$(window).width(),a=$(window).height()-10,r=["/static/css/canrisk.css","https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"],o=window.open("","PrintMap","width="+n+",height="+a),i="";for(let l=0;l<r.length;l++)i+='<link href="'+r[l]+'" rel="stylesheet" type="text/css" media="all">';i+="<style>body {font-size: "+$("body").css("font-size")+";}</style>";let s="";for(let l=0;l<e.length;l++)0===l&&t&&(s+=t),s+=$(e[l]).html(),l<e.length-1&&(s+='<div class="page-break"> </div>');o.document.write(i),o.document.write(s),o.document.close(),o.focus(),setTimeout((function(){o.print(),o.close()}),300)}function gt(e,t,n,a){e.DEBUG,n||(n="ped.txt"),a||(a="text/plain");let r=new Blob([t],{type:a});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(r,n);else{let e=document.createElement("a"),t=URL.createObjectURL(r);e.href=t,e.download=n,document.body.appendChild(e),e.click(),setTimeout((function(){document.body.removeChild(e),window.URL.revokeObjectURL(t)}),0)}}function yt(e){$.each(e.dataset,(function(e,t){if(!t.hidden&&"M"===t.sex&&!Ie(t)&&t[nt.breast_cancer2]){let e="Male family member ("+t.display_name+") with contralateral breast cancer found. Please note that as the risk models do not take this into account the second breast cancer is ignored.";delete t[nt.breast_cancer2],Pe("Warning",e)}}))}function bt(e,t){let n;t.DEBUG;try{if(0===e.indexOf("BOADICEA import pedigree file format 4.0"))t.dataset=xt(e,4),yt(t);else if(0===e.indexOf("BOADICEA import pedigree file format 2.0"))t.dataset=xt(e,2),yt(t);else if(0===e.indexOf("##")&&-1!==e.indexOf("CanRisk")){let a=vt(e);n=a[0],t.dataset=a[1],yt(t)}else try{let n=JSON.parse(e),a=!0;for(let e=0;e<n.length;e++)n[e].top_level&&(a=!1);t.dataset=a?Dt(n):n}catch(a){t.dataset=wt(e)}De(t)}catch(r){return void Pe("File Error",r.message?r.message:r)}t.DEBUG;try{ge(t),$(document).trigger("rebuild",[t]),$(document).trigger("riskfactorChange",[t,n]),$(document).trigger("fhChange",[t]);try{acc_FamHist_ticked(),acc_FamHist_Leave(),RESULT.FLAG_FAMILY_MODAL=!0}catch(o){}}catch(i){Pe("File Error",i.message?i.message:i)}}function wt(e){let t,n=e.trim().split("\n"),a=[];for(let r=0;r<n.length;r++){let e=$.map(n[r].trim().split(/\s+/),(function(e,t){return e.trim()}));if(e.length<5)throw new Error("unknown format");let o="1"===e[4]?"M":"2"===e[4]?"F":"U",i={famid:e[0],display_name:e[1],name:e[1],sex:o};if("0"!==e[2]&&(i.father=e[2]),"0"!==e[3]&&(i.mother=e[3]),void 0!==t&&t!==i.famid)break;if("2"===e[5]&&(i.affected=2),e.length>6){i.alleles="";for(let t=6;t<e.length;t+=2)i.alleles+=e[t]+"/"+e[t+1]+";"}a.unshift(i),t=e[0]}return Dt(a)}function vt(e){let[t,n]=function(e){let t=e.trim().split("\n"),n=[],a=[];const r=/([0-9])/;let o=3,i=st(o),s=[26,27,27,28];for(let l=0;l<t.length;l++){let e=t[l].trim();if(0===e.indexOf("##")){if(0===e.indexOf("##CanRisk")){const t=e.match(r);if(o=parseInt(t[1]),i=st(o),e.indexOf(";")>-1){let t=e.split(";");for(let e=1;e<t.length;e++)2===t[e].split("=").length&&a.push(t[e])}}-1===e.indexOf("CanRisk")&&0!==e.indexOf("##FamID")&&a.push(e.replace("##",""));continue}let c=/\t/;e.indexOf("\t")<0&&(c=/\s+/);let d=$.map(e.split(c),(function(e,t){return e.trim()}));if(d.length>1){if(d.length!==s[o-1])throw new Error("Found number of columns "+d.length+"; expected "+s[o-1]+" for CanRisk version "+o);let e={famid:d[0],display_name:d[1],name:d[3],sex:d[6],status:d[8]};"1"===d[2]&&(e.proband=!0),"0"!==d[4]&&(e.father=d[4]),"0"!==d[5]&&(e.mother=d[5]),"0"!==d[7]&&(e.mztwin=d[7]),"0"!==d[9]&&(e.age=d[9]),"0"!==d[10]&&(e.yob=d[10]);let t=11;$.each(nt,(function(n,a){"0"!==d[t]&&(e[a]=d[t]),t++})),"0"!==d[t++]&&(e.ashkenazi=1);for(let n=0;n<i.length;n++){let a=d[t].split(":");"0"!==a[0]?"S"!==a[0]&&"T"!==a[0]||"P"!==a[1]&&"N"!==a[1]||(e[i[n]+"_gene_test"]={type:a[0],result:a[1]}):"P"!==a[1]&&"N"!==a[1]||(e[i[n]+"_gene_test"]={type:a[0],result:a[1]}),t++}let a=d[t].split(":");for(let n=0;n<a.length;n++)"0"!==a[n]&&("N"!==a[n]&&"P"!==a[n]||(e[it[n]+"_bc_pathology"]=a[n]));n.push(e)}}return n.sort((function(e,t){return void 0!==e.mztwin?e.mztwin.localeCompare(t.mztwin):0})),[a,n]}(e);try{return[t,Dt(n)]}catch(a){return[t,n]}}function xt(e,t){let n=e.trim().split("\n"),a=[];for(let o=2;o<n.length;o++){let e=$.map(n[o].trim().split(/\s+/),(function(e,t){return e.trim()}));if(e.length>1){let n={famid:e[0],display_name:e[1],name:e[3],sex:e[6],status:e[8]};"1"===e[2]&&(n.proband=!0),"0"!==e[4]&&(n.father=e[4]),"0"!==e[5]&&(n.mother=e[5]),"0"!==e[7]&&(n.mztwin=e[7]),"0"!==e[9]&&(n.age=e[9]),"0"!==e[10]&&(n.yob=e[10]);let r=11;if($.each(nt,(function(t,a){"0"!==e[r]&&(n[a]=e[r]),r++})),4===t){"0"!==e[r++]&&(n.ashkenazi=1);for(let t=0;t<5;t++)r+=2,"0"!==e[r-2]&&("S"!==e[r-2]&&"T"!==e[r-2]||"P"!==e[r-1]&&"N"!==e[r-1]||(n[at[t]+"_gene_test"]={type:e[r-2],result:e[r-1]}))}else 2===t&&(r+=2,"0"!==e[r-2]&&("S"!==e[r-2]&&"T"!==e[r-2]||("N"===e[r-1]?(n.brca1_gene_test={type:e[r-2],result:"N"},n.brca2_gene_test={type:e[r-2],result:"N"}):"1"===e[r-1]?(n.brca1_gene_test={type:e[r-2],result:"P"},n.brca2_gene_test={type:e[r-2],result:"N"}):"2"===e[r-1]?(n.brca1_gene_test={type:e[r-2],result:"N"},n.brca2_gene_test={type:e[r-2],result:"P"}):"3"===e[r-1]&&(n.brca1_gene_test={type:e[r-2],result:"P"},n.brca2_gene_test={type:e[r-2],result:"P"}))),"0"!==e[r++]&&(n.ashkenazi=1));for(let t=0;t<it.length;t++)"0"!==e[r]&&("N"!==e[r]&&"P"!==e[r]||(n[it[t]+"_bc_pathology"]=e[r])),r++;a.unshift(n)}}try{return Dt(a)}catch(r){return a}}function Dt(e){for(let n=0;n<2;n++)for(let t=0;t<e.length;t++)At(e,e[t].name);!function(e){let t=!1,n=e.length;for(let a=0;a<n;a++){let n=Re(e,e[a]),r=e[a].level;for(let a=0;a<n.length;a++)if(r-n[a].level>1){n[a].level=r-1;let o=Ne(e,n[a]);for(let t=0;t<o.length;t++){let n=Ge(e,o[t]);n.level=r-1;let a=Ge(e,n.mother),i=Ge(e,n.father);a&&(a.level=r),i&&(i.level=r)}t=!0}}}(e);let t=0;for(let n=0;n<e.length;n++)e[n].level&&e[n].level>t&&(t=e[n].level);for(let n=0;n<e.length;n++)if(1===Be(e,e[n].name))if(e[n].level&&e[n].level===t)e[n].top_level=!0;else{e[n].noparents=!0;let t=St(e,e[n]);if(t>-1&&e[t].mother&&(e[n].mother=e[t].mother,e[n].father=e[t].father),!e[n].mother)for(let a=0;a<e.length;a++)if(e[n].level===e[a].level-1&&(t=St(e,e[a]),t>-1&&n!==t)){e[n].mother="F"===e[a].sex?e[a].name:e[t].name,e[n].father="M"===e[a].sex?e[a].name:e[t].name;break}}else delete e[n].top_level;return e}function St(e,t){for(let n=0;n<e.length;n++){let a=e[n];if(t.name===a.mother)return He(e,a.father);if(t.name===a.father)return He(e,a.mother)}return-1}function At(e,t){let n=He(e,t);Pt(n,e[n].level?e[n].level:0,e)}function Pt(e,t,n){let a=["mother","father"];t++;for(let r=0;r<a.length;r++){let o=He(n,n[e][a[r]]);if(o>=0){let a=n[He(n,n[e].mother)],r=n[He(n,n[e].father)];(!n[o].level||n[o].level<t)&&(a.level=t,r.level=t),a.level<r.level?a.level=r.level:r.level<a.level&&(r.level=a.level),Pt(o,t,n)}}}var kt=Object.freeze({__proto__:null,addIO:lt,copy_svg:function(e){let t=pt(e);return d3.select(t.get(0)).selectAll("text").filter((function(){return 0===d3.select(this).text().length||d3.select(this),"FontAwesome"===d3.select(this).attr("font-family")})).remove(),$(function(e){let t=function(e,t){let n=[],a=0;t.lastIndex=0;let r=t.exec(e);for(;r;){if(a++,a>400)return-1;n.push(r),t.lastIndex===r.index&&t.lastIndex++,r=t.exec(e)}return n}(e,/url\((&quot;|"|'){0,1}#(.*?)(&quot;|"|'){0,1}\)/g);return-1===t?"ERROR DISPLAYING PEDIGREE":($.each(t,(function(t,n){let a=n[1]?n[1]:"",r=n[2],o='id="'+r+'"',i="url\\("+a+"#"+r+a+"\\)",s=r+ke(2);e=(e=e.replace(new RegExp(o,"g"),'id="'+s+'"')).replace(new RegExp(i,"g"),"url(#"+s+")")})),e)}(t.html()))},img_download:dt,load_data:bt,print:mt,readBoadiceaV4:xt,readCanRiskFile:vt,readLinkage:wt,save_file:gt,svg2img:ht,svg_download:ft});function _t(e,t){let n=[1,2,3,4,5,6,7,8,9,"A"];for(let a=0;a<e.length;a++)if(e[a][t]){let r=n.indexOf(e[a][t]);r>-1&&n.splice(r,1)}if(n.length>0)return n[0]}let Et,Ct;function It(e,t){let n=parseInt($("body").css("font-size")),a=d3.select(".diagram");a.append("rect").attr("class","popup_selection").attr("rx",6).attr("ry",6).attr("transform","translate(-1000,-100)").style("opacity",0).attr("width",7.9*n).attr("height",2*n).style("stroke","darkgrey").attr("fill","white");let r=a.append("text").attr("font-family","FontAwesome").style("opacity",0).style("font-size","1.1em").attr("class","popup_selection fa-square persontype").attr("transform","translate(-1000,-100)").attr("x",n/3).attr("y",1.5*n).text(" ").append("svg:title").text("add male"),o=a.append("text").attr("font-family","FontAwesome").style("opacity",0).style("font-size","1.1em").attr("class","popup_selection fa-circle persontype").attr("transform","translate(-1000,-100)").attr("x",1.71*n).attr("y",1.5*n).text(" ").append("svg:title").text("add female");a.append("text").attr("font-family","FontAwesome").style("opacity",0).style("font-size","1.1em").attr("transform","translate(-1000,-100)").attr("x",.065*n).attr("y",.065*-n).attr("class","popup_selection fa-unspecified popup_selection_rotate45 persontype").text(" ").append("svg:title").text("add unspecified"),a.append("text").attr("font-family","FontAwesome").style("opacity",0).style("font-size","1.6em").attr("transform","translate(-1000,-100)").attr("class","popup_selection fa-angle-up persontype dztwin").attr("x",4.62*n).attr("y",1.5*n).text(" ").append("svg:title").text("add dizygotic/fraternal twins"),a.append("text").attr("font-family","FontAwesome").style("opacity",0).style("font-size","1.6em").attr("transform","translate(-1000,-100)").attr("class","popup_selection fa-caret-up persontype mztwin").attr("x",6.4*n).attr("y",1.5*n).text(" ").append("svg:title").text("add monozygotic/identical twins");let i={};d3.selectAll(".persontype").on("click",(function(){let t,n,a=Se(he(e)),r=d3.select(this).classed("mztwin"),o=d3.select(this).classed("dztwin");if(r||o?(n=i.node.datum().data.sex,t=r?"mztwin":"dztwin"):n=d3.select(this).classed("fa-square")?"M":d3.select(this).classed("fa-circle")?"F":"U","addsibling"===i.type)Ot(a,i.node.datum().data,n,!1,t);else{if("addchild"!==i.type)return;!function(e,t,n,a,r){if(r&&-1===$.inArray(r,["mztwin","dztwin"]))return new Error("INVALID TWIN TYPE SET: "+r);void 0===a&&(a=1);let o,i,s,l=Ve(e,t);if(0===l.length){let n=Ot(e,t,"F"===t.sex?"M":"F","F"===t.sex);n.noparents=!0,o=n.name,i=He(e,t.name)+1}else{let n=l[0];o=n.father===t.name?n.mother:n.father,i=He(e,n.name)}r&&(s=_t(e,r));let c=[];for(let d=0;d<a;d++){let a={name:ke(4),sex:n,mother:"F"===t.sex?t.name:o,father:"F"===t.sex?o:t.name};e.splice(i,0,a),r&&(a[r]=s),c.push(a)}}(a,i.node.datum().data,t?"U":n,t?2:1,t)}e.dataset=a,$(document).trigger("rebuild",[e]),d3.selectAll(".popup_selection").style("opacity",0),i={}})).on("mouseover",(function(){i.node&&i.node.select("rect").style("opacity",.2),d3.selectAll(".popup_selection").style("opacity",1),"addsibling"===i.type?d3.select(this).classed("fa-square")?r.text("add brother"):o.text("add sister"):"addchild"===i.type&&(d3.select(this).classed("fa-square")?r.text("add son"):o.text("add daughter"))})),d3.selectAll(".popup_selection").on("mouseout",(function(){void 0!==i.node&&-1===u.indexOf(i.node.datum())&&i.node.select("rect").style("opacity",0),d3.selectAll(".popup_selection").style("opacity",0)})),function(e){d3.select(".diagram").append("line").attr("class","line_drag_selection").attr("stroke-width",6).style("stroke-dasharray","2, 1").attr("stroke","black").call(d3.drag().on("start",(function(){Et=Ct,d3.selectAll(".line_drag_selection").attr("stroke","darkred")})).on("drag",(function(t){t.sourceEvent.stopPropagation();let n=t.dx,a=t.dy,r=parseFloat(d3.select(this).attr("x2"))+n,o=parseFloat(d3.select(this).attr("y2"))+a;Lt(e.symbol_size-10,0,r,o)})).on("end",(function(t){if(Ct&&Et.data.name!==Ct.data.name&&Et.data.sex!==Ct.data.sex){let t={name:ke(4),sex:"U",mother:"F"===Et.data.sex?Et.data.name:Ct.data.name,father:"F"===Et.data.sex?Ct.data.name:Et.data.name},n=Se(e.dataset);e.dataset=n;let a=He(e.dataset,Et.data.name)+1;e.dataset.splice(a,0,t),$(document).trigger("rebuild",[e])}Lt(0,0,0,0),d3.selectAll(".line_drag_selection").attr("stroke","black"),Et=void 0}))).append("svg:title").text("drag to create consanguineous partners"),Lt(0,0,0,0)}(e),t.filter((function(t){return!(t.data.hidden&&!e.DEBUG)})).append("rect").attr("class","indi_rect").attr("rx",6).attr("ry",6).attr("x",(function(t){return-.75*e.symbol_size})).attr("y",(function(t){return-e.symbol_size})).attr("width",1.5*e.symbol_size+"px").attr("height",2*e.symbol_size+"px").style("stroke","black").style("stroke-width",.7).style("opacity",0).attr("fill","lightgrey");let s=function(t){return c-.75*e.symbol_size},l=e.symbol_size-2,c=0,d={addchild:{text:"",title:"add child",fx:s,fy:l},addsibling:{text:"",title:"add sibling",fx:s,fy:l},addpartner:{text:"",title:"add partner",fx:s,fy:l},addparents:{text:"",title:"add parents",fx:-.75*e.symbol_size,fy:11-e.symbol_size},delete:{text:"X",title:"delete",fx:e.symbol_size/2-1,fy:12-e.symbol_size,styles:{"font-weight":"bold",fill:"darkred","font-family":"monospace"}}};e.edit&&(d.settings={text:"",title:"settings",fx:-n/2+2,fy:11-e.symbol_size});for(let h in d){let n=t.filter((function(t){return!(t.data.hidden&&!e.DEBUG||(void 0===t.data.mother||t.data.noparents)&&"addsibling"===h||void 0!==t.data.parent_node&&t.data.parent_node.length>1&&"addpartner"===h||void 0===t.data.parent_node&&"addchild"===h||void 0===t.data.noparents&&void 0===t.data.top_level&&"addparents"===h)})).append("text").attr("class",h).style("opacity",0).attr("font-family","FontAwesome").attr("xx",(function(e){return e.x})).attr("yy",(function(e){return e.y})).attr("x",d[h].fx).attr("y",d[h].fy).attr("font-size","0.85em").text(d[h].text);if("styles"in d[h])for(let e in d[h].styles)n.attr(e,d[h].styles[e]);n.append("svg:title").text(d[h].title),c+=17}d3.selectAll(".addsibling, .addchild").on("mouseover",(function(){let e=d3.select(this).attr("class");d3.selectAll(".popup_selection").style("opacity",1),i={node:d3.select(this.parentNode),type:e};let t=parseInt(d3.select(this).attr("xx"))+parseInt(d3.select(this).attr("x")),a=parseInt(d3.select(this).attr("yy"))+parseInt(d3.select(this).attr("y"));d3.selectAll(".popup_selection").attr("transform","translate("+t+","+(a+2)+")"),d3.selectAll(".popup_selection_rotate45").attr("transform","translate("+(t+3*n)+","+(a+1.2*n)+") rotate(45)")})),d3.selectAll(".addchild, .addpartner, .addparents, .delete, .settings").on("click",(function(t){t.stopPropagation();let n,a=d3.select(this).attr("class"),r=d3.select(this.parentNode).datum();e.DEBUG,"settings"===a?"function"==typeof e.edit?e.edit(e,r):function(e,t){$("#node_properties").dialog({autoOpen:!1,title:t.data.display_name,width:$(window).width()>400?450:$(window).width()-30});let n="<table id='person_details' class='table'>";n+="<tr><td style='text-align:right'>Unique ID</td><td><input class='form-control' type='text' id='id_name' name='name' value="+(t.data.name?t.data.name:"")+"></td></tr>",n+="<tr><td style='text-align:right'>Name</td><td><input class='form-control' type='text' id='id_display_name' name='display_name' value="+(t.data.display_name?t.data.display_name:"")+"></td></tr>",n+="<tr><td style='text-align:right'>Age</td><td><input class='form-control' type='number' id='id_age' min='0' max='120' name='age' style='width:7em' value="+(t.data.age?t.data.age:"")+"></td></tr>",n+="<tr><td style='text-align:right'>Year Of Birth</td><td><input class='form-control' type='number' id='id_yob' min='1900' max='2050' name='yob' style='width:7em' value="+(t.data.yob?t.data.yob:"")+"></td></tr>",n+='<tr><td colspan="2" id="id_sex"><label class="radio-inline"><input type="radio" name="sex" value="M" '+("M"===t.data.sex?"checked":"")+'>Male</label><label class="radio-inline"><input type="radio" name="sex" value="F" '+("F"===t.data.sex?"checked":"")+'>Female</label><label class="radio-inline"><input type="radio" name="sex" value="U">Unknown</label></td></tr>',n+='<tr><td colspan="2" id="id_status"><label class="checkbox-inline"><input type="radio" name="status" value="0" '+(0===parseInt(t.data.status)?"checked":"")+'>&thinsp;Alive</label><label class="checkbox-inline"><input type="radio" name="status" value="1" '+(1===parseInt(t.data.status)?"checked":"")+">&thinsp;Deceased</label></td></tr>",$("#id_status input[value='"+t.data.status+"']").prop("checked",!0);let a=["adopted_in","adopted_out","miscarriage","stillbirth","termination"];n+='<tr><td colspan="2"><strong>Reproduction:</strong></td></tr>',n+='<tr><td colspan="2">';for(let o=0;o<a.length;o++){let e=a[o];2===o&&(n+='</td></tr><tr><td colspan="2">'),n+='<label class="checkbox-inline"><input type="checkbox" id="id_'+e+'" name="'+e+'" value="0" '+(t.data[e]?"checked":"")+">&thinsp;"+Nt(e.replace("_"," "))+"</label>"}n+="</td></tr>";let r=["children","name","parent_node","top_level","id","noparents","level","age","sex","status","display_name","mother","father","yob","mztwin","dztwin"];$.merge(r,a),n+='<tr><td colspan="2"><strong>Age of Diagnosis:</strong></td></tr>',$.each(e.diseases,(function(a,o){r.push(o.type+"_diagnosis_age");let i='&thinsp;<span style="padding-left:5px;background:'+e.diseases[a].colour+'"></span>',s=t.data[o.type+"_diagnosis_age"];n+="<tr><td style='text-align:right'>"+Nt(o.type.replace("_"," "))+i+"&nbsp;</td><td><input class='form-control' id='id_"+o.type+"_diagnosis_age_0' max='110' min='0' name='"+o.type+"_diagnosis_age_0' style='width:5em' type='number' value='"+(void 0!==s?s:"")+"'></td></tr>"})),n+='<tr><td colspan="2" style="line-height:1px;"></td></tr>',$.each(t.data,(function(e,t){if(-1===$.inArray(e,r)){let a=Nt(e);!0===t||!1===t?n+="<tr><td style='text-align:right'>"+a+"&nbsp;</td><td><input type='checkbox' id='id_"+e+"' name='"+e+"' value="+t+" "+(t?"checked":"")+"></td></tr>":e.length>0&&(n+="<tr><td style='text-align:right'>"+a+"&nbsp;</td><td><input type='text' id='id_"+e+"' name='"+e+"' value="+t+"></td></tr>")}})),n+="</table>",$("#node_properties").html(n),$("#node_properties").dialog("open"),$("#node_properties input[type=radio], #node_properties input[type=checkbox], #node_properties input[type=text], #node_properties input[type=number]").change((function(){!function(e){let t=he(e),n=$("#id_name").val(),a=Se(t),r=Ge(a,n);if(!r)return;$("#"+e.targetDiv).empty();let o=$("#id_yob_0").val();o&&""!==o?r.yob=o:delete r.yob;let i=$("#id_status").find("input[type='radio']:checked");i.length>0&&(r.status=i.val());let s=["miscarriage","adopted_in","adopted_out","termination","stillbirth"];for(let h=0;h<s.length;h++){let e=s[h],t=$("#id_"+e);t.length>0&&(t.is(":checked")?r[e]=!0:delete r[e])}let l=$("#id_sex").find("input[type='radio']:checked");var c;l.length>0&&(r.sex=l.val(),c=r,$("#cancer .row").show(),"M"===c.sex?(delete c.ovarian_cancer_diagnosis_age,$("[id^='id_ovarian_cancer_diagnosis_age']").closest(".row").hide(),$("[id^='id_breast_cancer2_diagnosis_age']").prop("disabled",!0)):"F"===c.sex&&(delete c.prostate_cancer_diagnosis_age,$("[id^='id_prostate_cancer_diagnosis_age']").closest(".row").hide(),$("[id^='id_breast_cancer2_diagnosis_age']").prop("disabled",!1))),function(e){$("#orig_ashk").is(":checked")?$.each(e,(function(e,t){t.proband&&(t.ashkenazi=1)})):$.each(e,(function(e,t){delete t.ashkenazi}))}(a),$("#id_approx").is(":checked")?r.approx_diagnosis_age=!0:delete r.approx_diagnosis_age,$("#person_details select[name*='_diagnosis_age']:visible, #person_details input[type=text]:visible, #person_details input[type=number]:visible").each((function(){let e=this.name.indexOf("_diagnosis_age")>-1?this.name.substring(0,this.name.length-2):this.name;if($(this).val()){let t=$(this).val();e.indexOf("_diagnosis_age")>-1&&$("#id_approx").is(":checked")&&(t=function(e){let t=10*Math.round((e-1)/10);return e<t?t-5:t+5}(t)),r[e]=t}else delete r[e]})),$('#person_details input[type="checkbox"][name$="cancer"],input[type="checkbox"][name$="cancer2"]').each((function(){this.checked?r[$(this).attr("name")]=!0:delete r[$(this).attr("name")]})),$('#person_details select[name$="_bc_pathology"]').each((function(){"-"!==$(this).val()?r[$(this).attr("name")]=$(this).val():delete r[$(this).attr("name")]})),$('#person_details select[name$="_gene_test"]').each((function(){if("-"!==$(this).val()){let e=$('select[name="'+$(this).attr("name")+'_result"]');r[$(this).attr("name")]={type:$(this).val(),result:$(e).val()}}else delete r[$(this).attr("name")]}));let d=$('#person_details select[name="hoxb13_gene_test_result"]').val();void 0!==d&&"-"!==d?r.hoxb13_gene_test={type:"T",result:d}:delete r.hoxb13_gene_test;try{$("#person_details").find("form").valid()}catch(u){}!function(e,t){if(!t.mztwin&&!t.dztwin)return;let n=t.mztwin?"mztwin":"dztwin";for(let a=0;a<e.length;a++){let r=e[a];r[n]&&t[n]===r[n]&&r.name!==t.name&&("mztwin"===n&&(r.sex=t.sex),t.yob&&(r.yob=t.yob),!t.age||0!==t.status&&t.status||(r.age=t.age))}}(a,r),e.dataset=a,$(document).trigger("rebuild",[e])}(e)}))}(e,r):"delete"===a?(n=Se(he(e)),function(e,t,n,a){let r,o,i,s=ve[n.targetDiv],l=je(s),c=[];if(void 0===t.id){let e=Ge(l,t.name);void 0!==e&&(t=e.data)}if(t.parent_node)for(r=0;r<t.parent_node.length;r++){let n=t.parent_node[r],a=[Ge(e,n.mother.name),Ge(e,n.father.name)];for(o=0;o<a.length;o++)(a[o].name===t.name||void 0!==a[o].noparents||a[o].top_level)&&(e.splice(He(e,a[o].name),1),c.push(a[o]));let i=n.children,d=$.map(i,(function(e,t){return e.name}));for(o=0;o<i.length;o++){let t=Ge(e,i[o].name);if(t){t.noparents=!0;let n,a=Ne(e,t);if(a.length>0&&(n=Ge(e,a[0])),n&&n.mother!==t.mother)t.mother=n.mother,t.father=n.father;else if(n){let e=Tt(s,Ge(l,t.name),d);t.mother=e[0]?e[0].data.mother:e[1]?e[1].data.mother:null,t.father=e[0]?e[0].data.father:e[1]?e[1].data.father:null}else e.splice(He(e,t.name),1)}}}else e.splice(He(e,t.name),1);for(r=0;r<c.length;r++){let t=c[r];if(Me(e,t).length<1){let n=Ge(l,t.name).ancestors();for(o=0;o<n.length;o++)n[o].data.mother&&(e.splice(He(e,n[o].data.mother.name),1),e.splice(He(e,n[o].data.father.name),1))}}!function(e){let t=["mztwin","dztwin"];for(let n=0;n<e.length;n++)for(let a=0;a<t.length;a++){let r=t[a];if(e[n][r]){let t=0;for(let a=0;a<e.length;a++)e[a][r]===e[n][r]&&t++;t<2&&delete e[n][[r]]}}}(e);try{let t=$.extend({},n);t.dataset=Se(e),De(t),i=Oe(e)}catch(d){throw Pe("Warning","Deletion of this pedigree member is disallowed."),d}i.length>0&&0===Oe(n.dataset).length?Pe("Warning","Deleting this will split the pedigree. Continue?",a,n,e):a&&a(n,e)}(n,r.data,e,Ft)):"addparents"===a?(n=Se(he(e)),e.dataset=n,function(e,t,n){let a,r,o,i,s=je(ve[e.targetDiv]),l=Ge(s,n),c=l.data,d=l.depth,u=-101,h=Ve(t,c);if(h.length>0&&(o=h[0].mother===c.name?h[0].father:h[0].mother,u=Ge(s,o).data.id),1===d)for(a={name:ke(4),sex:"F",top_level:!0},r={name:ke(4),sex:"M",top_level:!0},t.splice(0,0,a),t.splice(0,0,r),i=0;i<t.length;i++)!t[i].top_level&&2!==Be(t,t[i].name)||t[i].name===a.name||t[i].name===r.name||(delete t[i].top_level,t[i].noparents=!0,t[i].mother=a.name,t[i].father=r.name);else{let n=Ge(s,l.data.mother),o=Ge(s,l.data.father),d=Me(t,c),h=1e4,p=l.data.id;for(i=0;i<d.length;i++){let e=Ge(s,d[i].name).data.id;e<h&&e>l.data.id&&(h=e),e<p&&(p=e)}let f,m=p>=l.data.id||u===p&&h<1e4;e.DEBUG,f=!m&&o.data.id>n.data.id||m&&o.data.id<n.data.id?He(t,c.father):He(t,c.mother);let g=t[f];r=Ot(t,g,"M",m),a=Ot(t,g,"F",m);let y=He(t,r.name),b=He(t,a.name);if(y>b){let e=t[y];t[y]=t[b],t[b]=e}let w=function(e,t){return $.map(e,(function(e,n){return e.name!==t.name&&"noparents"in e&&e.mother===t.mother&&e.father===t.father?e:null}))}(t,c),v=l.data.id;for(i=0;i<w.length;i++){let n=Ge(s,w[i].name).data.id;if(e.DEBUG,(m||v<n)&&n<h){let e=He(t,w[i].name);t[e].mother=a.name,t[e].father=r.name}}}2===d?(a.top_level=!0,r.top_level=!0):d>2&&(a.noparents=!0,r.noparents=!0);let p=He(t,c.name);if(t[p].mother=a.name,t[p].father=r.name,delete t[p].noparents,"parent_node"in c){let e=t[He(t,o)];"noparents"in e&&(e.mother=a.name,e.father=r.name)}}(e,n,r.data.name),$(document).trigger("rebuild",[e])):"addpartner"===a&&(n=Se(he(e)),function(e,t,n){let a=Ge(je(ve[e.targetDiv]),n),r=Ot(t,a.data,"F"===a.data.sex?"M":"F","F"===a.data.sex);r.noparents=!0;let o={name:ke(4),sex:"M"};o.mother="F"===a.data.sex?a.data.name:r.name,o.father="F"===a.data.sex?r.name:a.data.name;let i=He(t,a.data.name)+2;t.splice(i,0,o)}(e,n,r.data.name),e.dataset=n,$(document).trigger("rebuild",[e])),$(document).trigger("fhChange",[e])}));let u=[];t.filter((function(e){return!e.data.hidden})).on("click",(function(t,n){t.ctrlKey?-1===u.indexOf(n)?u.push(n):u.splice(u.indexOf(n),1):u=[n],"nodeclick"in e&&(e.nodeclick(n.data),d3.selectAll(".indi_rect").style("opacity",0),d3.selectAll(".indi_rect").filter((function(e){return-1!==u.indexOf(e)})).style("opacity",.5))})).on("mouseover",(function(t,n){t.stopPropagation(),Ct=n,Et?Et.data.name!==Ct.data.name&&Et.data.sex!==Ct.data.sex&&d3.select(this).select("rect").style("opacity",.2):(d3.select(this).select("rect").style("opacity",.2),d3.select(this).selectAll(".addchild, .addsibling, .addpartner, .addparents, .delete, .settings").style("opacity",1),d3.select(this).selectAll(".indi_details").style("opacity",0),Lt(e.symbol_size-10,0,e.symbol_size-2,0,n.x+","+(n.y+2)))})).on("mouseout",(function(t){if(Et)return;d3.select(this).selectAll(".addchild, .addsibling, .addpartner, .addparents, .delete, .settings").style("opacity",0),-1===u.indexOf(t)&&d3.select(this).select("rect").style("opacity",0),d3.select(this).selectAll(".indi_details").style("opacity",1);let n=d3.pointer(t)[0],a=d3.pointer(t)[1];a<.8*e.symbol_size&&d3.selectAll(".popup_selection").style("opacity",0),Et||(Math.abs(a)>.25*e.symbol_size||Math.abs(a)<-.25*e.symbol_size||n<.2*e.symbol_size)&&Lt(0,0,0,0)}))}function Ft(e,t){e.dataset=t,$(document).trigger("rebuild",[e])}function Lt(e,t,n,a,r){r&&d3.selectAll(".line_drag_selection").attr("transform","translate("+r+")"),d3.selectAll(".line_drag_selection").attr("x1",e).attr("y1",t).attr("x2",n).attr("y2",a)}function Nt(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Ot(e,t,n,a,r){if(r&&-1===$.inArray(r,["mztwin","dztwin"]))return new Error("INVALID TWIN TYPE SET: "+r);let o={name:ke(4),sex:n};t.top_level?o.top_level=!0:(o.mother=t.mother,o.father=t.father);let i=He(e,t.name);return r&&function(e,t,n,a){!t[a]&&(t[a]=_t(e,a),!t[a])||(n[a]=t[a],t.yob&&(n.yob=t.yob),!t.age||"0"!==t.status&&t.status||(n.age=t.age))}(e,e[i],o,r),a?i>0&&i--:i++,e.splice(i,0,o),o}function Tt(e,t,n){let a,r,o=Ue(je(e),t.depth,n);for(let i=0;i<o.length;i++)o[i].x<t.x&&(a=o[i]),!r&&o[i].x>t.x&&(r=o[i]);return[a,r]}function Rt(e,t){let n="";for(let a=0;a<t.length;a++){let r=t[a];if(e.data[r])if("alleles"===r){let t=e.data.alleles.split(";");for(let e=0;e<t.length;e++)""!==t[e]&&(n+=t[e]+";")}else if("age"===r)n+=e.data[r]+"y ";else if("stillbirth"===r)n+="SB";else if(r.match("_gene_test$")&&"result"in e.data[r]){let t=e.data[r].result.toUpperCase();"-"!==t&&(n+=r.replace("_gene_test","").toUpperCase(),n+="P"===t?"+ ":"N"===t?"- ":" ")}else if(r.match("_bc_pathology$")){let t=e.data[r].toUpperCase();n+=r.replace("_bc_pathology","").toUpperCase(),n+="P"===t?"+ ":"N"===t?"- ":" "}else n+=e.data[r]}if(""!==n)return n}function zt(e,t,n){if(Mt(e,t))return e.y_offset=e.y_offset?e.y_offset+n:2.35*n,e.y_offset}function Mt(e,t){for(let n=0;n<t.length;n++)if(Ae(t[n],e.data))return!0;return!1}function Vt(e,t,n,a,r,o,i){t.filter((function(e){return!e.data.hidden&&(!i||Mt(e,i))})).append("text").attr("class",o?o+" ped_label":"ped_label").attr("x",n).attr("y",a).attr("font-family",e.font_family).attr("font-size",e.font_size).attr("font-weight",e.font_weight).text(r)}function Bt(e,t,n){if(n>=e.length)for(var a=n-e.length+1;a--;)e.push(void 0);return e.splice(n,0,e.splice(t,1)[0]),e}function Ht(e){let t=$.extend({targetDiv:"pedigree_edit",dataset:[{name:"m21",display_name:"father",sex:"M",top_level:!0},{name:"f21",display_name:"mother",sex:"F",top_level:!0},{name:"ch1",display_name:"me",sex:"F",mother:"f21",father:"m21",proband:!0}],width:600,height:400,symbol_size:35,zoomSrc:["wheel","button"],zoomIn:1,zoomOut:1,dragNode:!0,showWidgets:!0,diseases:[{type:"breast_cancer",colour:"#F68F35"},{type:"breast_cancer2",colour:"pink"},{type:"ovarian_cancer",colour:"#306430"},{type:"pancreatic_cancer",colour:"#4289BA"},{type:"prostate_cancer",colour:"#D5494A"}],labels:["stillbirth",["age","yob"],"alleles",["brca1_gene_test","brca2_gene_test","palb2_gene_test","chek2_gene_test","atm_gene_test"],["rad51d_gene_test","rad51c_gene_test","brip1_gene_test","hoxb13_gene_test"],["er_bc_pathology","pr_bc_pathology","her2_bc_pathology","ck14_bc_pathology","ck56_bc_pathology"]],keep_proband_on_reset:!1,font_size:".75em",font_family:"Helvetica",font_weight:700,background:"#FAFAFA",node_background:"#fdfdfd",validate:!0,DEBUG:!1},e);0===$("#fullscreen").length&&(function(e){let t=$.extend({btn_target:"pedigree_history"},e),n=[{fa:"fa-file-image",title:"download PNG image"},{fa:"fa-undo",title:"undo"},{fa:"fa-redo",title:"redo"},{fa:"fa-refresh",title:"reset"}];n.push({fa:"fa-crosshairs",title:"scale-to-fit"}),t.zoomSrc&&t.zoomSrc.indexOf("button")>-1&&(1!==t.zoomOut&&n.push({fa:"fa-minus-circle",title:"zoom-out"}),1!==t.zoomIn&&n.push({fa:"fa-plus-circle",title:"zoom-in"})),n.push({fa:"fa-arrows-alt",title:"fullscreen"});let a="";for(let r=0;r<n.length;r++)a+="<span>",a+='<i class="fa fa-lg '+n[r].fa+' pe-2" aria-hidden="true" title="'+n[r].title+'"'+("fa-arrows-alt"===n[r].fa?'id="fullscreen" ':"")+"></i>",a+="</span>";$("#"+t.btn_target).append(a),function(e){$(document).on("webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",(function(t){let n=he(e);null!=n&&(e.dataset=n),$(document).trigger("rebuild",[e]),setTimeout((function(){Qe(e)}),500)})),$("#fullscreen").on("click",(function(t){if(Je())document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen();else{let t=$("#"+e.targetDiv)[0];t.requestFullscreen?t.requestFullscreen():document.documentElement.mozRequestFullScreen?t.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen?t.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):document.documentElement.msRequestFullscreen&&t.msRequestFullscreen()}}));let t=0;function n(){Ze(e,1.05)}function a(){Ze(e,.95)}$(".fa-plus-circle, .fa-minus-circle").on("mousedown",(function(){t=setInterval($(this).hasClass("fa-plus-circle")?n:a,50)})).on("mouseup mouseleave",(function(){clearInterval(t)})),$("#"+e.btn_target).on("click",(function(t){if(t.stopPropagation(),$(t.target).hasClass("fg-grey"))return!1;if($(t.target).hasClass("fa-undo"))e.dataset=pe(e),$("#"+e.targetDiv).empty(),$(document).trigger("build",[e]);else if($(t.target).hasClass("fa-redo"))e.dataset=fe(e),$("#"+e.targetDiv).empty(),$(document).trigger("build",[e]);else if($(t.target).hasClass("fa-refresh"))Pe("Pedigree Reset","This may result in loss of some data. Reset now?",tt,e);else if($(t.target).hasClass("fa-crosshairs"))Qe(e);else if($(t.target).hasClass("fa-file-image"))return;$(document).trigger("fhChange",[e])}))}(t)}(t),lt(t)),-1===ue(t)&&de(t),function(e){let t=le(e),n=ue(e),a="#"+e.btn_target;n<=t?$(a+" .fa-redo").addClass("fg-grey"):$(a+" .fa-redo").removeClass("fg-grey"),t>1?$(a+" .fa-undo").removeClass("fg-grey"):$(a+" .fa-undo").addClass("fg-grey")}(t),De(t),t.dataset=function(e){for(let r=0;r<e.length;r++)2===Be(e,e[r].name)&&(e[r].top_level=!0);let t=[],n=[];for(let r=0;r<e.length;r++){let a=e[r];if("top_level"in a&&-1===$.inArray(a.name,n)){n.push(a.name),t.push(a);let r=Ne(e,a);for(let a=0;a<r.length;a++)-1===$.inArray(r[a],n)&&(n.push(r[a]),t.push(Ge(e,r[a])))}}let a=$.map(e,(function(e,t){return"top_level"in e&&e.top_level?null:e}));for(let r=t.length;r>0;--r)a.unshift(t[r-1]);return a}(t.dataset),t.DEBUG&&function(e){let t;$("#pedigree_data").remove(),$("body").append("<div id='pedigree_data'></div>");for(let n=0;n<e.dataset.length;n++){let a="<div class='row'><strong class='col-md-1 text-right'>"+e.dataset[n].name+"</strong><div class='col-md-11'>";for(t in e.dataset[n])"name"!==t&&("parent"===t?a+="<span>"+t+":"+e.dataset[n][t].name+"; </span>":"children"===t?void 0!==e.dataset[n][t][0]&&(a+="<span>"+t+":"+e.dataset[n][t][0].name+"; </span>"):a+="<span>"+t+":"+e.dataset[n][t]+"; </span>");$("#pedigree_data").append(a+"</div></div>")}for(t in $("#pedigree_data").append("<br /><br />"),e)"dataset"!==t&&$("#pedigree_data").append("<span>"+t+":"+e[t]+"; </span>")}(t);let n=Ke(t),a=d3.select("#"+t.targetDiv).append("svg:svg").attr("width",n.width).attr("height",n.height);a.append("rect").attr("width","100%").attr("height","100%").attr("rx",6).attr("ry",6).style("stroke","darkgrey").style("fill",t.background).style("stroke-width",1);let r=a.append("g").attr("class","diagram"),o={name:"hidden_root",id:0,hidden:!0,children:$.map(t.dataset,(function(e,t){return"top_level"in e&&e.top_level?e:null}))},i=_e(t,o,o)[0],s=d3.hierarchy(o);ve[t.targetDiv]=s;let l=function(e){let t=Ke(e),n=0,a={};for(let o=0;o<e.dataset.length;o++){let t=Be(e.dataset,e.dataset[o].name),r=Ve(e.dataset,e.dataset[o]),i=1+(r.length>0?.55+.25*r.length:0)+(e.dataset[o].father?.25:0);t in a?a[t]+=i:a[t]=i,a[t]>n&&(n=a[t])}let r=Object.keys(a).length*e.symbol_size*3.5;return{width:t.width-e.symbol_size>n*e.symbol_size*1.65?t.width-e.symbol_size:n*e.symbol_size*1.65,height:t.height-e.symbol_size>r?t.height-e.symbol_size:r}}(t);t.DEBUG;let c=d3.tree().separation((function(e,t){return e.parent===t.parent||e.data.hidden||t.data.hidden?1.2:2.2})).size([l.width,l.height])(s.sort((function(e,t){return e.data.id-t.data.id}))),d=c.descendants();if($.map(t.dataset,(function(e,t){return e.hidden?null:e})).length!==t.dataset.length)throw xe("NUMBER OF VISIBLE NODES DIFFERENT TO NUMBER IN THE DATASET");!function(e,t,n){function a(r){if(r.children&&(r.children.forEach(a),void 0!==r.data.father)){let a=Ge(n,r.data.father.name),o=Ge(n,r.data.mother.name),i=(a.x+o.x)/2;if($e(e,t.descendants(),i,r.depth,[r.data.name]))(r.x<a.x&&r.x<o.x||r.x>a.x&&r.x>o.x)&&(r.x=i);else{r.x=i;let n=r.x-i;if(2===r.children.length&&(r.children[0].data.hidden||r.children[1].data.hidden)){if(!r.children[0].data.hidden||!r.children[1].data.hidden){let n=r.children[0].data.hidden?r.children[1]:r.children[0],a=r.children[0].data.hidden?r.children[0]:r.children[1];(n.x<a.x&&i<a.x||n.x>a.x&&i>a.x)&&!$e(e,t.descendants(),i,n.depth,[n.data.name])&&(n.x=i)}}else if(1!==r.children.length||r.children[0].data.hidden){if(0!==n&&!function(e,t,n,a){let r=t.descendants(),o=$.map(r,(function(e,t){return e.data.name})),i=a.descendants();for(let s=0;s<r.length;s++){let a=r[s];if(t.data.name!==a.data.name&&$e(e,i,a.x-n,a.depth,o))return!0}return!1}(e,r,n,t))if(1===r.children.length)r.children[0].x=i;else{let t=r.descendants();e.DEBUG;for(let e=0;e<t.length;e++)r.data.name!==t[e].data.name&&(t[e].x-=n)}}else $e(e,t.descendants(),i,r.children[0].depth,[r.children[0].data.name])||(r.children[0].x=i)}}}a(t),a(t)}(t,c,d);let u=function(e,t){let n=[];for(let a=0;a<t.length;a++)n.push({mother:Ge(e,t[a].mother.name),father:Ge(e,t[a].father.name)});return n}(d,i);!function(e,t){for(let n=0;n<t.length;n++)jt(e,t[n])}(t,u);let h=r.selectAll(".node").data(c.descendants()).enter().append("g").attr("transform",(function(e,t){return"translate("+e.x+","+e.y+")"}));h.filter((function(e){return!e.data.hidden})).append("path").attr("shape-rendering","geometricPrecision").attr("transform",(function(e){return Ut(e.data.sex)||e.data.miscarriage||e.data.termination?"":"rotate(45)"})).attr("d",d3.symbol().size((function(e){return t.symbol_size*t.symbol_size+2})).type((function(e){return e.data.miscarriage||e.data.termination?d3.symbolTriangle:"F"===e.data.sex?d3.symbolCircle:d3.symbolSquare}))).style("stroke",(function(e){return e.data.age&&e.data.yob&&!e.data.exclude?"#303030":"grey"})).style("stroke-width",(function(e){return e.data.age&&e.data.yob&&!e.data.exclude?".3em":".1em"})).style("stroke-dasharray",(function(e){return e.data.exclude?"3, 3":null})).style("fill","none"),h.filter((function(e){return!(e.data.hidden&&!t.DEBUG)})).append("clipPath").attr("id",(function(e){return e.data.name})).append("path").attr("class","node").attr("transform",(function(e){return Ut(e.data.sex)||e.data.miscarriage||e.data.termination?"":"rotate(45)"})).attr("d",d3.symbol().size((function(e){return e.data.hidden?t.symbol_size*t.symbol_size/5:t.symbol_size*t.symbol_size})).type((function(e){return e.data.miscarriage||e.data.termination?d3.symbolTriangle:"F"===e.data.sex?d3.symbolCircle:d3.symbolSquare}))),h.filter((function(e){return!(e.data.hidden&&!t.DEBUG)})).selectAll("pienode").data((function(e){let n=0,a=$.map(t.diseases,(function(a,r){return Ae(t.diseases[r].type,e.data)?(n++,1):0}));return 0===n&&(a=[1]),[$.map(a,(function(t,a){return{cancer:t,ncancers:n,id:e.data.name,sex:e.data.sex,proband:e.data.proband,hidden:e.data.hidden,affected:e.data.affected,exclude:e.data.exclude}}))]})).enter().append("g").selectAll("path").data(d3.pie().value((function(e){return e.cancer}))).enter().append("path").attr("clip-path",(function(e){return"url(#"+e.data.id+")"})).attr("class","pienode").attr("d",d3.arc().innerRadius(0).outerRadius(t.symbol_size)).style("fill",(function(e,n){return e.data.exclude?"lightgrey":0===e.data.ncancers?e.data.affected?"darkgrey":t.node_background:t.diseases[n].colour})),h.filter((function(e){return!e.data.hidden&&(e.data.adopted_in||e.data.adopted_out)})).append("path").attr("d",(function(e){let n=-.66*t.symbol_size,a=-.64*t.symbol_size,r=t.symbol_size/4;return qt(n,a,r,t)+qt(-n,a,-r,t)})).style("stroke",(function(e){return e.data.age&&e.data.yob&&!e.data.exclude?"#303030":"grey"})).style("stroke-width",(function(e){return".1em"})).style("stroke-dasharray",(function(e){return e.data.exclude?"3, 3":null})).style("fill","none"),h.filter((function(e){return"1"===e.data.status||1===e.data.status})).append("line").style("stroke","black").attr("x1",(function(e,n){return-.6*t.symbol_size})).attr("y1",(function(e,n){return.6*t.symbol_size})).attr("x2",(function(e,n){return.6*t.symbol_size})).attr("y2",(function(e,n){return-.6*t.symbol_size})),function(e,t){Vt(e,t,-.4*e.symbol_size,-.1*e.symbol_size,(function(t){return e.DEBUG?("display_name"in t.data?t.data.display_name:t.data.name)+"  "+t.data.id:"display_name"in t.data?t.data.display_name:""}),void 0,["display_name"]);let n=parseInt(function(e){let t=e.font_size;return t===parseInt(t,10)?t:t.indexOf("px")>-1?t.replace("px",""):-1===t.indexOf("em")?t:(t=parseFloat(t.replace("em","")),parseFloat(getComputedStyle($("#"+e.targetDiv).get(0)).fontSize)*t-1)}(e))+4;for(let a=0;a<e.labels.length;a++){let r=e.labels[a],o=Array.isArray(r)?r:[r];(o.indexOf("age")>-1||o.indexOf("yob")>-1)&&Vt(e,t,-e.symbol_size,(function(e){return zt(e,o,n)}),(function(e){return Rt(e,o)}),"indi_details",o)}for(let a=0;a<e.diseases.length;a++){let r=e.diseases[a].type;Vt(e,t,-e.symbol_size,(function(e){return zt(e,[r],n)}),(function(e){let t=r.replace("_"," ").replace("cancer","ca.");return r+"_diagnosis_age"in e.data?t+": "+e.data[r+"_diagnosis_age"]:""}),"indi_details",[r])}for(let a=0;a<e.labels.length;a++){let r=e.labels[a],o=Array.isArray(r)?r:[r];-1===o.indexOf("age")&&-1===o.indexOf("yob")&&Vt(e,t,-e.symbol_size,(function(e){return zt(e,o,n)}),(function(e){return Rt(e,o)}),"indi_details",o)}}(t,h),t.showWidgets&&It(t,h);let p={},f=function(e,t,n,a,r,o){let i=function(e,t){return e+1<t?i(++e):e},s="";for(let l=0;l<e.length;l++){let c=i(l,e.length),d=e[l]-t-o,u=e[c]+t+o;r.x>d&&r.x<u&&(r.y=a),s+="L"+d+","+(n-o)+"L"+d+","+(a-o)+"L"+u+","+(a-o)+"L"+u+","+(n-o),l=c}return s};i=r.selectAll(".partner").data(u).enter().insert("path","g").attr("fill","none").attr("stroke","#000").attr("shape-rendering","auto").attr("d",(function(e,n){let a,r,o,i=function(e,t,n){if(e.depth!==t.depth)return!0;let a=qe(n.dataset,e),r=qe(n.dataset,t),o=$.map(a,(function(e,t){return e.name})),i=$.map(r,(function(e,t){return e.name})),s=!1;return $.each(o,(function(e,t){if(-1!==$.inArray(t,i))return s=!0,!1})),s}(Ge(d,e.mother.data.name),Ge(d,e.father.data.name),t),s=e.mother.data.divorced&&e.mother.data.divorced===e.father.data.name,l=e.mother.x<e.father.x?e.mother.x:e.father.x,c=e.mother.x<e.father.x?e.father.x:e.mother.x,u=e.mother.y,h=jt(t,e),m="";if(h){e.mother.depth in p?p[e.mother.depth]+=4:p[e.mother.depth]=4,u-=p[e.mother.depth],r=p[e.mother.depth]+t.symbol_size/2+2;let n=e.mother.data.parent_node,i=n[0];for(let t=0;t<n.length;t++)n[t].father.name===e.father.data.name&&n[t].mother.name===e.mother.data.name&&(i=n[t].name);o=Ge(d,i),o.y=u,h.sort((function(e,t){return e-t})),a=u-t.symbol_size/2-3,m=f(h,r,u,a,o,0)}let g="";if(s&&!h&&(g="M"+(l+.66*(c-l)+6)+","+(u-6)+"L"+(l+.66*(c-l)-6)+","+(u+6)+"M"+(l+.66*(c-l)+10)+","+(u-6)+"L"+(l+.66*(c-l)-2)+","+(u+6)),i){u=e.mother.x<e.father.x?e.mother.y:e.father.y,a=e.mother.x<e.father.x?e.father.y:e.mother.y;let t=3;return Math.abs(u-a)>.1?"M"+l+","+u+"L"+c+","+a+"M"+l+","+(u-t)+"L"+c+","+(a-t):"M"+l+","+u+m+"L"+c+","+u+"M"+l+","+(u-t)+(h?f(h,r,u,a,o,t):"")+"L"+c+","+(u-t)+g}return"M"+l+","+u+m+"L"+c+","+u+g})),r.selectAll(".link").data(s.links(c.descendants())).enter().filter((function(e){return t.DEBUG||void 0===e.target.data.noparents&&null!==e.source.parent&&!e.target.data.hidden})).insert("path","g").attr("fill","none").attr("stroke-width",(function(e,n){return void 0!==e.target.data.noparents||null===e.source.parent||e.target.data.hidden?1:t.DEBUG?2:1})).attr("stroke",(function(e,t){return void 0!==e.target.data.noparents||null===e.source.parent||e.target.data.hidden?"pink":"#000"})).attr("stroke-dasharray",(function(e,n){if(!e.target.data.adopted_in)return null;let a=Math.abs(e.source.y-(e.source.y+e.target.y)/2),r=[a,0,Math.abs(e.source.x-e.target.x),0];ze(t.dataset,e.target.data).length>=1&&(a*=3);for(let t=0;t<a;t+=10)$.merge(r,[5,5]);return r})).attr("shape-rendering",(function(e,t){return e.target.data.mztwin||e.target.data.dztwin?"geometricPrecision":"auto"})).attr("d",(function(e,n){if(e.target.data.mztwin||e.target.data.dztwin){let n=ze(t.dataset,e.target.data);if(n.length>=1){let a=0,r=e.target.x;for(let e=0;e<n.length;e++){let t=Ge(d,n[e].name).x;r>t&&(r=t),a+=t}let o=(e.target.x+a)/(n.length+1),i=(e.source.y+e.target.y)/2,s="";if(r===e.target.x&&e.target.data.mztwin){let n=(o+e.target.x)/2,a=(i+(e.target.y-t.symbol_size/2))/2;s="M"+n+","+a+"L"+(o+(o-n))+" "+a}return"M"+e.source.x+","+e.source.y+"V"+i+"H"+o+"L"+e.target.x+" "+(e.target.y-t.symbol_size/2)+s}}if(e.source.data.mother){let t=Ge(d,e.source.data.mother.name),n=Ge(d,e.source.data.father.name);if(t.depth!==n.depth)return"M"+e.source.x+","+(t.y+n.y)/2+"H"+e.target.x+"V"+e.target.y}return"M"+e.source.x+","+e.source.y+"V"+(e.source.y+e.target.y)/2+"H"+e.target.x+"V"+e.target.y}));let m=Te(t.dataset);if(void 0!==m){let e=Ge(d,t.dataset[m].name),n="triangle"+ke(3);r.append("svg:defs").append("svg:marker").attr("id",n).attr("refX",6).attr("refY",6).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("path").attr("d","M 0 0 12 6 0 12 3 6").style("fill","black"),r.append("line").attr("x1",e.x-t.symbol_size/.7).attr("y1",e.y+t.symbol_size/1.4).attr("x2",e.x-t.symbol_size/1.4).attr("y2",e.y+t.symbol_size/4).attr("stroke-width",1).attr("stroke","black").attr("marker-end","url(#"+n+")")}return We(t,a),t.dragNode&&function(e,t){let n,a;t.filter((function(e){return!e.data.hidden})).call(d3.drag().filter((function(e){return!e.ctrlKey&&!e.button&&e.shiftKey})).on("start",(function(){n=d3.select(this).select(".indi_rect").attr("x")})).on("drag",(function(e){e.sourceEvent.stopPropagation();let t=e.dx,n=d3.select(this).select(".indi_rect");a=parseFloat(n.attr("x"))+t,n.attr("x",a)})).on("end",(function(t){let r=d3.select(this).datum().data,o=1===Ne(e.dataset,r).length?Ne(e.dataset,r)[0]:-1;d3.select(this).select(".indi_rect").attr("x",n);const i=a>n;let s,l,c,d=ve[e.targetDiv],u=Ge(je(d),r.name),h=Ue(je(d),u.depth);a+=u.x;let p,f=-Number.MAX_VALUE,m=Number.MAX_VALUE;for(let e=0;e<h.length;e++)h[e].x<a&&h[e].x>f?(s=h[e],f=h[e].x):h[e].x>a&&h[e].x<m&&(l=h[e],m=h[e].x);if(void 0===s&&void 0===l)return;i?(p=He(e.dataset,s.data.name),c=s):(p=He(e.dataset,l.data.name),c=l);let g=Se(he(e)),y=He(e.dataset,r.name);Bt(g,y,p),-1!==o&&o!==c.data.name&&(y=He(g,o),Bt(g,y,p)),e.dataset=g,$(document).trigger("rebuild",[e])})))}(t,h),t}function Ut(e){return"M"===e||"F"===e}function qt(e,t,n,a){return"M"+(e+n)+","+t+"L"+e+" "+t+"L"+e+" "+(t+1.28*a.symbol_size)+"L"+e+" "+(t+1.28*a.symbol_size)+"L"+(e+n)+","+(t+1.28*a.symbol_size)}function jt(e,t){let n,a,r=je(ve[e.targetDiv]);if("name"in t){if(!("mother"in(t=Ge(r,t.name)).data))return null;n=Ge(r,t.data.mother),a=Ge(r,t.data.father)}else n=t.mother,a=t.father;let o=n.x<a.x?n.x:a.x,i=n.x<a.x?a.x:n.x,s=n.y,l=$.map(r,(function(e,t){return!e.data.hidden&&e.data.name!==n.data.name&&e.data.name!==a.data.name&&e.y===s&&e.x>o&&e.x<i?e.x:null}));return l.length>0?l:null}function $t(e){$("#"+e.targetDiv).empty(),de(e);try{Ht(e)}catch(t){throw t}try{templates.update(e)}catch(t){}}$(document).on("fhChange",(function(e,t){try{let e=$("#id_name").val();void 0===Ge(he(t),e)?$("form > fieldset").prop("disabled",!0):$("form > fieldset").prop("disabled",!1)}catch(n){}})),$(document).on("rebuild",(function(e,t){$t(t)})),$(document).on("build",(function(e,t){Ht(t)}));var Gt=Object.freeze({__proto__:null,build:Ht,check_ptr_link_clashes:jt,rebuild:$t});const Jt={DEBUG:0,INFO:1,WARN:2,ERROR:3},Kt="requiform_logLevel",Wt=t({logEntries:[],currentLogLevel:(()=>{const e=localStorage.getItem(Kt);return null!==e&&void 0!==Jt[e.toUpperCase()]?Jt[e.toUpperCase()]:Jt.INFO})()}),Zt=(e,...t)=>{if(e<Wt.currentLogLevel||0===t.length)return;const n=(new Date).toISOString(),a=Object.keys(Jt).find((t=>Jt[t]===e));let r="",o=null;if("string"==typeof t[0])r=t[0];else{try{r=`Object logged: ${JSON.stringify(t[0]).substring(0,100)}...`}catch(i){r=`Object logged: [Serialization Error: ${i.message}]`}1===t.length&&(o=t[0])}t.length>1&&(o=2===t.length?t[1]:t.slice(1)),Wt.logEntries.push({timestamp:n,level:a,displayMessage:r,rawData:o}),Wt.logEntries.length>500&&Wt.logEntries.shift()},Qt={debug:(...e)=>Zt(Jt.DEBUG,...e),info:(...e)=>Zt(Jt.INFO,...e),warn:(...e)=>Zt(Jt.WARN,...e),error:(...e)=>Zt(Jt.ERROR,...e),setLevel:e=>{if(Object.values(Jt).includes(e)){Wt.currentLogLevel=e;const t=Object.keys(Jt).find((t=>Jt[t]===e));t&&(localStorage.setItem(Kt,t),Qt.info(`Log level set to ${t}`))}else Qt.warn(`Invalid log level attempted: ${e}`)},get entries(){return n(Wt.logEntries)},get currentLogLevel(){return Wt.currentLogLevel},get level(){return Wt.currentLogLevel},clear:()=>{Wt.logEntries.length=0,Qt.info("Logs cleared.")}};function Yt(e){const t=["__proto__","constructor","prototype"];if(null===e||"object"!=typeof e)return e;if(Array.isArray(e))e.forEach((e=>Yt(e)));else{for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t.includes(n)?(Qt.warn(`[Sanitizer] Detected and removed potentially harmful key: "${n}"`),delete e[n]):e[n]=Yt(e[n]));Object.getPrototypeOf(e),Object.prototype}return e}const Xt=t(JSON.parse(JSON.stringify({styles:{topBarColor:"#a09588",footerBackgroundColor:"#E5AA94",phenotypeSelectorBackgroundColor:"#FFFFFF"},appTitle:"RequiForm",themeColors:{primary:"#a09588",secondary:"#424242"},darkThemeColors:{primary:"#BDBDBD",secondary:"#757575"},logoUrl:null}))),en=n(Xt),tn=(e,t)=>{const n=e.__vccOpts||e;for(const[a,r]of t)n[a]=r;return n},nn={class:"content-wrapper"},an={class:"ml-1"},rn={id:"top-bar-actions",class:"d-none d-sm-inline-flex"},on={class:"d-inline-flex d-sm-none"},sn=tn({__name:"TopBar",props:{isDark:{type:Boolean,required:!0}},setup(e){const{t,locale:n}=a(),m=r((()=>"en"===n.value?"mdi-alpha-e-box-outline":"mdi-alpha-d-box-outline"));return(n,a)=>(i(),o(j,{app:"",color:h(en).styles.topBarColor,dark:"",class:"main-app-bar"},{default:s((()=>[l("div",nn,[c(z,{class:"flex-shrink-0"},{default:s((()=>[c(O,{location:"bottom"},{activator:s((({props:e})=>[l("h1",p({class:"text-h5 font-weight-bold d-flex align-center"},e),[h(en).logoUrl?(i(),o(T,{key:0,src:h(en).logoUrl,alt:"App Logo",class:"header-logo mr-2","max-height":"32",contain:""},null,8,["src"])):f("",!0),a[23]||(a[23]=d()),h(en).logoUrl?f("",!0):(i(),o(R,{key:1,start:"",class:"logo-icon"},{default:s((()=>a[22]||(a[22]=[d("mdi-file-document-outline")]))),_:1})),a[24]||(a[24]=d()),l("span",an,u(h(en).appTitle),1)],16)])),default:s((()=>[a[25]||(a[25]=d()),l("span",null,u(h(en).appTitle)+": "+u(h(t)("topbar.appSubtitle")),1)])),_:1})])),_:1}),a[88]||(a[88]=d()),c(M),a[89]||(a[89]=d()),l("span",rn,[c(V,{icon:"",onClick:a[0]||(a[0]=e=>n.$emit("toggle-theme")),"aria-label":e.isDark?h(t)("topbar.aria.themeToggleLight"):h(t)("topbar.aria.themeToggleDark")},{default:s((()=>[c(R,null,{default:s((()=>[d(u(e.isDark?"mdi-weather-night":"mdi-white-balance-sunny"),1)])),_:1}),a[26]||(a[26]=d()),c(O,{activator:"parent",location:"bottom"},{default:s((()=>[d(u(e.isDark?h(t)("topbar.tooltips.themeToggleLight"):h(t)("topbar.tooltips.themeToggleDark")),1)])),_:1})])),_:1},8,["aria-label"]),a[46]||(a[46]=d()),c(V,{icon:"",onClick:a[1]||(a[1]=e=>n.$emit("toggle-language")),"aria-label":h(t)("topbar.aria.toggleLanguage")},{default:s((()=>[c(R,null,{default:s((()=>[d(u(m.value),1)])),_:1}),a[27]||(a[27]=d()),c(O,{activator:"parent",location:"bottom"},{default:s((()=>[d(u(h(t)("topbar.tooltips.toggleLanguage")),1)])),_:1})])),_:1},8,["aria-label"]),a[47]||(a[47]=d()),c(V,{icon:"",onClick:a[2]||(a[2]=e=>n.$emit("reset-form")),"aria-label":h(t)("topbar.aria.reset")},{default:s((()=>[c(R,null,{default:s((()=>a[28]||(a[28]=[d("mdi-restart")]))),_:1}),a[29]||(a[29]=d()),c(O,{activator:"parent",location:"bottom"},{default:s((()=>[d(u(h(t)("topbar.tooltips.reset")),1)])),_:1})])),_:1},8,["aria-label"]),a[48]||(a[48]=d()),c(V,{icon:"",onClick:a[3]||(a[3]=e=>n.$emit("open-faq")),"aria-label":h(t)("topbar.aria.faq")},{default:s((()=>[c(R,null,{default:s((()=>a[30]||(a[30]=[d("mdi-help-circle")]))),_:1}),a[31]||(a[31]=d()),c(O,{activator:"parent",location:"bottom"},{default:s((()=>[d(u(h(t)("topbar.tooltips.faq")),1)])),_:1})])),_:1},8,["aria-label"]),a[49]||(a[49]=d()),c(V,{icon:"",onClick:a[4]||(a[4]=e=>n.$emit("start-tour")),"aria-label":h(t)("topbar.aria.tour")},{default:s((()=>[c(R,null,{default:s((()=>a[32]||(a[32]=[d("mdi-compass-outline")]))),_:1}),a[33]||(a[33]=d()),c(O,{activator:"parent",location:"bottom"},{default:s((()=>[d(u(h(t)("topbar.tooltips.tour")),1)])),_:1})])),_:1},8,["aria-label"]),a[50]||(a[50]=d()),c(V,{icon:"",onClick:a[5]||(a[5]=e=>n.$emit("copy-url")),"aria-label":h(t)("topbar.aria.copyUrl")},{default:s((()=>[c(R,null,{default:s((()=>a[34]||(a[34]=[d("mdi-link-variant")]))),_:1}),a[35]||(a[35]=d()),c(O,{activator:"parent",location:"bottom"},{default:s((()=>[d(u(h(t)("topbar.tooltips.copyUrl")),1)])),_:1})])),_:1},8,["aria-label"]),a[51]||(a[51]=d()),c(V,{icon:"",onClick:a[6]||(a[6]=e=>n.$emit("copy-encrypted-url")),"aria-label":h(t)("topbar.aria.copyEncryptedUrl")},{default:s((()=>[c(R,null,{default:s((()=>a[36]||(a[36]=[d("mdi-lock")]))),_:1}),a[37]||(a[37]=d()),c(O,{activator:"parent",location:"bottom"},{default:s((()=>[d(u(h(t)("topbar.tooltips.copyEncryptedUrl")),1)])),_:1})])),_:1},8,["aria-label"]),a[52]||(a[52]=d()),c(V,{icon:"",onClick:a[7]||(a[7]=e=>n.$emit("open-paste-data")),"aria-label":h(t)("topbar.aria.pasteData"),id:"paste-data-btn"},{default:s((()=>[c(R,null,{default:s((()=>a[38]||(a[38]=[d("mdi-clipboard-text")]))),_:1}),a[39]||(a[39]=d()),c(O,{activator:"parent",location:"bottom"},{default:s((()=>[d(u(h(t)("topbar.tooltips.pasteData")),1)])),_:1})])),_:1},8,["aria-label"]),a[53]||(a[53]=d()),c(V,{icon:"",onClick:a[8]||(a[8]=e=>n.$emit("save-data")),"aria-label":h(t)("topbar.aria.saveData"),id:"save-data-btn"},{default:s((()=>[c(R,null,{default:s((()=>a[40]||(a[40]=[d("mdi-content-save")]))),_:1}),a[41]||(a[41]=d()),c(O,{activator:"parent",location:"bottom"},{default:s((()=>[d(u(h(t)("topbar.tooltips.saveData")),1)])),_:1})])),_:1},8,["aria-label"]),a[54]||(a[54]=d()),c(V,{icon:"",onClick:a[9]||(a[9]=e=>n.$emit("load-data")),"aria-label":h(t)("topbar.aria.loadData"),id:"load-data-btn"},{default:s((()=>[c(R,null,{default:s((()=>a[42]||(a[42]=[d("mdi-folder-open")]))),_:1}),a[43]||(a[43]=d()),c(O,{activator:"parent",location:"bottom"},{default:s((()=>[d(u(h(t)("topbar.tooltips.loadData")),1)])),_:1})])),_:1},8,["aria-label"]),a[55]||(a[55]=d()),c(V,{icon:"",onClick:a[10]||(a[10]=e=>n.$emit("generate-pdf")),"aria-label":h(t)("topbar.aria.generatePdf"),id:"generate-pdf-btn"},{default:s((()=>[c(R,null,{default:s((()=>a[44]||(a[44]=[d("mdi-file-pdf-box")]))),_:1}),a[45]||(a[45]=d()),c(O,{activator:"parent",location:"bottom"},{default:s((()=>[d(u(h(t)("topbar.tooltips.generatePdf")),1)])),_:1})])),_:1},8,["aria-label"])]),a[90]||(a[90]=d()),l("div",on,[c(q,{"offset-y":""},{activator:s((({props:e})=>[c(V,p({icon:""},e,{"aria-label":h(t)("topbar.aria.moreActions")}),{default:s((()=>[c(R,null,{default:s((()=>a[56]||(a[56]=[d("mdi-dots-vertical")]))),_:1})])),_:2},1040,["aria-label"])])),default:s((()=>[a[87]||(a[87]=d()),c(B,{density:"compact"},{default:s((()=>[c(H,{onClick:a[11]||(a[11]=e=>n.$emit("toggle-theme"))},{prepend:s((()=>[c(R,null,{default:s((()=>[d(u(e.isDark?"mdi-weather-night":"mdi-white-balance-sunny"),1)])),_:1})])),default:s((()=>[a[57]||(a[57]=d()),c(U,null,{default:s((()=>[d(u(e.isDark?h(t)("topbar.tooltips.themeToggleLight"):h(t)("topbar.tooltips.themeToggleDark")),1)])),_:1})])),_:1}),a[77]||(a[77]=d()),c(H,{onClick:a[12]||(a[12]=e=>n.$emit("toggle-language"))},{prepend:s((()=>[c(R,null,{default:s((()=>[d(u(m.value),1)])),_:1})])),default:s((()=>[a[58]||(a[58]=d()),c(U,null,{default:s((()=>[d(u(h(t)("topbar.menu.toggleLanguage")),1)])),_:1})])),_:1}),a[78]||(a[78]=d()),c(H,{onClick:a[13]||(a[13]=e=>n.$emit("reset-form"))},{prepend:s((()=>[c(R,null,{default:s((()=>a[59]||(a[59]=[d("mdi-restart")]))),_:1})])),default:s((()=>[a[60]||(a[60]=d()),c(U,null,{default:s((()=>[d(u(h(t)("topbar.menu.reset")),1)])),_:1})])),_:1}),a[79]||(a[79]=d()),c(H,{onClick:a[14]||(a[14]=e=>n.$emit("open-faq"))},{prepend:s((()=>[c(R,null,{default:s((()=>a[61]||(a[61]=[d("mdi-help-circle")]))),_:1})])),default:s((()=>[a[62]||(a[62]=d()),c(U,null,{default:s((()=>[d(u(h(t)("topbar.menu.faq")),1)])),_:1})])),_:1}),a[80]||(a[80]=d()),c(H,{onClick:a[15]||(a[15]=e=>n.$emit("start-tour"))},{prepend:s((()=>[c(R,null,{default:s((()=>a[63]||(a[63]=[d("mdi-compass-outline")]))),_:1})])),default:s((()=>[a[64]||(a[64]=d()),c(U,null,{default:s((()=>[d(u(h(t)("topbar.menu.tour")),1)])),_:1})])),_:1}),a[81]||(a[81]=d()),c(H,{onClick:a[16]||(a[16]=e=>n.$emit("copy-url"))},{prepend:s((()=>[c(R,null,{default:s((()=>a[65]||(a[65]=[d("mdi-link-variant")]))),_:1})])),default:s((()=>[a[66]||(a[66]=d()),c(U,null,{default:s((()=>[d(u(h(t)("topbar.menu.copyUrl")),1)])),_:1})])),_:1}),a[82]||(a[82]=d()),c(H,{onClick:a[17]||(a[17]=e=>n.$emit("copy-encrypted-url"))},{prepend:s((()=>[c(R,null,{default:s((()=>a[67]||(a[67]=[d("mdi-lock")]))),_:1})])),default:s((()=>[a[68]||(a[68]=d()),c(U,null,{default:s((()=>[d(u(h(t)("topbar.menu.copyEncryptedUrl")),1)])),_:1})])),_:1}),a[83]||(a[83]=d()),c(H,{onClick:a[18]||(a[18]=e=>n.$emit("open-paste-data"))},{prepend:s((()=>[c(R,null,{default:s((()=>a[69]||(a[69]=[d("mdi-clipboard-text")]))),_:1})])),default:s((()=>[a[70]||(a[70]=d()),c(U,null,{default:s((()=>[d(u(h(t)("topbar.menu.pasteData")),1)])),_:1})])),_:1}),a[84]||(a[84]=d()),c(H,{onClick:a[19]||(a[19]=e=>n.$emit("save-data"))},{prepend:s((()=>[c(R,null,{default:s((()=>a[71]||(a[71]=[d("mdi-content-save")]))),_:1})])),default:s((()=>[a[72]||(a[72]=d()),c(U,null,{default:s((()=>[d(u(h(t)("topbar.menu.saveData")),1)])),_:1})])),_:1}),a[85]||(a[85]=d()),c(H,{onClick:a[20]||(a[20]=e=>n.$emit("load-data"))},{prepend:s((()=>[c(R,null,{default:s((()=>a[73]||(a[73]=[d("mdi-folder-open")]))),_:1})])),default:s((()=>[a[74]||(a[74]=d()),c(U,null,{default:s((()=>[d(u(h(t)("topbar.menu.loadData")),1)])),_:1})])),_:1}),a[86]||(a[86]=d()),c(H,{onClick:a[21]||(a[21]=e=>n.$emit("generate-pdf"))},{prepend:s((()=>[c(R,null,{default:s((()=>a[75]||(a[75]=[d("mdi-file-pdf-box")]))),_:1})])),default:s((()=>[a[76]||(a[76]=d()),c(U,null,{default:s((()=>[d(u(h(t)("topbar.menu.generatePdf")),1)])),_:1})])),_:1})])),_:1})])),_:1})])])])),_:1},8,["color"]))}},[["__scopeId","data-v-088f0004"]]);let ln;const cn=e=>ln=e,dn=Symbol();function un(e){return e&&"object"==typeof e&&"[object Object]"===Object.prototype.toString.call(e)&&"function"!=typeof e.toJSON}var hn,pn;(pn=hn||(hn={})).direct="direct",pn.patchObject="patch object",pn.patchFunction="patch function";const fn=()=>{};function mn(e,t,n,a=fn){e.push(t);const r=()=>{const n=e.indexOf(t);n>-1&&(e.splice(n,1),a())};return!n&&x()&&D(r),r}function gn(e,...t){e.slice().forEach((e=>{e(...t)}))}const yn=e=>e(),bn=Symbol(),wn=Symbol();function vn(e,t){e instanceof Map&&t instanceof Map?t.forEach(((t,n)=>e.set(n,t))):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const a=t[n],r=e[n];un(r)&&un(a)&&e.hasOwnProperty(n)&&!b(a)&&!w(a)?e[n]=vn(r,a):e[n]=a}return e}const xn=Symbol(),{assign:Dn}=Object;function Sn(e,n,a={},r,o,i){let s;const l=Dn({actions:{}},a),c={deep:!0};let d,u,h,p=[],f=[];const y=r.state.value[e];let x;function D(t){let n;d=u=!1,"function"==typeof t?(t(r.state.value[e]),n={type:hn.patchFunction,storeId:e,events:h}):(vn(r.state.value[e],t),n={type:hn.patchObject,payload:t,storeId:e,events:h});const a=x=Symbol();A().then((()=>{x===a&&(d=!0)})),u=!0,gn(p,n,r.state.value[e])}i||y||(r.state.value[e]={}),g({});const P=i?function(){const{state:e}=a,t=e?e():{};this.$patch((e=>{Dn(e,t)}))}:fn,k=(t,n="")=>{if(bn in t)return t[wn]=n,t;const a=function(){cn(r);const n=Array.from(arguments),o=[],i=[];let s;gn(f,{args:n,name:a[wn],store:E,after:function(e){o.push(e)},onError:function(e){i.push(e)}});try{s=t.apply(this&&this.$id===e?this:E,n)}catch(l){throw gn(i,l),l}return s instanceof Promise?s.then((e=>(gn(o,e),e))).catch((e=>(gn(i,e),Promise.reject(e)))):(gn(o,s),s)};return a[bn]=!0,a[wn]=n,a},_={_p:r,$id:e,$onAction:mn.bind(null,f),$patch:D,$reset:P,$subscribe(t,n={}){const a=mn(p,t,n.detached,(()=>o())),o=s.run((()=>S((()=>r.state.value[e]),(a=>{("sync"===n.flush?u:d)&&t({storeId:e,type:hn.direct,events:h},a)}),Dn({},c,n))));return a},$dispose:function(){s.stop(),p=[],f=[],r._s.delete(e)}},E=t(_);r._s.set(e,E);const C=(r._a&&r._a.runWithContext||yn)((()=>r._e.run((()=>(s=m()).run((()=>n({action:k})))))));for(const t in C){const n=C[t];if(b(n)&&(!b(F=n)||!F.effect)||w(n))i||(!y||un(I=n)&&I.hasOwnProperty(xn)||(b(n)?n.value=y[t]:vn(n,y[t])),r.state.value[e][t]=n);else if("function"==typeof n){const e=k(n,t);C[t]=e,l.actions[t]=n}}var I,F;return Dn(E,C),Dn(v(E),C),Object.defineProperty(E,"$state",{get:()=>r.state.value[e],set:e=>{D((t=>{Dn(t,e)}))}}),r._p.forEach((e=>{Dn(E,s.run((()=>e({store:E,app:r._a,pinia:r,options:l}))))})),y&&i&&a.hydrate&&a.hydrate(E.$state,y),d=!0,u=!0,E}function An(e,t,n){let a;const o="function"==typeof t;function i(n,i){const s=_();return(n=n||(s?k(dn,null):null))&&cn(n),(n=ln)._s.has(e)||(o?Sn(e,t,a,n):function(e,t,n){const{state:a,actions:o,getters:i}=t,s=n.state.value[e];let l;l=Sn(e,(function(){s||(n.state.value[e]=a?a():{});const t=P(n.state.value[e]);return Dn(t,o,Object.keys(i||{}).reduce(((t,a)=>(t[a]=y(r((()=>{cn(n);const t=n._s.get(e);return i[a].call(t,t)}))),t)),{}))}),t,n,0,!0)}(e,a,n)),n._s.get(e)}return a=o?n:t,i.$id=e,i}const Pn=An("ui",(()=>{const e=g(!1),t=g(!1),n=g(""),a=g(!1),r=g(!1),o=g(!1),i=g(!1),s=g(!1),l=g(!1),c=g(!1),d=g(!1),u="requiform_logViewerVisible",h=g("true"===localStorage.getItem(u)),p=g(""),f=g(""),m=g("");return{isDark:e,snackbar:t,snackbarMessage:n,encryptionDialog:a,decryptionDialog:r,showFAQModal:o,resetConfirmationDialog:i,saveDataDialog:s,loadDataDialog:l,pasteDataDialog:c,showDisclaimerModal:d,showLogViewer:h,decryptionError:p,loadDataError:f,pendingEncryptedValue:m,toggleTheme:function(){e.value=!e.value},showSnackbar:function(e){n.value=e,t.value=!0},openEncryptionDialog:function(){a.value=!0},closeEncryptionDialog:function(){a.value=!1},openDecryptionDialog:function(e=""){m.value=e,p.value="",r.value=!0},cancelDecryption:function(){r.value=!1,p.value="",m.value=""},setDecryptionError:function(e){p.value=e},toggleFAQModal:function(e=!0){o.value=e},openResetConfirmationDialog:function(){i.value=!0},closeResetConfirmationDialog:function(){i.value=!1},openSaveDataDialog:function(){s.value=!0},closeSaveDataDialog:function(){s.value=!1},openLoadDataDialog:function(){f.value="",l.value=!0},closeLoadDataDialog:function(){l.value=!1,f.value=""},setLoadDataError:function(e){f.value=e},openPasteDataDialog:function(){c.value=!0},closePasteDataDialog:function(){c.value=!1},openDisclaimerModal:function(){d.value=!0},closeDisclaimerModal:function(){d.value=!1},toggleLogViewer:function(){h.value=!h.value,localStorage.setItem(u,h.value.toString())},openLogViewer:function(){h.value=!0,localStorage.setItem(u,"true")},closeLogViewer:function(){h.value=!1,localStorage.setItem(u,"false")}}}));function kn(e){return"string"==typeof e&&e.trim().length>0}function _n(e){const t={};let n=!0;var a;return kn(e.firstName)||(t.firstName="validation.required.firstName",n=!1),kn(e.lastName)||(t.lastName="validation.required.lastName",n=!1),function(e){if(!e)return!1;if(!/^\d{4}-\d{2}-\d{2}$/.test(e))return!1;const t=new Date(e);if(isNaN(t.getTime()))return!1;const n=new Date;return n.setHours(0,0,0,0),t<=n}(e.birthdate)||(e.birthdate?t.birthdate="validation.invalid.birthdate":t.birthdate="validation.required.birthdate",n=!1),kn(e.sex)||(t.sex="validation.required.sex",n=!1),kn(e.insurance)||(t.insurance="validation.required.insurance",n=!1),kn(e.referrer)||(t.referrer="validation.required.referrer",n=!1),kn(e.diagnosis)||(t.diagnosis="validation.required.diagnosis",n=!1),e.email&&(a=e.email)&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)&&(t.email="validation.invalid.email",n=!1),{valid:n,errors:t}}function En(e){const t={};let n=!0;return Array.isArray(e)?(e.forEach(((e,a)=>{const r=`phenotypeData[${a}]`;let o=!0;e&&kn(e.id)?/^HP:\d{7}$/.test(e.id)||(t[`${r}.id`]="validation.invalid.hpoIdFormat",o=!1):(t[`${r}.id`]="validation.required.phenotypeId",o=!1),e&&kn(e.status)||(t[`${r}.status`]="validation.required.phenotypeStatus",o=!1),o||(n=!1)})),{valid:n,errors:t}):{valid:!0,errors:{}}}function Cn(e){if(!e)return{valid:!1,errors:{general:"validation.general.missingData"},sections:{personalInfo:!1,selectedPanels:!1,category:!1,consent:!1}};const t=_n(e.personalInfo||{}),n=!0,a={},r=!0,o={},i=En(e.phenotypeData||[]),s=!0,l={},c={};return Object.entries(t.errors).forEach((([e,t])=>{c[e]=t,c["personalInfo."+e]=t})),Object.entries(a).forEach((([e,t])=>{c[e]=t,c["selectedPanels."+e]=t})),Object.entries(o).forEach((([e,t])=>{c[e]=t,c["category."+e]=t})),Object.entries(i.errors).forEach((([e,t])=>{e.startsWith("phenotypeData[")?c[e]=t:(c[e]=t,c["phenotypeData."+e]=t)})),Object.entries(l).forEach((([e,t])=>{c[e]=t,c["consent."+e]=t})),{valid:t.valid&&n&&i.valid&&s,errors:c,sections:{personalInfo:t.valid,selectedPanels:n,category:r,phenotypeData:i.valid,consent:s}}}const In=An("form",(()=>{const{patientData:e,updatePersonalInfo:n,updateSelectedPanels:a,updatePhenotypeData:o,updateCategory:i,updateConsent:s,resetPatientData:l,exportPatientData:c,isValid:d,validationErrors:u,sectionValidation:h,validateForm:p}=function(){const e=t({personalInfo:{firstName:"",lastName:"",birthdate:"",sex:"",insurance:"",insuranceId:"",referrer:"",diagnosis:""},selectedPanels:[],phenotypeData:[],category:"",consent:{dataProcessing:!1,incidentalFindings:!1}}),n=g(!1),a=t({touched:!1,results:Cn(e),showErrors:!1}),o=r((()=>a.results.valid)),i=r((()=>a.results.errors)),s=r((()=>a.results.sections));function l(t=!1){return a.touched=!0,a.showErrors=t,a.results=Cn(e),a.results.valid}function c(t){if(Object.assign(e.personalInfo,t),a.touched){const t=_n(e.personalInfo);return l(a.showErrors),t}return{valid:!0,errors:{}}}function d(t){if(e.selectedPanels=[...t],a.touched){const e={valid:!0,errors:{}};return l(a.showErrors),e}return{valid:!0,errors:{}}}function u(t){if(e.phenotypeData=[...t],a.touched){const t=En(e.phenotypeData);return l(a.showErrors),t}return{valid:!0,errors:{}}}function h(t){if(e.category=t,a.touched){const e={valid:!0,errors:{}};return l(a.showErrors),e}return{valid:!0,errors:{}}}function p(t){if(Object.assign(e.consent,t),a.touched){const e={valid:!0,errors:{}};return l(a.showErrors),e}return{valid:!0,errors:{}}}function f(){const t={personalInfo:{firstName:"",lastName:"",birthdate:"",sex:"",insurance:"",insuranceId:"",referrer:"",diagnosis:""},selectedPanels:[],phenotypeData:[],category:"",consent:{dataProcessing:!1,incidentalFindings:!1}};Object.keys(t).forEach((n=>{e[n]=t[n]})),n.value=!1,a.touched=!1,a.showErrors=!1,a.results=Cn(e)}return{patientData:e,initializedFromUrl:n,updatePersonalInfo:c,updateSelectedPanels:d,updatePhenotypeData:u,updateCategory:h,updateConsent:p,resetPatientData:f,initializeFromExternalData:function(t,a=!1){if(a)f(),t.personalInfo&&c(t.personalInfo),t.selectedPanels&&d(t.selectedPanels),t.phenotypeData&&u(t.phenotypeData),t.category&&h(t.category),t.consent&&p(t.consent);else{const n=function(e,t){const n=JSON.parse(JSON.stringify(e));return t.personalInfo&&Object.entries(t.personalInfo).forEach((([e,t])=>{null!=t&&""!==t&&(n.personalInfo[e]=t)})),t.selectedPanels&&t.selectedPanels.length>0&&(n.selectedPanels=[...t.selectedPanels]),t.phenotypeData&&t.phenotypeData.length>0&&(n.phenotypeData=[...t.phenotypeData]),t.category&&(n.category=t.category),t.consent&&Object.entries(t.consent).forEach((([e,t])=>{void 0!==t&&(n.consent[e]=t)})),n}(e,t);c(n.personalInfo),d(n.selectedPanels),u(n.phenotypeData),h(n.category),p(n.consent)}n.value=!0},exportPatientData:function(){return JSON.parse(JSON.stringify(e))},isValid:o,validationErrors:i,sectionValidation:s,validateForm:l,getFieldErrors:function(e){if(!a.showErrors)return{};const t={},n="personalInfo"===e?"personalInfo.":"";return Object.entries(a.results.errors).forEach((([a,r])=>{if(a.startsWith(n)){const e=a.replace(n,"");t[e]=r}else"root"!==e||a.includes(".")||(t[a]=r)})),t}}}(),f=g({}),m=g(!1),y=g(""),b=g(!1),w=r((()=>`requiform-data-${(new Date).toISOString().split("T")[0]}.json`));function v(){Qt.debug("Syncing legacy → unified data model"),n({firstName:e.personalInfo.givenName||e.personalInfo.firstName||"",lastName:e.personalInfo.familyName||e.personalInfo.lastName||"",birthdate:e.personalInfo.birthdate||"",sex:e.personalInfo.sex||"",insurance:e.personalInfo.insurance||"",referrer:e.personalInfo.physicianName||e.personalInfo.referrer||"",diagnosis:e.personalInfo.diagnosis||""}),o(f.value?Object.values(f.value):[]);const t=e.category||e.personalInfo.category||"";t&&(Qt.debug("Syncing category:",t),i(t))}function x(){if(Qt.debug("Syncing unified → legacy data model"),e.personalInfo.givenName=e.personalInfo.firstName||"",e.personalInfo.familyName=e.personalInfo.lastName||"",e.personalInfo.birthdate=e.personalInfo.birthdate||"",e.personalInfo.sex=e.personalInfo.sex||"",e.personalInfo.insurance=e.personalInfo.insurance||"",e.personalInfo.physicianName=e.personalInfo.referrer||"",e.personalInfo.diagnosis=e.personalInfo.diagnosis||"",e.category?e.personalInfo.category=e.category:e.personalInfo.category&&(e.category=e.personalInfo.category),e.phenotypeData&&e.phenotypeData.length>0){const t={};e.phenotypeData.forEach((e=>{e.id&&(t[e.id]=e)})),f.value=t}e.personalInfo={...e.personalInfo}}function D(e){f.value={...e},v()}function S(e){m.value=e}function A(){l(),f.value={},m.value=!1,y.value="",b.value=!1}function P(e){return e?Object.values(e).filter((e=>e&&e.id)):[]}return{patientData:e,isValid:d,validationErrors:u,sectionValidation:h,phenotypeDataObj:f,showPedigree:m,pedigreeDataUrl:y,showValidation:b,saveDataName:w,validateForm:function(e=!0){return b.value=e,p(e)},updateConsent:s,getFieldErrors:(e=null)=>{if(!b.value||!u.value)return{};if(!e)return u.value;const t={};return Object.entries(u.value).forEach((([n,a])=>{if(n.startsWith(e+".")){const r=n.substring(e.length+1);t[r]=a}else if(!n.includes(".")){const r=`${e}.${n}`;u.value[r]&&(t[n]=a)}})),t},updatePatientData:function(t){Object.assign(e.personalInfo,t),v()},updatePhenotypeDataObj:D,updatePedigreeDataUrl:function(e){y.value=e},setShowPedigree:S,resetValidation:function(){b.value=!1},setShowValidation:function(e=!0){b.value=e},resetForm:A,syncUnifiedPatientData:v,syncLegacyPatientData:x,exportFormData:function(){v();const t=e.category||"";return{patientData:c(),selectedPanels:e.selectedPanels||[],phenotypeData:P(f.value),showPedigree:m.value,category:t}},importFormData:function(e,t=!0){if(Qt.debug("formStore: Starting importFormData",{data:JSON.stringify(e).substring(0,200)+"...",overwrite:t}),!e||"object"!=typeof e)return Qt.error("formStore: Invalid input data for import.",e),!1;try{t&&(Qt.debug("formStore: Resetting form before import (overwrite=true)"),A());const r=e.patientData&&"object"==typeof e.patientData?e.patientData:e;Qt.debug("formStore: Determined sourcePatientData for import.",r);const o={},s=r.personalInfo&&"object"==typeof r.personalInfo?r.personalInfo:{},l=["firstName","lastName","birthdate","sex","insurance","referrer","diagnosis"];!s.firstName&&s.givenName&&(s.firstName=s.givenName),!s.lastName&&s.familyName&&(s.lastName=s.familyName),!s.referrer&&s.physicianName&&(s.referrer=s.physicianName),l.forEach((e=>{s[e]&&"string"==typeof s[e]?o[e]=s[e].substring(0,1e3):o[e]=""})),Qt.debug("formStore: Mapped newPersonalInfo:",o),n(o);let c="";e.category&&"string"==typeof e.category?c=e.category:r.category&&"string"==typeof r.category?c=r.category:s.category&&"string"==typeof s.category&&(c=s.category),!c&&e.selectedTests&&e.selectedTests.includes("nephronophthise")&&(c="nephrology"),c&&(Qt.debug("formStore: Setting category:",c.substring(0,100)),i(c.substring(0,100)));let d=[];if(Array.isArray(r.selectedPanels)?d=r.selectedPanels:Array.isArray(e.selectedTests)&&(d=e.selectedTests),d.length>0){const e=d.filter((e=>"string"==typeof e)).map((e=>e.substring(0,100)));Qt.debug("formStore: Setting selected panels:",e),a(e)}let u=null;if(r.phenotypeData?u=r.phenotypeData:e.phenotypeData&&(u=e.phenotypeData),u){const e={};Array.isArray(u)?(Qt.debug("formStore: Importing phenotype data from ARRAY format"),u.forEach((t=>{if(t&&"object"==typeof t&&t.id&&"string"==typeof t.id){let n="no_input";"string"==typeof t.status&&["present","absent"].includes(t.status.toLowerCase())&&(n=t.status.toLowerCase()),e[t.id.substring(0,50)]={id:t.id.substring(0,50),label:"string"==typeof t.label?t.label.substring(0,200):"",status:n}}}))):"object"==typeof u&&(Qt.debug("formStore: Importing phenotype data from OBJECT format"),Object.entries(u).forEach((([t,n])=>{if(n&&"object"==typeof n&&t&&"string"==typeof t){let a="no_input";"string"==typeof n.status&&["present","absent"].includes(n.status.toLowerCase())&&(a=n.status.toLowerCase()),e[t.substring(0,50)]={id:t.substring(0,50),label:"string"==typeof n.label?n.label.substring(0,200):"",status:a}}}))),Qt.debug("formStore: Setting phenotype data object:",e),D(e)}return"boolean"==typeof e.showPedigree&&(Qt.debug("formStore: Setting show pedigree:",e.showPedigree),S(e.showPedigree)),Qt.debug("formStore: Synchronizing data models post-import"),v(),x(),Qt.info("formStore: Data import successful."),!0}catch(r){return Qt.error("formStore: Error during importFormData:",r),!1}},convertPhenotypeDataToUnifiedFormat:P}})),Fn=An("settings",(()=>{const e=g("true"===localStorage.getItem("disclaimerAcknowledged")),t=g(localStorage.getItem("acknowledgmentTime")||"");return{disclaimerAcknowledged:e,acknowledgmentTime:t,acknowledgeDisclaimer:function(){const n=(new Date).toISOString().split("T")[0];e.value=!0,t.value=n,localStorage.setItem("disclaimerAcknowledged","true"),localStorage.setItem("acknowledgmentTime",n)},resetDisclaimerAcknowledgment:function(){e.value=!1,t.value="",localStorage.removeItem("disclaimerAcknowledged"),localStorage.removeItem("acknowledgmentTime")}}}));function Ln(){!function(){try{const e=window.location.protocol+"//"+window.location.host+window.location.pathname;window.history.replaceState(null,document.title,e),(window.location.search||window.location.hash)&&(Qt.warn("First attempt to clear parameters failed, trying alternate method..."),window.location.hash&&history.pushState("",document.title,window.location.pathname+window.location.search),window.location.search&&history.pushState("",document.title,window.location.pathname),window.history.replaceState(null,document.title,e)),Qt.debug("URL parameters cleared successfully")}catch(e){Qt.error("Error clearing URL parameters:",e);const t=window.location.protocol+"//"+window.location.host+window.location.pathname;window.location.href!==t&&(window.location.href=t)}}()}const Nn="AES-GCM";async function On(e,t){const n=(new TextEncoder).encode(e),a=await crypto.subtle.importKey("raw",n,{name:"PBKDF2"},!1,["deriveBits","deriveKey"]);return await crypto.subtle.deriveKey({name:"PBKDF2",salt:t,iterations:1e5,hash:"SHA-256"},a,{name:Nn,length:256},!1,["encrypt","decrypt"])}const Tn=102400;function Rn(){const e=g(""),t=Pn(),n=In();function a(e){if(window.location.hash&&window.location.hash.length>1){const t=new URLSearchParams(window.location.hash.substring(1));if(t.has(e)){const n=window.location.hash.substring(1).split("&");for(const t of n){const[n,a]=t.split("=");if(n===e)return a}return t.get(e)}}return null}function r(){try{const e=o(n.exportFormData());Qt.debug("Creating URL with compact data format");const a=JSON.stringify(e),r=`${window.location.protocol+"//"+window.location.host+window.location.pathname}#data=${encodeURIComponent(a)}`;return Qt.debug(`Generated URL length: ${r.length} characters`),r.length>2e3&&(Qt.warn(`[URL Handler] Generated plain data URL length (${r.length}) exceeds 2000 characters. This may cause issues in some browsers or tools.`),t.showSnackbar("Warning: Generated URL is very long and might not work everywhere.","warning",{timeout:7e3})),r}catch(e){return Qt.error("Error creating shareable URL:",e),t.showSnackbar("Error creating shareable URL."),window.location.href}}function o(e){if(null==e||"object"!=typeof e)return e;if(Array.isArray(e))return e.filter((e=>{if("object"!=typeof e)return!0;const t=o(e);return Object.keys(t).length>0})).map((e=>o(e)));const t={};for(const[n,a]of Object.entries(e))if(null!=a&&""!==a&&(!Array.isArray(a)||0!==a.length))if("object"==typeof a){const e=o(a);Object.keys(e).length>0&&(t[n]=e)}else t[n]=a;return t}async function i(e){try{const a=n.exportFormData(),r={patientData:a.patientData,phenotypeData:a.phenotypeData,showPedigree:a.showPedigree},o=JSON.stringify(r);Qt.debug(`JSON data length before encryption: ${o.length} characters`);const i=await async function(e,t){if(!t)throw Qt.warn("encryptData called without a password."),new Error("Password is required for encryption.");if("string"!=typeof e)throw Qt.warn("encryptData called with non-string input."),new Error("Input data must be a string.");try{const n=crypto.getRandomValues(new Uint8Array(16)),a=crypto.getRandomValues(new Uint8Array(12)),r=await On(t,n),o=(new TextEncoder).encode(e),i=await crypto.subtle.encrypt({name:Nn,iv:a},r,o),s=new Uint8Array(n.length+a.length+i.byteLength);return s.set(n,0),s.set(a,n.length),s.set(new Uint8Array(i),n.length+a.length),function(e){let t="";const n=new Uint8Array(e),a=n.byteLength;for(let o=0;o<a;o++)t+=String.fromCharCode(n[o]);try{return window.btoa(t)}catch(r){throw Qt.error("Base64 encoding failed:",r),new Error("Failed to encode data to Base64.")}}(s.buffer).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}catch(n){throw Qt.error("Encryption failed:",n),new Error("Encryption process failed.")}}(o,e),s=`${window.location.protocol+"//"+window.location.host+window.location.pathname}#encrypted=${encodeURIComponent(i)}`;return Qt.debug(`Encrypted URL (hash) length: ${s.length} characters`),s.length>2e3&&(Qt.warn(`[URL Handler] Generated encrypted URL length (${s.length}) exceeds 2000 characters. This may cause issues in some browsers or tools.`),t.showSnackbar("Warning: Generated encrypted URL is very long and might not work everywhere.","warning",{timeout:7e3})),s}catch(a){throw t.showSnackbar("error",`Encryption failed: ${a.message||"Unknown error"}`),new Error("Failed to create encrypted URL.")}}async function s(e,n){if(!e||!n)return t.setDecryptionError("Missing data or password."),null;t.setDecryptionError(null);try{const t=await async function(e,t){if(!t)throw Qt.warn("decryptData called without a password."),new Error("Password is required for decryption.");if("string"!=typeof e||0===e.length)throw Qt.warn("decryptData called with invalid encrypted data input."),new Error("Invalid encrypted data provided.");if(e.length>10485760)throw new Error("Encrypted data exceeds maximum allowed size of 10MB.");let n;try{n=function(e){try{let t=e.replace(/-/g,"+").replace(/_/g,"/");for(;t.length%4;)t+="=";const n=window.atob(t),a=n.length,r=new Uint8Array(a);for(let e=0;e<a;e++)r[e]=n.charCodeAt(e);return r.buffer}catch(t){throw Qt.error("Base64 decoding failed:",t),t instanceof DOMException&&"InvalidCharacterError"===t.name?new Error("Failed to decode Base64 data: Invalid characters detected."):new Error("Failed to decode Base64 data. It might be corrupted.")}}(e)}catch(r){throw Qt.error("Base64 decoding failed during decryption attempt:",r),new Error("Decryption failed: Invalid data format.")}const a=new Uint8Array(n);if(a.length<28)throw Qt.error(`Decryption failed: Data length (${a.length}) is less than minimum required (28).`),new Error("Decryption failed: Data appears incomplete or corrupted.");try{const e=a.slice(0,16),n=a.slice(16,28),r=a.slice(28),o=await On(t,e),i=await crypto.subtle.decrypt({name:Nn,iv:n},o,r);return(new TextDecoder).decode(i)}catch(r){throw Qt.error("Decryption failed during crypto operation:",r),new Error("Decryption failed. Please check the password or the link may be corrupted.")}}(e,n),a=JSON.parse(t);if(Yt(a),"object"!=typeof a||null===a||!a.patientData||!a.phenotypeData)throw new Error("Decrypted data has an invalid structure.");return a}catch(a){return t.setDecryptionError(a.message||"Decryption failed. Check password or link."),null}}const l=async a=>{if(e.value&&a){Qt.debug("Password submitted. Attempting decryption.");const r=await s(e.value,a);r?(Qt.debug("Decryption successful, importing data."),n.importFormData(r,!0),e.value=null,Ln(),t.cancelDecryption(),t.showSnackbar("Data decrypted and loaded successfully!")):Qt.warn("Decryption attempt failed with submitted password.")}else Qt.warn("Password submission handler called without pending encrypted data or password.")};return{pendingEncryptedValue:e,initializeFromUrl:async function(){if(window.location.href.length>20480)return Qt.warn(`[URL Handler] Incoming URL length (${window.location.href.length}) exceeds maximum allowed (20480). Aborting initialization.`),void t.showSnackbar("Error: URL is too long to process.","error");const r=a("data"),o=a("encrypted");if(r){if(r.length>Tn)return Qt.warn(`[URL Handler] Incoming 'data' parameter length (${r.length}) exceeds maximum allowed (102400). Aborting processing.`),t.showSnackbar("Error: Input data is too large.","error"),void Ln();Qt.debug('Found "data" parameter in URL hash.');try{const e=decodeURIComponent(r);if(e.length>Tn)return Qt.warn(`[URL Handler] Incoming 'data' parameter length (${e.length}) exceeds maximum allowed (102400). Aborting processing.`),t.showSnackbar("Error: Input data is too large.","error"),void Ln();let a=JSON.parse(e);a=Yt(a),Qt.debug('Sanitized JSON data from "data" parameter.'),n.importFormData(a,!0),Ln(),t.showSnackbar("Data loaded successfully from URL!")}catch(i){Qt.error('Error processing "data" parameter from URL:',i),t.showSnackbar("Error loading data from URL. The data might be corrupted.","error"),Ln()}}else if(o){if(o.length>Tn)return Qt.warn(`[URL Handler] Incoming 'encrypted' parameter length (${o.length}) exceeds maximum allowed (102400). Aborting decryption.`),t.showSnackbar("Error: Encrypted data is too large.","error"),void Ln();Qt.debug('Found "encrypted" parameter in URL hash. Prompting for password.');const n=o,r=a("password");r?(Qt.debug("Found password parameter. Attempting direct decryption."),await l(r)):(Qt.debug("Password not found in URL. Showing password dialog."),t.openDecryptionDialog(),e.value=n)}else{const e=function(){var e;try{if(function(e){const t=new URLSearchParams(window.location.search);if(t.has(e))return t.get(e);if(window.location.hash&&window.location.hash.length>1){const t=new URLSearchParams(window.location.hash.substring(1));if(t.has(e))return t.get(e)}return null}("encrypted"))return{};let n={},a=!1;const r=new URLSearchParams(window.location.search);if(r.toString()){Qt.debug("Found query parameters:",window.location.search);for(const[e,t]of r.entries())if("encrypted"!==e)try{n[e]=JSON.parse(decodeURIComponent(t)),a=!0}catch{n[e]=decodeURIComponent(t),a=!0}}if(window.location.hash&&window.location.hash.length>1){const r=new URLSearchParams(window.location.hash.substring(1)),o=r.get("data");if(o)try{const t=JSON.parse(decodeURIComponent(o));if("object"==typeof t){if(Qt.debug("Found JSON data in URL hash:",t),t.patientData&&t.patientData.selectedPanels?(Qt.debug("Hash data contains nested selectedPanels:",t.patientData.selectedPanels),t.selectedTests||(t.selectedTests=[...t.patientData.selectedPanels],Qt.debug("Added top-level selectedTests from nested data:",t.selectedTests))):t.selectedTests&&!(null==(e=t.patientData)?void 0:e.selectedPanels)&&(t.patientData||(t.patientData={}),t.patientData.selectedPanels=[...t.selectedTests],Qt.debug("Added nested selectedPanels from top-level data:",t.patientData.selectedPanels)),t.phenotypeData){if(t.patientData&&!t.patientData.phenotypeData&&(t.patientData.phenotypeData=Array.isArray(t.phenotypeData)?[...t.phenotypeData]:[t.phenotypeData],Qt.debug("Added nested phenotypeData from top-level:",t.patientData.phenotypeData)),t.category&&"object"==typeof t.phenotypeData&&!Array.isArray(t.phenotypeData)&&!t.phenotypeData[t.category]&&Object.keys(t.phenotypeData).length>0){const e={};e[t.category]=t.phenotypeData,t.phenotypeData=e,Qt.debug("Categorized phenotype data by category:",t.category)}}else if(t.patientData&&t.patientData.phenotypeData&&Array.isArray(t.patientData.phenotypeData)){const e=t.patientData.phenotypeData[0]||{};if(t.category){const n={};n[t.category]=e,t.phenotypeData=n}else t.phenotypeData=e;Qt.debug("Added top-level phenotypeData from nested array:",t.phenotypeData)}return t}}catch(t){Qt.error("Error parsing JSON data from URL:",t)}for(const[e,t]of r.entries())if("data"!==e)try{n[e]=JSON.parse(decodeURIComponent(t)),a=!0}catch{n[e]=decodeURIComponent(t),a=!0}}return n.personalInfo||n.phenotypeData||n.selectedPanels?n:a?(Qt.debug("Converting legacy format data:",n),{personalInfo:{firstName:n.givenName||"",lastName:n.familyName||"",birthdate:n.birthdate||"",sex:n.sex||"",diagnosis:n.diagnosis||"",insurance:n.insurance||"",referrer:n.physicianName||""},selectedPanels:Array.isArray(n.selectedTests)?n.selectedTests:n.selectedPanels?[n.selectedPanels]:[],phenotypeData:n.phenotypeData||[],category:n.category||""}):{}}catch(i){return Qt.error("Error parsing URL parameters:",i),{}}}();Object.keys(e).length>0?(Qt.debug("Found legacy query parameters. Importing..."),n.importFormData(e,!0),Ln(),t.showSnackbar("Legacy data loaded successfully from URL!")):Qt.debug("No relevant data parameters found in URL.")}},createShareableUrl:r,copyShareableUrl:async function(){try{const e=r();return await navigator.clipboard.writeText(e),t.showSnackbar("URL copied to clipboard!"),!0}catch(e){return Qt.error("Error copying URL to clipboard:",e),t.showSnackbar("Error copying URL to clipboard."),!1}},createEncryptedUrl:i,copyEncryptedUrl:async function(e){try{const n=await i(e);return!!n&&(await navigator.clipboard.writeText(n),t.showSnackbar("Encrypted URL copied to clipboard!"),!0)}catch(n){return!1}},decryptUrlData:s,handlePasswordSubmit:l}}function zn(e){if(!e||"string"!=typeof e||""===e.trim())return{success:!1,error:"No data provided. Please paste your data into the text area."};try{const n={personalInfo:{},selectedPanels:[],phenotypeData:[],category:"",consent:{}},a=e.split("\n"),r={"first name":{section:"personalInfo",field:"firstName"},firstname:{section:"personalInfo",field:"firstName"},"given name":{section:"personalInfo",field:"firstName"},givenname:{section:"personalInfo",field:"firstName"},"last name":{section:"personalInfo",field:"lastName"},lastname:{section:"personalInfo",field:"lastName"},"family name":{section:"personalInfo",field:"lastName"},familyname:{section:"personalInfo",field:"lastName"},"birth date":{section:"personalInfo",field:"birthdate"},birthdate:{section:"personalInfo",field:"birthdate"},"date of birth":{section:"personalInfo",field:"birthdate"},dob:{section:"personalInfo",field:"birthdate"},sex:{section:"personalInfo",field:"sex"},gender:{section:"personalInfo",field:"sex"},insurance:{section:"personalInfo",field:"insurance"},"insurance provider":{section:"personalInfo",field:"insurance"},"insurance id":{section:"personalInfo",field:"insuranceId"},insuranceid:{section:"personalInfo",field:"insuranceId"},physician:{section:"personalInfo",field:"referrer"},"physician name":{section:"personalInfo",field:"referrer"},doctor:{section:"personalInfo",field:"referrer"},referrer:{section:"personalInfo",field:"referrer"},"referring physician":{section:"personalInfo",field:"referrer"},diagnosis:{section:"personalInfo",field:"diagnosis"},"clinical diagnosis":{section:"personalInfo",field:"diagnosis"},panels:{section:"special",field:"panels"},"selected panels":{section:"special",field:"panels"},tests:{section:"special",field:"panels"},"selected tests":{section:"special",field:"panels"},category:{section:"root",field:"category"},phenotypes:{section:"special",field:"phenotypes"}};for(const e of a){if(!e.trim())continue;const a=e.match(/:(.*)|=(.*)/);if(!a)continue;const o=e.indexOf(a[0]),i=e.substring(0,o).trim().toLowerCase(),s=(a[1]||a[2]||"").trim();if(!s)continue;const l=r[i];if(l)if("root"===l.section)n[l.field]=s;else if("personalInfo"===l.section)n.personalInfo[l.field]=s;else if("special"===l.section)if("panels"===l.field)n.selectedPanels=s.split(",").map((e=>e.trim())).filter(Boolean);else if("phenotypes"===l.field)try{s.startsWith("[")&&s.endsWith("]")&&(n.phenotypeData=JSON.parse(s))}catch(t){}}return 0===Object.keys(n.personalInfo).length?{success:!1,error:"No valid patient data found. Please check the format and try again."}:{success:!0,data:n}}catch(n){return{success:!1,error:"An error occurred while parsing the data. Please check the format and try again."}}}function Mn(){return"First Name: Jane\nLast Name: Doe\nBirthdate: 1990-05-15\nSex: female\nInsurance: ABC Health\nPhysician: Dr. Smith\nDiagnosis: Suspected Renal Disease\nPanels: nephronophthise, alport_thin_basement, cystic_kidney_disease"}function Vn(e){return e instanceof HTMLElement}function Bn(e){return"function"==typeof e}function Hn(e){return"string"==typeof e}function Un(e){return void 0===e}class qn{on(e,t,n,a=!1){var r;return Un(this.bindings)&&(this.bindings={}),Un(this.bindings[e])&&(this.bindings[e]=[]),null==(r=this.bindings[e])||r.push({handler:t,ctx:n,once:a}),this}once(e,t,n){return this.on(e,t,n,!0)}off(e,t){return Un(this.bindings)||Un(this.bindings[e])||(Un(t)?delete this.bindings[e]:null==(n=this.bindings[e])||n.forEach(((n,a)=>{var r;n.handler===t&&(null==(r=this.bindings[e])||r.splice(a,1))}))),this;var n}trigger(e,...t){var n;return!Un(this.bindings)&&this.bindings[e]&&(null==(n=this.bindings[e])||n.forEach(((n,a)=>{const{ctx:r,handler:o,once:i}=n,s=r||this;var l;o.apply(s,t),i&&(null==(l=this.bindings[e])||l.splice(a,1))}))),this}}function jn(){return jn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},jn.apply(null,arguments)}function $n(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.includes(a))continue;n[a]=e[a]}return n}const Gn={defaultMerge:Symbol("deepmerge-ts: default merge"),skip:Symbol("deepmerge-ts: skip")};function Jn(e,t){return t}function Kn(e,t){return e.filter((e=>void 0!==e))}var Wn,Zn;function Qn(e){return"object"!=typeof e||null===e?0:Array.isArray(e)?2:function(e){if(!Xn.has(Object.prototype.toString.call(e)))return!1;const{constructor:t}=e;if(void 0===t)return!0;const n=t.prototype;return!(null===n||"object"!=typeof n||!Xn.has(Object.prototype.toString.call(n)))&&!!n.hasOwnProperty("isPrototypeOf")}(e)?1:e instanceof Set?3:e instanceof Map?4:5}function Yn(e){return{*[Symbol.iterator](){for(const t of e)for(const e of t)yield e}}}(Zn=Wn||(Wn={}))[Zn.NOT=0]="NOT",Zn[Zn.RECORD=1]="RECORD",Zn[Zn.ARRAY=2]="ARRAY",Zn[Zn.SET=3]="SET",Zn[Zn.MAP=4]="MAP",Zn[Zn.OTHER=5]="OTHER";const Xn=new Set(["[object Object]","[object Module]"]),ea={mergeRecords:function(e,t,n){const a={};for(const i of function(e){const t=new Set;for(const n of e)for(const e of[...Object.keys(n),...Object.getOwnPropertySymbols(n)])t.add(e);return t}(e)){const s=[];for(const t of e)o=i,"object"==typeof(r=t)&&Object.prototype.propertyIsEnumerable.call(r,o)&&s.push(t[i]);if(0===s.length)continue;const l=t.metaDataUpdater(n,{key:i,parents:e}),c=na(s,t,l);c!==Gn.skip&&("__proto__"===i?Object.defineProperty(a,i,{value:c,configurable:!0,enumerable:!0,writable:!0}):a[i]=c)}var r,o;return a},mergeArrays:function(e){return e.flat()},mergeSets:function(e){return new Set(Yn(e))},mergeMaps:function(e){return new Map(Yn(e))},mergeOthers:function(e){return e.at(-1)}};function ta(...e){return function(){const e=function(e,t){var n,a,r;return{defaultMergeFunctions:ea,mergeFunctions:jn({},ea,Object.fromEntries(Object.entries(e).filter((([e,t])=>Object.hasOwn(ea,e))).map((([e,t])=>!1===t?[e,ea.mergeOthers]:[e,t])))),metaDataUpdater:null!=(n=e.metaDataUpdater)?n:Jn,deepmerge:t,useImplicitDefaultMerging:null!=(a=e.enableImplicitDefaultMerging)&&a,filterValues:!1===e.filterValues?void 0:null!=(r=e.filterValues)?r:Kn,actions:Gn}}({},t);function t(...t){return na(t,e,undefined)}return t}()(...e)}function na(e,t,n){var a;const r=null!=(a=null==t.filterValues?void 0:t.filterValues(e,n))?a:e;if(0===r.length)return;if(1===r.length)return aa(r,t,n);const o=Qn(r[0]);if(0!==o&&5!==o)for(let i=1;i<r.length;i++)if(Qn(r[i])!==o)return aa(r,t,n);switch(o){case 1:return function(e,t,n){const a=t.mergeFunctions.mergeRecords(e,t,n);return a===Gn.defaultMerge||t.useImplicitDefaultMerging&&void 0===a&&t.mergeFunctions.mergeRecords!==t.defaultMergeFunctions.mergeRecords?t.defaultMergeFunctions.mergeRecords(e,t,n):a}(r,t,n);case 2:return function(e,t,n){const a=t.mergeFunctions.mergeArrays(e,t,n);return a===Gn.defaultMerge||t.useImplicitDefaultMerging&&void 0===a&&t.mergeFunctions.mergeArrays!==t.defaultMergeFunctions.mergeArrays?t.defaultMergeFunctions.mergeArrays(e):a}(r,t,n);case 3:return function(e,t,n){const a=t.mergeFunctions.mergeSets(e,t,n);return a===Gn.defaultMerge||t.useImplicitDefaultMerging&&void 0===a&&t.mergeFunctions.mergeSets!==t.defaultMergeFunctions.mergeSets?t.defaultMergeFunctions.mergeSets(e):a}(r,t,n);case 4:return function(e,t,n){const a=t.mergeFunctions.mergeMaps(e,t,n);return a===Gn.defaultMerge||t.useImplicitDefaultMerging&&void 0===a&&t.mergeFunctions.mergeMaps!==t.defaultMergeFunctions.mergeMaps?t.defaultMergeFunctions.mergeMaps(e):a}(r,t,n);default:return aa(r,t,n)}}function aa(e,t,n){const a=t.mergeFunctions.mergeOthers(e,t,n);return a===Gn.defaultMerge||t.useImplicitDefaultMerging&&void 0===a&&t.mergeFunctions.mergeOthers!==t.defaultMergeFunctions.mergeOthers?t.defaultMergeFunctions.mergeOthers(e):a}function ra(e){const t=Object.getOwnPropertyNames(e.constructor.prototype);for(let n=0;n<t.length;n++){const a=t[n],r=e[a];"constructor"!==a&&"function"==typeof r&&(e[a]=r.bind(e))}return e}function oa(e){return Hn(e)&&""!==e?"-"!==e.charAt(e.length-1)?`${e}-`:e:""}function ia(e){return null==e||!e.element||!e.on}function sa(){let e=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)}))}const la=["start","end"],ca=["top","right","bottom","left"].reduce(((e,t)=>e.concat(t,t+"-"+la[0],t+"-"+la[1])),[]),da=Math.min,ua=Math.max,ha=Math.round,pa=Math.floor,fa=e=>({x:e,y:e}),ma={left:"right",right:"left",bottom:"top",top:"bottom"},ga={start:"end",end:"start"};function ya(e,t,n){return ua(e,da(t,n))}function ba(e,t){return"function"==typeof e?e(t):e}function wa(e){return e.split("-")[0]}function va(e){return e.split("-")[1]}function xa(e){return"x"===e?"y":"x"}function Da(e){return"y"===e?"height":"width"}function Sa(e){return["top","bottom"].includes(wa(e))?"y":"x"}function Aa(e){return xa(Sa(e))}function Pa(e,t,n){void 0===n&&(n=!1);const a=va(e),r=Aa(e),o=Da(r);let i="x"===r?a===(n?"end":"start")?"right":"left":"start"===a?"bottom":"top";return t.reference[o]>t.floating[o]&&(i=_a(i)),[i,_a(i)]}function ka(e){return e.replace(/start|end/g,(e=>ga[e]))}function _a(e){return e.replace(/left|right|bottom|top/g,(e=>ma[e]))}function Ea(e){return"number"!=typeof e?function(e){return jn({top:0,right:0,bottom:0,left:0},e)}(e):{top:e,right:e,bottom:e,left:e}}function Ca(e){const{x:t,y:n,width:a,height:r}=e;return{width:a,height:r,top:n,left:t,right:t+a,bottom:n+r,x:t,y:n}}const Ia=["crossAxis","alignment","allowedPlacements","autoAlignment"],Fa=["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"],La=["mainAxis","crossAxis","limiter"];function Na(e,t,n){let{reference:a,floating:r}=e;const o=Sa(t),i=Aa(t),s=Da(i),l=wa(t),c="y"===o,d=a.x+a.width/2-r.width/2,u=a.y+a.height/2-r.height/2,h=a[s]/2-r[s]/2;let p;switch(l){case"top":p={x:d,y:a.y-r.height};break;case"bottom":p={x:d,y:a.y+a.height};break;case"right":p={x:a.x+a.width,y:u};break;case"left":p={x:a.x-r.width,y:u};break;default:p={x:a.x,y:a.y}}switch(va(t)){case"start":p[i]-=h*(n&&c?-1:1);break;case"end":p[i]+=h*(n&&c?-1:1)}return p}async function Oa(e,t){var n;void 0===t&&(t={});const{x:a,y:r,platform:o,rects:i,elements:s,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:h=!1,padding:p=0}=ba(t,e),f=Ea(p),m=s[h?"floating"===u?"reference":"floating":u],g=Ca(await o.getClippingRect({element:null==(n=await(null==o.isElement?void 0:o.isElement(m)))||n?m:m.contextElement||await(null==o.getDocumentElement?void 0:o.getDocumentElement(s.floating)),boundary:c,rootBoundary:d,strategy:l})),y="floating"===u?{x:a,y:r,width:i.floating.width,height:i.floating.height}:i.reference,b=await(null==o.getOffsetParent?void 0:o.getOffsetParent(s.floating)),w=await(null==o.isElement?void 0:o.isElement(b))&&await(null==o.getScale?void 0:o.getScale(b))||{x:1,y:1},v=Ca(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:y,offsetParent:b,strategy:l}):y);return{top:(g.top-v.top+f.top)/w.y,bottom:(v.bottom-g.bottom+f.bottom)/w.y,left:(g.left-v.left+f.left)/w.x,right:(v.right-g.right+f.right)/w.x}}function Ta(){return"undefined"!=typeof window}function Ra(e){return Va(e)?(e.nodeName||"").toLowerCase():"#document"}function za(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function Ma(e){var t;return null==(t=(Va(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function Va(e){return!!Ta()&&(e instanceof Node||e instanceof za(e).Node)}function Ba(e){return!!Ta()&&(e instanceof Element||e instanceof za(e).Element)}function Ha(e){return!!Ta()&&(e instanceof HTMLElement||e instanceof za(e).HTMLElement)}function Ua(e){return!(!Ta()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof za(e).ShadowRoot)}function qa(e){const{overflow:t,overflowX:n,overflowY:a,display:r}=Wa(e);return/auto|scroll|overlay|hidden|clip/.test(t+a+n)&&!["inline","contents"].includes(r)}function ja(e){return["table","td","th"].includes(Ra(e))}function $a(e){return[":popover-open",":modal"].some((t=>{try{return e.matches(t)}catch(n){return!1}}))}function Ga(e){const t=Ja(),n=Ba(e)?Wa(e):e;return"none"!==n.transform||"none"!==n.perspective||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","perspective","filter"].some((e=>(n.willChange||"").includes(e)))||["paint","layout","strict","content"].some((e=>(n.contain||"").includes(e)))}function Ja(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function Ka(e){return["html","body","#document"].includes(Ra(e))}function Wa(e){return za(e).getComputedStyle(e)}function Za(e){return Ba(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Qa(e){if("html"===Ra(e))return e;const t=e.assignedSlot||e.parentNode||Ua(e)&&e.host||Ma(e);return Ua(t)?t.host:t}function Ya(e){const t=Qa(e);return Ka(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ha(t)&&qa(t)?t:Ya(t)}function Xa(e,t,n){var a;void 0===t&&(t=[]),void 0===n&&(n=!0);const r=Ya(e),o=r===(null==(a=e.ownerDocument)?void 0:a.body),i=za(r);if(o){const e=er(i);return t.concat(i,i.visualViewport||[],qa(r)?r:[],e&&n?Xa(e):[])}return t.concat(r,Xa(r,[],n))}function er(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function tr(e){const t=Wa(e);let n=parseFloat(t.width)||0,a=parseFloat(t.height)||0;const r=Ha(e),o=r?e.offsetWidth:n,i=r?e.offsetHeight:a,s=ha(n)!==o||ha(a)!==i;return s&&(n=o,a=i),{width:n,height:a,$:s}}function nr(e){return Ba(e)?e:e.contextElement}function ar(e){const t=nr(e);if(!Ha(t))return fa(1);const n=t.getBoundingClientRect(),{width:a,height:r,$:o}=tr(t);let i=(o?ha(n.width):n.width)/a,s=(o?ha(n.height):n.height)/r;return i&&Number.isFinite(i)||(i=1),s&&Number.isFinite(s)||(s=1),{x:i,y:s}}const rr=fa(0);function or(e){const t=za(e);return Ja()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:rr}function ir(e,t,n,a){void 0===t&&(t=!1),void 0===n&&(n=!1);const r=e.getBoundingClientRect(),o=nr(e);let i=fa(1);t&&(a?Ba(a)&&(i=ar(a)):i=ar(e));const s=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==za(e))&&t}(o,n,a)?or(o):fa(0);let l=(r.left+s.x)/i.x,c=(r.top+s.y)/i.y,d=r.width/i.x,u=r.height/i.y;if(o){const e=za(o),t=a&&Ba(a)?za(a):a;let n=e,r=er(n);for(;r&&a&&t!==n;){const e=ar(r),t=r.getBoundingClientRect(),a=Wa(r),o=t.left+(r.clientLeft+parseFloat(a.paddingLeft))*e.x,i=t.top+(r.clientTop+parseFloat(a.paddingTop))*e.y;l*=e.x,c*=e.y,d*=e.x,u*=e.y,l+=o,c+=i,n=za(r),r=er(n)}}return Ca({width:d,height:u,x:l,y:c})}function sr(e,t){const n=Za(e).scrollLeft;return t?t.left+n:ir(Ma(e)).left+n}function lr(e,t,n){void 0===n&&(n=!1);const a=e.getBoundingClientRect();return{x:a.left+t.scrollLeft-(n?0:sr(e,a)),y:a.top+t.scrollTop}}function cr(e,t,n){let a;if("viewport"===t)a=function(e,t){const n=za(e),a=Ma(e),r=n.visualViewport;let o=a.clientWidth,i=a.clientHeight,s=0,l=0;if(r){o=r.width,i=r.height;const e=Ja();(!e||e&&"fixed"===t)&&(s=r.offsetLeft,l=r.offsetTop)}return{width:o,height:i,x:s,y:l}}(e,n);else if("document"===t)a=function(e){const t=Ma(e),n=Za(e),a=e.ownerDocument.body,r=ua(t.scrollWidth,t.clientWidth,a.scrollWidth,a.clientWidth),o=ua(t.scrollHeight,t.clientHeight,a.scrollHeight,a.clientHeight);let i=-n.scrollLeft+sr(e);const s=-n.scrollTop;return"rtl"===Wa(a).direction&&(i+=ua(t.clientWidth,a.clientWidth)-r),{width:r,height:o,x:i,y:s}}(Ma(e));else if(Ba(t))a=function(e,t){const n=ir(e,!0,"fixed"===t),a=n.top+e.clientTop,r=n.left+e.clientLeft,o=Ha(e)?ar(e):fa(1);return{width:e.clientWidth*o.x,height:e.clientHeight*o.y,x:r*o.x,y:a*o.y}}(t,n);else{const n=or(e);a={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return Ca(a)}function dr(e,t){const n=Qa(e);return!(n===t||!Ba(n)||Ka(n))&&("fixed"===Wa(n).position||dr(n,t))}function ur(e,t,n){const a=Ha(t),r=Ma(t),o="fixed"===n,i=ir(e,!0,o,t);let s={scrollLeft:0,scrollTop:0};const l=fa(0);if(a||!a&&!o)if(("body"!==Ra(t)||qa(r))&&(s=Za(t)),a){const e=ir(t,!0,o,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else r&&(l.x=sr(r));const c=!r||a||o?fa(0):lr(r,s);return{x:i.left+s.scrollLeft-l.x-c.x,y:i.top+s.scrollTop-l.y-c.y,width:i.width,height:i.height}}function hr(e){return"static"===Wa(e).position}function pr(e,t){if(!Ha(e)||"fixed"===Wa(e).position)return null;if(t)return t(e);let n=e.offsetParent;return Ma(e)===n&&(n=n.ownerDocument.body),n}function fr(e,t){const n=za(e);if($a(e))return n;if(!Ha(e)){let t=Qa(e);for(;t&&!Ka(t);){if(Ba(t)&&!hr(t))return t;t=Qa(t)}return n}let a=pr(e,t);for(;a&&ja(a)&&hr(a);)a=pr(a,t);return a&&Ka(a)&&hr(a)&&!Ga(a)?n:a||function(e){let t=Qa(e);for(;Ha(t)&&!Ka(t);){if(Ga(t))return t;if($a(t))return null;t=Qa(t)}return null}(e)||n}const mr={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:a,strategy:r}=e;const o="fixed"===r,i=Ma(a),s=!!t&&$a(t.floating);if(a===i||s&&o)return n;let l={scrollLeft:0,scrollTop:0},c=fa(1);const d=fa(0),u=Ha(a);if((u||!u&&!o)&&(("body"!==Ra(a)||qa(i))&&(l=Za(a)),Ha(a))){const e=ir(a);c=ar(a),d.x=e.x+a.clientLeft,d.y=e.y+a.clientTop}const h=!i||u||o?fa(0):lr(i,l,!0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+h.x,y:n.y*c.y-l.scrollTop*c.y+d.y+h.y}},getDocumentElement:Ma,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:a,strategy:r}=e;const o=[..."clippingAncestors"===n?$a(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let a=Xa(e,[],!1).filter((e=>Ba(e)&&"body"!==Ra(e))),r=null;const o="fixed"===Wa(e).position;let i=o?Qa(e):e;for(;Ba(i)&&!Ka(i);){const t=Wa(i),n=Ga(i);n||"fixed"!==t.position||(r=null),(o?!n&&!r:!n&&"static"===t.position&&r&&["absolute","fixed"].includes(r.position)||qa(i)&&!n&&dr(e,i))?a=a.filter((e=>e!==i)):r=t,i=Qa(i)}return t.set(e,a),a}(t,this._c):[].concat(n),a],i=o[0],s=o.reduce(((e,n)=>{const a=cr(t,n,r);return e.top=ua(a.top,e.top),e.right=da(a.right,e.right),e.bottom=da(a.bottom,e.bottom),e.left=ua(a.left,e.left),e}),cr(t,i,r));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}},getOffsetParent:fr,getElementRects:async function(e){const t=this.getOffsetParent||fr,n=this.getDimensions,a=await n(e.floating);return{reference:ur(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:a.width,height:a.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=tr(e);return{width:t,height:n}},getScale:ar,isElement:Ba,isRTL:function(e){return"rtl"===Wa(e).direction}};const gr=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:n,y:a,placement:r,rects:o,middlewareData:i}=t,{offset:s=0,mainAxis:l=!0,crossAxis:c=!0}=ba(e,t),d={x:n,y:a},u=Sa(r),h=xa(u);let p=d[h],f=d[u];const m=ba(s,t),g="number"==typeof m?{mainAxis:m,crossAxis:0}:jn({mainAxis:0,crossAxis:0},m);if(l){const e="y"===h?"height":"width",t=o.reference[h]-o.floating[e]+g.mainAxis,n=o.reference[h]+o.reference[e]-g.mainAxis;p<t?p=t:p>n&&(p=n)}if(c){var y,b;const e="y"===h?"width":"height",t=["top","left"].includes(wa(r)),n=o.reference[u]-o.floating[e]+(t&&(null==(y=i.offset)?void 0:y[u])||0)+(t?0:g.crossAxis),a=o.reference[u]+o.reference[e]+(t?0:(null==(b=i.offset)?void 0:b[u])||0)-(t?g.crossAxis:0);f<n?f=n:f>a&&(f=a)}return{[h]:p,[u]:f}}}};function yr(e){e.cleanup&&e.cleanup();const t=e._getResolvedAttachToOptions();let n=t.element;const a=function(e,t){var n,a,r;const o={strategy:"absolute",middleware:[]},i=function(e){return!(!e.options.arrow||!e.el)&&e.el.querySelector(".shepherd-arrow")}(t),s=ia(e),l=null==(n=e.on)?void 0:n.includes("auto"),c=(null==e||null==(a=e.on)?void 0:a.includes("-start"))||(null==e||null==(r=e.on)?void 0:r.includes("-end"));if(!s){var d;if(l?o.middleware.push(function(e){return void 0===e&&(e={}),{name:"autoPlacement",options:e,async fn(t){var n,a,r;const{rects:o,middlewareData:i,placement:s,platform:l,elements:c}=t,d=ba(e,t),{crossAxis:u=!1,alignment:h,allowedPlacements:p=ca,autoAlignment:f=!0}=d,m=$n(d,Ia),g=void 0!==h||p===ca?function(e,t,n){return(e?[...n.filter((t=>va(t)===e)),...n.filter((t=>va(t)!==e))]:n.filter((e=>wa(e)===e))).filter((n=>!e||va(n)===e||!!t&&ka(n)!==n))}(h||null,f,p):p,y=await Oa(t,m),b=(null==(n=i.autoPlacement)?void 0:n.index)||0,w=g[b];if(null==w)return{};const v=Pa(w,o,await(null==l.isRTL?void 0:l.isRTL(c.floating)));if(s!==w)return{reset:{placement:g[0]}};const x=[y[wa(w)],y[v[0]],y[v[1]]],D=[...(null==(a=i.autoPlacement)?void 0:a.overflows)||[],{placement:w,overflows:x}],S=g[b+1];if(S)return{data:{index:b+1,overflows:D},reset:{placement:S}};const A=D.map((e=>{const t=va(e.placement);return[e.placement,t&&u?e.overflows.slice(0,2).reduce(((e,t)=>e+t),0):e.overflows[0],e.overflows]})).sort(((e,t)=>e[1]-t[1])),P=(null==(r=A.filter((e=>e[2].slice(0,va(e[0])?2:3).every((e=>e<=0))))[0])?void 0:r[0])||A[0][0];return P!==s?{data:{index:b+1,overflows:D},reset:{placement:P}}:{}}}}({crossAxis:!0,alignment:c?null==e||null==(d=e.on)?void 0:d.split("-").pop():null})):o.middleware.push(function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,a;const{placement:r,middlewareData:o,rects:i,initialPlacement:s,platform:l,elements:c}=t,d=ba(e,t),{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:g=!0}=d,y=$n(d,Fa);if(null!=(n=o.arrow)&&n.alignmentOffset)return{};const b=wa(r),w=Sa(s),v=wa(s)===s,x=await(null==l.isRTL?void 0:l.isRTL(c.floating)),D=p||(v||!g?[_a(s)]:function(e){const t=_a(e);return[ka(e),t,ka(t)]}(s)),S="none"!==m;!p&&S&&D.push(...function(e,t,n,a){const r=va(e);let o=function(e,t,n){const a=["left","right"],r=["right","left"],o=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return n?t?r:a:t?a:r;case"left":case"right":return t?o:i;default:return[]}}(wa(e),"start"===n,a);return r&&(o=o.map((e=>e+"-"+r)),t&&(o=o.concat(o.map(ka)))),o}(s,g,m,x));const A=[s,...D],P=await Oa(t,y),k=[];let _=(null==(a=o.flip)?void 0:a.overflows)||[];if(u&&k.push(P[b]),h){const e=Pa(r,i,x);k.push(P[e[0]],P[e[1]])}if(_=[..._,{placement:r,overflows:k}],!k.every((e=>e<=0))){var E,C;const e=((null==(E=o.flip)?void 0:E.index)||0)+1,t=A[e];if(t)return{data:{index:e,overflows:_},reset:{placement:t}};let n=null==(C=_.filter((e=>e.overflows[0]<=0)).sort(((e,t)=>e.overflows[1]-t.overflows[1]))[0])?void 0:C.placement;if(!n)switch(f){case"bestFit":{var I;const e=null==(I=_.filter((e=>{if(S){const t=Sa(e.placement);return t===w||"y"===t}return!0})).map((e=>[e.placement,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:I[0];e&&(n=e);break}case"initialPlacement":n=s}if(r!==n)return{reset:{placement:n}}}return{}}}}()),o.middleware.push(function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:a,placement:r}=t,o=ba(e,t),{mainAxis:i=!0,crossAxis:s=!1,limiter:l={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}}}=o,c=$n(o,La),d={x:n,y:a},u=await Oa(t,c),h=Sa(wa(r)),p=xa(h);let f=d[p],m=d[h];if(i){const e="y"===p?"bottom":"right";f=ya(f+u["y"===p?"top":"left"],f,f-u[e])}if(s){const e="y"===h?"bottom":"right";m=ya(m+u["y"===h?"top":"left"],m,m-u[e])}const g=l.fn(jn({},t,{[p]:f,[h]:m}));return jn({},g,{data:{x:g.x-n,y:g.y-a}})}}}({limiter:gr(),crossAxis:!0})),i){const e="object"==typeof t.options.arrow?t.options.arrow:{padding:4};o.middleware.push((e=>({name:"arrow",options:e,async fn(t){const{x:n,y:a,placement:r,rects:o,platform:i,elements:s,middlewareData:l}=t,{element:c,padding:d=0}=ba(e,t)||{};if(null==c)return{};const u=Ea(d),h={x:n,y:a},p=Aa(r),f=Da(p),m=await i.getDimensions(c),g="y"===p,y=g?"top":"left",b=g?"bottom":"right",w=g?"clientHeight":"clientWidth",v=o.reference[f]+o.reference[p]-h[p]-o.floating[f],x=h[p]-o.reference[p],D=await(null==i.getOffsetParent?void 0:i.getOffsetParent(c));let S=D?D[w]:0;S&&await(null==i.isElement?void 0:i.isElement(D))||(S=s.floating[w]||o.floating[f]);const A=v/2-x/2,P=S/2-m[f]/2-1,k=da(u[y],P),_=da(u[b],P),E=k,C=S-m[f]-_,I=S/2-m[f]/2+A,F=ya(E,I,C),L=!l.arrow&&null!=va(r)&&I!==F&&o.reference[f]/2-(I<E?k:_)-m[f]/2<0,N=L?I<E?I-E:I-C:0;return{[p]:h[p]+N,data:jn({[p]:F,centerOffset:I-F-N},L&&{alignmentOffset:N}),reset:L}}}))({element:i,padding:c?e.padding:0}))}l||(o.placement=e.on)}return ta(o,t.options.floatingUIOptions||{})}(t,e),r=ia(t);return r&&(n=document.body,e.shepherdElementComponent.getElement().classList.add("shepherd-centered")),e.cleanup=function(e,t,n,a){void 0===a&&(a={});const{ancestorScroll:r=!0,ancestorResize:o=!0,elementResize:i="function"==typeof ResizeObserver,layoutShift:s="function"==typeof IntersectionObserver,animationFrame:l=!1}=a,c=nr(e),d=r||o?[...c?Xa(c):[],...Xa(t)]:[];d.forEach((e=>{r&&e.addEventListener("scroll",n,{passive:!0}),o&&e.addEventListener("resize",n)}));const u=c&&s?function(e,t){let n,a=null;const r=Ma(e);function o(){var e;clearTimeout(n),null==(e=a)||e.disconnect(),a=null}return function i(s,l){void 0===s&&(s=!1),void 0===l&&(l=1),o();const{left:c,top:d,width:u,height:h}=e.getBoundingClientRect();if(s||t(),!u||!h)return;const p={rootMargin:-pa(d)+"px "+-pa(r.clientWidth-(c+u))+"px "+-pa(r.clientHeight-(d+h))+"px "+-pa(c)+"px",threshold:ua(0,da(1,l))||1};let f=!0;function m(e){const t=e[0].intersectionRatio;if(t!==l){if(!f)return i();t?i(!1,t):n=setTimeout((()=>{i(!1,1e-7)}),1e3)}f=!1}try{a=new IntersectionObserver(m,jn({},p,{root:r.ownerDocument}))}catch(g){a=new IntersectionObserver(m,p)}a.observe(e)}(!0),o}(c,n):null;let h,p=-1,f=null;i&&(f=new ResizeObserver((e=>{let[a]=e;a&&a.target===c&&f&&(f.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame((()=>{var e;null==(e=f)||e.observe(t)}))),n()})),c&&!l&&f.observe(c),f.observe(t));let m=l?ir(e):null;return l&&function t(){const a=ir(e);!m||a.x===m.x&&a.y===m.y&&a.width===m.width&&a.height===m.height||n(),m=a,h=requestAnimationFrame(t)}(),n(),()=>{var e;d.forEach((e=>{r&&e.removeEventListener("scroll",n),o&&e.removeEventListener("resize",n)})),null==u||u(),null==(e=f)||e.disconnect(),f=null,l&&cancelAnimationFrame(h)}}(n,e.el,(()=>{e.el?function(e,t,n,a){((e,t,n)=>{const a=new Map,r=jn({platform:mr},n),o=jn({},r.platform,{_c:a});return(async(e,t,n)=>{const{placement:a="bottom",strategy:r="absolute",middleware:o=[],platform:i}=n,s=o.filter(Boolean),l=await(null==i.isRTL?void 0:i.isRTL(t));let c=await i.getElementRects({reference:e,floating:t,strategy:r}),{x:d,y:u}=Na(c,a,l),h=a,p={},f=0;for(let m=0;m<s.length;m++){const{name:n,fn:o}=s[m],{x:g,y,data:b,reset:w}=await o({x:d,y:u,initialPlacement:a,placement:h,strategy:r,middlewareData:p,rects:c,platform:i,elements:{reference:e,floating:t}});d=null!=g?g:d,u=null!=y?y:u,p=jn({},p,{[n]:jn({},p[n],b)}),w&&f<=50&&(f++,"object"==typeof w&&(w.placement&&(h=w.placement),w.rects&&(c=!0===w.rects?await i.getElementRects({reference:e,floating:t,strategy:r}):w.rects),({x:d,y:u}=Na(c,h,l))),m=-1)}return{x:d,y:u,placement:h,strategy:r,middlewareData:p}})(e,t,jn({},r,{platform:o}))})(e,t.el,n).then(function(e,t){return({x:n,y:a,placement:r,middlewareData:o})=>e.el?(t?Object.assign(e.el.style,{position:"fixed",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}):Object.assign(e.el.style,{position:"absolute",left:`${n}px`,top:`${a}px`}),e.el.dataset.popperPlacement=r,function(e,t){const n=e.querySelector(".shepherd-arrow");if(Vn(n)&&t.arrow){const{x:e,y:a}=t.arrow;Object.assign(n.style,{left:null!=e?`${e}px`:"",top:null!=a?`${a}px`:""})}}(e.el,o),e):e}(t,a)).then((e=>new Promise((t=>{setTimeout((()=>t(e)),300)})))).then((e=>{null!=e&&e.el&&e.el.focus({preventScroll:!0})}))}(n,e,a,r):null==e.cleanup||e.cleanup()})),e.target=t.element,a}function br(){}function wr(e,t){for(const n in t)e[n]=t[n];return e}function vr(e){return e()}function xr(){return Object.create(null)}function Dr(e){e.forEach(vr)}function Sr(e){return"function"==typeof e}function Ar(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function Pr(e,t){e.appendChild(t)}function kr(e,t,n){e.insertBefore(t,n||null)}function _r(e){e.parentNode&&e.parentNode.removeChild(e)}function Er(e){return document.createElement(e)}function Cr(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Ir(e){return document.createTextNode(e)}function Fr(){return Ir(" ")}function Lr(e,t,n,a){return e.addEventListener(t,n,a),()=>e.removeEventListener(t,n,a)}function Nr(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}const Or=["width","height"];function Tr(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const a in t)null==t[a]?e.removeAttribute(a):"style"===a?e.style.cssText=t[a]:"__value"===a?e.value=e[a]=t[a]:n[a]&&n[a].set&&-1===Or.indexOf(a)?e[a]=t[a]:Nr(e,a,t[a])}function Rr(e,t,n){e.classList.toggle(t,!!n)}let zr;function Mr(e){zr=e}function Vr(){if(!zr)throw new Error("Function called outside component initialization");return zr}function Br(e){Vr().$$.after_update.push(e)}const Hr=[],Ur=[];let qr=[];const jr=[],$r=Promise.resolve();let Gr=!1;function Jr(e){qr.push(e)}const Kr=new Set;let Wr=0;function Zr(){if(0!==Wr)return;const e=zr;do{try{for(;Wr<Hr.length;){const e=Hr[Wr];Wr++,Mr(e),Qr(e.$$)}}catch(t){throw Hr.length=0,Wr=0,t}for(Mr(null),Hr.length=0,Wr=0;Ur.length;)Ur.pop()();for(let e=0;e<qr.length;e+=1){const t=qr[e];Kr.has(t)||(Kr.add(t),t())}qr.length=0}while(Hr.length);for(;jr.length;)jr.pop()();Gr=!1,Kr.clear(),Mr(e)}function Qr(e){if(null!==e.fragment){e.update(),Dr(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Jr)}}const Yr=new Set;let Xr;function eo(){Xr={r:0,c:[],p:Xr}}function to(){Xr.r||Dr(Xr.c),Xr=Xr.p}function no(e,t){e&&e.i&&(Yr.delete(e),e.i(t))}function ao(e,t,n,a){if(e&&e.o){if(Yr.has(e))return;Yr.add(e),Xr.c.push((()=>{Yr.delete(e),a&&(n&&e.d(1),a())})),e.o(t)}else a&&a()}function ro(e){return void 0!==(null==e?void 0:e.length)?e:Array.from(e)}function oo(e){e&&e.c()}function io(e,t,n){const{fragment:a,after_update:r}=e.$$;a&&a.m(t,n),Jr((()=>{const t=e.$$.on_mount.map(vr).filter(Sr);e.$$.on_destroy?e.$$.on_destroy.push(...t):Dr(t),e.$$.on_mount=[]})),r.forEach(Jr)}function so(e,t){const n=e.$$;null!==n.fragment&&(function(e){const t=[],n=[];qr.forEach((a=>-1===e.indexOf(a)?t.push(a):n.push(a))),n.forEach((e=>e())),qr=t}(n.after_update),Dr(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function lo(e,t,n,a,r,o,i=null,s=[-1]){const l=zr;Mr(e);const c=e.$$={fragment:null,ctx:[],props:o,update:br,not_equal:r,bound:xr(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:xr(),dirty:s,skip_bound:!1,root:t.target||l.$$.root};i&&i(c.root);let d=!1;if(c.ctx=n?n(e,t.props||{},((t,n,...a)=>{const o=a.length?a[0]:n;return c.ctx&&r(c.ctx[t],c.ctx[t]=o)&&(!c.skip_bound&&c.bound[t]&&c.bound[t](o),d&&function(e,t){-1===e.$$.dirty[0]&&(Hr.push(e),Gr||(Gr=!0,$r.then(Zr)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(e,t)),n})):[],c.update(),d=!0,Dr(c.before_update),c.fragment=!!a&&a(c.ctx),t.target){if(t.hydrate){const e=(u=t.target,Array.from(u.childNodes));c.fragment&&c.fragment.l(e),e.forEach(_r)}else c.fragment&&c.fragment.c();t.intro&&no(e.$$.fragment),io(e,t.target,t.anchor),Zr()}var u;Mr(l)}class co{constructor(){this.$$=void 0,this.$$set=void 0}$destroy(){so(this,1),this.$destroy=br}$on(e,t){if(!Sr(t))return br;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function uo(e){let t,n,a,r,o;return{c(){t=Er("button"),Nr(t,"aria-label",n=e[3]?e[3]:null),Nr(t,"class",a=`${e[1]||""} shepherd-button ${e[4]?"shepherd-button-secondary":""}`),t.disabled=e[2],Nr(t,"tabindex","0"),Nr(t,"type","button")},m(n,a){kr(n,t,a),t.innerHTML=e[5],r||(o=Lr(t,"click",(function(){Sr(e[0])&&e[0].apply(this,arguments)})),r=!0)},p(r,[o]){e=r,32&o&&(t.innerHTML=e[5]),8&o&&n!==(n=e[3]?e[3]:null)&&Nr(t,"aria-label",n),18&o&&a!==(a=`${e[1]||""} shepherd-button ${e[4]?"shepherd-button-secondary":""}`)&&Nr(t,"class",a),4&o&&(t.disabled=e[2])},i:br,o:br,d(e){e&&_r(t),r=!1,o()}}}function ho(e,t,n){let a,r,o,i,s,l,{config:c,step:d}=t;function u(e){return Bn(e)?e.call(d):e}return e.$$set=e=>{"config"in e&&n(6,c=e.config),"step"in e&&n(7,d=e.step)},e.$$.update=()=>{192&e.$$.dirty&&(n(0,a=c.action?c.action.bind(d.tour):null),n(1,r=c.classes),n(2,o=!!c.disabled&&u(c.disabled)),n(3,i=c.label?u(c.label):null),n(4,s=c.secondary),n(5,l=c.text?u(c.text):null))},[a,r,o,i,s,l,c,d]}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");class po extends co{constructor(e){super(),lo(this,e,ho,uo,Ar,{config:6,step:7})}}function fo(e,t,n){const a=e.slice();return a[2]=t[n],a}function mo(e){let t,n,a=ro(e[1]),r=[];for(let i=0;i<a.length;i+=1)r[i]=go(fo(e,a,i));const o=e=>ao(r[e],1,1,(()=>{r[e]=null}));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=Ir("")},m(e,a){for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,a);kr(e,t,a),n=!0},p(e,n){if(3&n){let i;for(a=ro(e[1]),i=0;i<a.length;i+=1){const o=fo(e,a,i);r[i]?(r[i].p(o,n),no(r[i],1)):(r[i]=go(o),r[i].c(),no(r[i],1),r[i].m(t.parentNode,t))}for(eo(),i=a.length;i<r.length;i+=1)o(i);to()}},i(e){if(!n){for(let e=0;e<a.length;e+=1)no(r[e]);n=!0}},o(e){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)ao(r[t]);n=!1},d(e){e&&_r(t),function(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}(r,e)}}}function go(e){let t,n;return t=new po({props:{config:e[2],step:e[0]}}),{c(){oo(t.$$.fragment)},m(e,a){io(t,e,a),n=!0},p(e,n){const a={};2&n&&(a.config=e[2]),1&n&&(a.step=e[0]),t.$set(a)},i(e){n||(no(t.$$.fragment,e),n=!0)},o(e){ao(t.$$.fragment,e),n=!1},d(e){so(t,e)}}}function yo(e){let t,n,a=e[1]&&mo(e);return{c(){t=Er("footer"),a&&a.c(),Nr(t,"class","shepherd-footer")},m(e,r){kr(e,t,r),a&&a.m(t,null),n=!0},p(e,[n]){e[1]?a?(a.p(e,n),2&n&&no(a,1)):(a=mo(e),a.c(),no(a,1),a.m(t,null)):a&&(eo(),ao(a,1,1,(()=>{a=null})),to())},i(e){n||(no(a),n=!0)},o(e){ao(a),n=!1},d(e){e&&_r(t),a&&a.d()}}}function bo(e,t,n){let a,{step:r}=t;return e.$$set=e=>{"step"in e&&n(0,r=e.step)},e.$$.update=()=>{1&e.$$.dirty&&n(1,a=r.options.buttons)},[r,a]}class wo extends co{constructor(e){super(),lo(this,e,bo,yo,Ar,{step:0})}}function vo(e){let t,n,a,r,o;return{c(){t=Er("button"),n=Er("span"),n.textContent="×",Nr(n,"aria-hidden","true"),Nr(t,"aria-label",a=e[0].label?e[0].label:"Close Tour"),Nr(t,"class","shepherd-cancel-icon"),Nr(t,"type","button")},m(a,i){kr(a,t,i),Pr(t,n),r||(o=Lr(t,"click",e[1]),r=!0)},p(e,[n]){1&n&&a!==(a=e[0].label?e[0].label:"Close Tour")&&Nr(t,"aria-label",a)},i:br,o:br,d(e){e&&_r(t),r=!1,o()}}}function xo(e,t,n){let{cancelIcon:a,step:r}=t;return e.$$set=e=>{"cancelIcon"in e&&n(0,a=e.cancelIcon),"step"in e&&n(2,r=e.step)},[a,e=>{e.preventDefault(),r.cancel()},r]}class Do extends co{constructor(e){super(),lo(this,e,xo,vo,Ar,{cancelIcon:0,step:2})}}function So(e){let t;return{c(){t=Er("h3"),Nr(t,"id",e[1]),Nr(t,"class","shepherd-title")},m(n,a){kr(n,t,a),e[3](t)},p(e,[n]){2&n&&Nr(t,"id",e[1])},i:br,o:br,d(n){n&&_r(t),e[3](null)}}}function Ao(e,t,n){let{labelId:a,element:r,title:o}=t;return Br((()=>{Bn(o)&&n(2,o=o()),n(0,r.innerHTML=o,r)})),e.$$set=e=>{"labelId"in e&&n(1,a=e.labelId),"element"in e&&n(0,r=e.element),"title"in e&&n(2,o=e.title)},[r,a,o,function(e){Ur[e?"unshift":"push"]((()=>{r=e,n(0,r)}))}]}class Po extends co{constructor(e){super(),lo(this,e,Ao,So,Ar,{labelId:1,element:0,title:2})}}function ko(e){let t,n;return t=new Po({props:{labelId:e[0],title:e[2]}}),{c(){oo(t.$$.fragment)},m(e,a){io(t,e,a),n=!0},p(e,n){const a={};1&n&&(a.labelId=e[0]),4&n&&(a.title=e[2]),t.$set(a)},i(e){n||(no(t.$$.fragment,e),n=!0)},o(e){ao(t.$$.fragment,e),n=!1},d(e){so(t,e)}}}function _o(e){let t,n;return t=new Do({props:{cancelIcon:e[3],step:e[1]}}),{c(){oo(t.$$.fragment)},m(e,a){io(t,e,a),n=!0},p(e,n){const a={};8&n&&(a.cancelIcon=e[3]),2&n&&(a.step=e[1]),t.$set(a)},i(e){n||(no(t.$$.fragment,e),n=!0)},o(e){ao(t.$$.fragment,e),n=!1},d(e){so(t,e)}}}function Eo(e){let t,n,a,r=e[2]&&ko(e),o=e[3]&&e[3].enabled&&_o(e);return{c(){t=Er("header"),r&&r.c(),n=Fr(),o&&o.c(),Nr(t,"class","shepherd-header")},m(e,i){kr(e,t,i),r&&r.m(t,null),Pr(t,n),o&&o.m(t,null),a=!0},p(e,[a]){e[2]?r?(r.p(e,a),4&a&&no(r,1)):(r=ko(e),r.c(),no(r,1),r.m(t,n)):r&&(eo(),ao(r,1,1,(()=>{r=null})),to()),e[3]&&e[3].enabled?o?(o.p(e,a),8&a&&no(o,1)):(o=_o(e),o.c(),no(o,1),o.m(t,null)):o&&(eo(),ao(o,1,1,(()=>{o=null})),to())},i(e){a||(no(r),no(o),a=!0)},o(e){ao(r),ao(o),a=!1},d(e){e&&_r(t),r&&r.d(),o&&o.d()}}}function Co(e,t,n){let a,r,{labelId:o,step:i}=t;return e.$$set=e=>{"labelId"in e&&n(0,o=e.labelId),"step"in e&&n(1,i=e.step)},e.$$.update=()=>{2&e.$$.dirty&&(n(2,a=i.options.title),n(3,r=i.options.cancelIcon))},[o,i,a,r]}class Io extends co{constructor(e){super(),lo(this,e,Co,Eo,Ar,{labelId:0,step:1})}}function Fo(e){let t;return{c(){t=Er("div"),Nr(t,"class","shepherd-text"),Nr(t,"id",e[1])},m(n,a){kr(n,t,a),e[3](t)},p(e,[n]){2&n&&Nr(t,"id",e[1])},i:br,o:br,d(n){n&&_r(t),e[3](null)}}}function Lo(e,t,n){let{descriptionId:a,element:r,step:o}=t;return Br((()=>{let{text:e}=o.options;Bn(e)&&(e=e.call(o)),Vn(e)?r.appendChild(e):n(0,r.innerHTML=e,r)})),e.$$set=e=>{"descriptionId"in e&&n(1,a=e.descriptionId),"element"in e&&n(0,r=e.element),"step"in e&&n(2,o=e.step)},[r,a,o,function(e){Ur[e?"unshift":"push"]((()=>{r=e,n(0,r)}))}]}class No extends co{constructor(e){super(),lo(this,e,Lo,Fo,Ar,{descriptionId:1,element:0,step:2})}}function Oo(e){let t,n;return t=new Io({props:{labelId:e[1],step:e[2]}}),{c(){oo(t.$$.fragment)},m(e,a){io(t,e,a),n=!0},p(e,n){const a={};2&n&&(a.labelId=e[1]),4&n&&(a.step=e[2]),t.$set(a)},i(e){n||(no(t.$$.fragment,e),n=!0)},o(e){ao(t.$$.fragment,e),n=!1},d(e){so(t,e)}}}function To(e){let t,n;return t=new No({props:{descriptionId:e[0],step:e[2]}}),{c(){oo(t.$$.fragment)},m(e,a){io(t,e,a),n=!0},p(e,n){const a={};1&n&&(a.descriptionId=e[0]),4&n&&(a.step=e[2]),t.$set(a)},i(e){n||(no(t.$$.fragment,e),n=!0)},o(e){ao(t.$$.fragment,e),n=!1},d(e){so(t,e)}}}function Ro(e){let t,n;return t=new wo({props:{step:e[2]}}),{c(){oo(t.$$.fragment)},m(e,a){io(t,e,a),n=!0},p(e,n){const a={};4&n&&(a.step=e[2]),t.$set(a)},i(e){n||(no(t.$$.fragment,e),n=!0)},o(e){ao(t.$$.fragment,e),n=!1},d(e){so(t,e)}}}function zo(e){let t,n,a,r,o=!Un(e[2].options.title)||e[2].options.cancelIcon&&e[2].options.cancelIcon.enabled,i=!Un(e[2].options.text),s=Array.isArray(e[2].options.buttons)&&e[2].options.buttons.length,l=o&&Oo(e),c=i&&To(e),d=s&&Ro(e);return{c(){t=Er("div"),l&&l.c(),n=Fr(),c&&c.c(),a=Fr(),d&&d.c(),Nr(t,"class","shepherd-content")},m(e,o){kr(e,t,o),l&&l.m(t,null),Pr(t,n),c&&c.m(t,null),Pr(t,a),d&&d.m(t,null),r=!0},p(e,[r]){4&r&&(o=!Un(e[2].options.title)||e[2].options.cancelIcon&&e[2].options.cancelIcon.enabled),o?l?(l.p(e,r),4&r&&no(l,1)):(l=Oo(e),l.c(),no(l,1),l.m(t,n)):l&&(eo(),ao(l,1,1,(()=>{l=null})),to()),4&r&&(i=!Un(e[2].options.text)),i?c?(c.p(e,r),4&r&&no(c,1)):(c=To(e),c.c(),no(c,1),c.m(t,a)):c&&(eo(),ao(c,1,1,(()=>{c=null})),to()),4&r&&(s=Array.isArray(e[2].options.buttons)&&e[2].options.buttons.length),s?d?(d.p(e,r),4&r&&no(d,1)):(d=Ro(e),d.c(),no(d,1),d.m(t,null)):d&&(eo(),ao(d,1,1,(()=>{d=null})),to())},i(e){r||(no(l),no(c),no(d),r=!0)},o(e){ao(l),ao(c),ao(d),r=!1},d(e){e&&_r(t),l&&l.d(),c&&c.d(),d&&d.d()}}}function Mo(e,t,n){let{descriptionId:a,labelId:r,step:o}=t;return e.$$set=e=>{"descriptionId"in e&&n(0,a=e.descriptionId),"labelId"in e&&n(1,r=e.labelId),"step"in e&&n(2,o=e.step)},[a,r,o]}class Vo extends co{constructor(e){super(),lo(this,e,Mo,zo,Ar,{descriptionId:0,labelId:1,step:2})}}function Bo(e){let t;return{c(){t=Er("div"),Nr(t,"class","shepherd-arrow"),Nr(t,"data-popper-arrow","")},m(e,n){kr(e,t,n)},d(e){e&&_r(t)}}}function Ho(e){let t,n,a,r,o,i,s,l,c=e[4].options.arrow&&e[4].options.attachTo&&e[4].options.attachTo.element&&e[4].options.attachTo.on&&Bo();a=new Vo({props:{descriptionId:e[2],labelId:e[3],step:e[4]}});let d=[{"aria-describedby":r=Un(e[4].options.text)?null:e[2]},{"aria-labelledby":o=e[4].options.title?e[3]:null},e[1],{open:"true"}],u={};for(let h=0;h<d.length;h+=1)u=wr(u,d[h]);return{c(){t=Er("dialog"),c&&c.c(),n=Fr(),oo(a.$$.fragment),Tr(t,u),Rr(t,"shepherd-has-cancel-icon",e[5]),Rr(t,"shepherd-has-title",e[6]),Rr(t,"shepherd-element",!0)},m(r,o){kr(r,t,o),c&&c.m(t,null),Pr(t,n),io(a,t,null),e[13](t),i=!0,s||(l=Lr(t,"keydown",e[7]),s=!0)},p(e,[s]){e[4].options.arrow&&e[4].options.attachTo&&e[4].options.attachTo.element&&e[4].options.attachTo.on?c||(c=Bo(),c.c(),c.m(t,n)):c&&(c.d(1),c=null);const l={};4&s&&(l.descriptionId=e[2]),8&s&&(l.labelId=e[3]),16&s&&(l.step=e[4]),a.$set(l),Tr(t,u=function(e,t){const n={},a={},r={$$scope:1};let o=e.length;for(;o--;){const i=e[o],s=t[o];if(s){for(const e in i)e in s||(a[e]=1);for(const e in s)r[e]||(n[e]=s[e],r[e]=1);e[o]=s}else for(const e in i)r[e]=1}for(const i in a)i in n||(n[i]=void 0);return n}(d,[(!i||20&s&&r!==(r=Un(e[4].options.text)?null:e[2]))&&{"aria-describedby":r},(!i||24&s&&o!==(o=e[4].options.title?e[3]:null))&&{"aria-labelledby":o},2&s&&e[1],{open:"true"}])),Rr(t,"shepherd-has-cancel-icon",e[5]),Rr(t,"shepherd-has-title",e[6]),Rr(t,"shepherd-element",!0)},i(e){i||(no(a.$$.fragment,e),i=!0)},o(e){ao(a.$$.fragment,e),i=!1},d(n){n&&_r(t),c&&c.d(),so(a),e[13](null),s=!1,l()}}}function Uo(e){return e.split(" ").filter((e=>!!e.length))}function qo(e,t,n){let a,r,o,{classPrefix:i,element:s,descriptionId:l,firstFocusableElement:c,focusableElements:d,labelId:u,lastFocusableElement:h,step:p,dataStepId:f}=t;var m;return m=()=>{n(1,f={[`data-${i}shepherd-step-id`]:p.id}),n(9,d=s.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]')),n(8,c=d[0]),n(10,h=d[d.length-1])},Vr().$$.on_mount.push(m),Br((()=>{o!==p.options.classes&&(function(e){if(Hn(e)){const t=Uo(e);t.length&&s.classList.remove(...t)}}(o),o=p.options.classes,function(e){if(Hn(e)){const t=Uo(e);t.length&&s.classList.add(...t)}}(o))})),e.$$set=e=>{"classPrefix"in e&&n(11,i=e.classPrefix),"element"in e&&n(0,s=e.element),"descriptionId"in e&&n(2,l=e.descriptionId),"firstFocusableElement"in e&&n(8,c=e.firstFocusableElement),"focusableElements"in e&&n(9,d=e.focusableElements),"labelId"in e&&n(3,u=e.labelId),"lastFocusableElement"in e&&n(10,h=e.lastFocusableElement),"step"in e&&n(4,p=e.step),"dataStepId"in e&&n(1,f=e.dataStepId)},e.$$.update=()=>{16&e.$$.dirty&&(n(5,a=p.options&&p.options.cancelIcon&&p.options.cancelIcon.enabled),n(6,r=p.options&&p.options.title))},[s,f,l,u,p,a,r,e=>{const{tour:t}=p;switch(e.keyCode){case 9:if(0===d.length){e.preventDefault();break}e.shiftKey?(document.activeElement===c||document.activeElement.classList.contains("shepherd-element"))&&(e.preventDefault(),h.focus()):document.activeElement===h&&(e.preventDefault(),c.focus());break;case 27:t.options.exitOnEsc&&(e.preventDefault(),e.stopPropagation(),p.cancel());break;case 37:t.options.keyboardNavigation&&(e.preventDefault(),e.stopPropagation(),t.back());break;case 39:t.options.keyboardNavigation&&(e.preventDefault(),e.stopPropagation(),t.next())}},c,d,h,i,()=>s,function(e){Ur[e?"unshift":"push"]((()=>{s=e,n(0,s)}))}]}class jo extends co{constructor(e){super(),lo(this,e,qo,Ho,Ar,{classPrefix:11,element:0,descriptionId:2,firstFocusableElement:8,focusableElements:9,labelId:3,lastFocusableElement:10,step:4,dataStepId:1,getElement:12})}get getElement(){return this.$$.ctx[12]}}class $o extends qn{constructor(e,t={}){return super(),this._resolvedAttachTo=void 0,this._resolvedExtraHighlightElements=void 0,this.classPrefix=void 0,this.el=void 0,this.target=void 0,this.tour=void 0,this.tour=e,this.classPrefix=this.tour.options?oa(this.tour.options.classPrefix):"",this.styles=e.styles,this._resolvedAttachTo=null,ra(this),this._setOptions(t),this}cancel(){this.tour.cancel(),this.trigger("cancel")}complete(){this.tour.complete(),this.trigger("complete")}destroy(){this.cleanup&&this.cleanup(),this.cleanup=null,Vn(this.el)&&(this.el.remove(),this.el=null),this._updateStepTargetOnHide(),this.trigger("destroy")}getTour(){return this.tour}hide(){var e;null==(e=this.tour.modal)||e.hide(),this.trigger("before-hide"),this.el&&(this.el.hidden=!0),this._updateStepTargetOnHide(),this.trigger("hide")}_resolveExtraHiglightElements(){return this._resolvedExtraHighlightElements=this.options.extraHighlights?this.options.extraHighlights.flatMap((e=>Array.from(document.querySelectorAll(e)))):[],this._resolvedExtraHighlightElements}_resolveAttachToOptions(){return this._resolvedAttachTo=function(e){const t=e.options.attachTo||{},n=Object.assign({},t);if(Bn(n.element)&&(n.element=n.element.call(e)),Hn(n.element)){try{n.element=document.querySelector(n.element)}catch(a){}n.element}return n}(this),this._resolvedAttachTo}_getResolvedAttachToOptions(){return null===this._resolvedAttachTo?this._resolveAttachToOptions():this._resolvedAttachTo}isOpen(){return Boolean(this.el&&!this.el.hidden)}show(){return Bn(this.options.beforeShowPromise)?Promise.resolve(this.options.beforeShowPromise()).then((()=>this._show())):Promise.resolve(this._show())}updateStepOptions(e){Object.assign(this.options,e),this.shepherdElementComponent&&this.shepherdElementComponent.$set({step:this})}getElement(){return this.el}getTarget(){return this.target}_createTooltipContent(){const e=`${this.id}-description`,t=`${this.id}-label`;return this.shepherdElementComponent=new jo({target:this.tour.options.stepsContainer||document.body,props:{classPrefix:this.classPrefix,descriptionId:e,labelId:t,step:this,styles:this.styles}}),this.shepherdElementComponent.getElement()}_scrollTo(e){const{element:t}=this._getResolvedAttachToOptions();Bn(this.options.scrollToHandler)?this.options.scrollToHandler(t):t instanceof Element&&"function"==typeof t.scrollIntoView&&t.scrollIntoView(e)}_getClassOptions(e){const t=this.tour&&this.tour.options&&this.tour.options.defaultStepOptions,n=e.classes?e.classes:"",a=t&&t.classes?t.classes:"",r=[...n.split(" "),...a.split(" ")],o=new Set(r);return Array.from(o).join(" ").trim()}_setOptions(e={}){let t=this.tour&&this.tour.options&&this.tour.options.defaultStepOptions;t=ta({},t||{}),this.options=Object.assign({arrow:!0},t,e,function(e,t){return{floatingUIOptions:ta(e.floatingUIOptions||{},t.floatingUIOptions||{})}}(t,e));const{when:n}=this.options;this.options.classes=this._getClassOptions(e),this.destroy(),this.id=this.options.id||`step-${sa()}`,n&&Object.keys(n).forEach((e=>{this.on(e,n[e],this)}))}_setupElements(){Un(this.el)||this.destroy(),this.el=this._createTooltipContent(),this.options.advanceOn&&function(e){const{event:t,selector:n}=e.options.advanceOn||{};if(t){const a=function(e,t){return n=>{if(e.isOpen()){const a=e.el&&n.currentTarget===e.el;(!Un(t)&&n.currentTarget.matches(t)||a)&&e.tour.next()}}}(e,n);let r=null;if(!Un(n)&&(r=document.querySelector(n),!r))return;r?(r.addEventListener(t,a),e.on("destroy",(()=>r.removeEventListener(t,a)))):(document.body.addEventListener(t,a,!0),e.on("destroy",(()=>document.body.removeEventListener(t,a,!0))))}}(this),yr(this)}_show(){var e;this.trigger("before-show"),this._resolveAttachToOptions(),this._resolveExtraHiglightElements(),this._setupElements(),this.tour.modal||this.tour.setupModal(),null==(e=this.tour.modal)||e.setupForStep(this),this._styleTargetElementForStep(this),this.el&&(this.el.hidden=!1),this.options.scrollTo&&setTimeout((()=>{this._scrollTo(this.options.scrollTo)})),this.el&&(this.el.hidden=!1);const t=this.shepherdElementComponent.getElement(),n=this.target||document.body,a=this._resolvedExtraHighlightElements;n.classList.add(`${this.classPrefix}shepherd-enabled`),n.classList.add(`${this.classPrefix}shepherd-target`),t.classList.add("shepherd-enabled"),null==a||a.forEach((e=>{e.classList.add(`${this.classPrefix}shepherd-enabled`),e.classList.add(`${this.classPrefix}shepherd-target`)})),this.trigger("show")}_styleTargetElementForStep(e){const t=e.target,n=e._resolvedExtraHighlightElements;if(!t)return;const a=e.options.highlightClass;a&&(t.classList.add(a),null==n||n.forEach((e=>e.classList.add(a)))),t.classList.remove("shepherd-target-click-disabled"),null==n||n.forEach((e=>e.classList.remove("shepherd-target-click-disabled"))),!1===e.options.canClickTarget&&(t.classList.add("shepherd-target-click-disabled"),null==n||n.forEach((e=>e.classList.add("shepherd-target-click-disabled"))))}_updateStepTargetOnHide(){const e=this.target||document.body,t=this._resolvedExtraHighlightElements,n=this.options.highlightClass;n&&(e.classList.remove(n),null==t||t.forEach((e=>e.classList.remove(n)))),e.classList.remove("shepherd-target-click-disabled",`${this.classPrefix}shepherd-enabled`,`${this.classPrefix}shepherd-target`),null==t||t.forEach((e=>{e.classList.remove("shepherd-target-click-disabled",`${this.classPrefix}shepherd-enabled`,`${this.classPrefix}shepherd-target`)}))}}function Go(e){let t,n,a,r,o;return{c(){t=Cr("svg"),n=Cr("path"),Nr(n,"d",e[2]),Nr(t,"class",a=(e[1]?"shepherd-modal-is-visible":"")+" shepherd-modal-overlay-container")},m(a,i){kr(a,t,i),Pr(t,n),e[11](t),r||(o=Lr(t,"touchmove",e[3]),r=!0)},p(e,[r]){4&r&&Nr(n,"d",e[2]),2&r&&a!==(a=(e[1]?"shepherd-modal-is-visible":"")+" shepherd-modal-overlay-container")&&Nr(t,"class",a)},i:br,o:br,d(n){n&&_r(t),e[11](null),r=!1,o()}}}function Jo(e){if(!e)return null;const t=e instanceof HTMLElement&&window.getComputedStyle(e).overflowY;return"hidden"!==t&&"visible"!==t&&e.scrollHeight>=e.clientHeight?e:Jo(e.parentElement)}function Ko(e,t){const n=e.getBoundingClientRect();let a=n.y||n.top,r=n.bottom||a+n.height;if(t){const e=t.getBoundingClientRect(),n=e.y||e.top,o=e.bottom||n+e.height;a=Math.max(a,n),r=Math.min(r,o)}return{y:a,height:Math.max(r-a,0)}}function Wo(e,t,n){let a,r,{element:o,openingProperties:i}=t,s=!1;function l(){n(4,i=[{width:0,height:0,x:0,y:0,r:0}])}function c(){n(1,s=!1),p()}function d(e=0,t=0,a=0,r=0,o,s,c){if(s){const l=[s,...c||[]];n(4,i=[]);for(const n of l){if(!n)continue;if(l.indexOf(n)!==l.lastIndexOf(n))continue;const{y:s,height:c}=Ko(n,o),{x:d,width:u,left:h}=n.getBoundingClientRect();l.some((e=>{if(e===n)return!1;const t=e.getBoundingClientRect();return d>=t.left&&d+u<=t.right&&s>=t.top&&s+c<=t.bottom}))||i.push({width:u+2*e,height:c+2*e,x:(d||h)+a-e,y:s+r-e,r:t})}}else l()}function u(){n(1,s=!0)}l();const h=e=>{e.preventDefault()};function p(){a&&(cancelAnimationFrame(a),a=void 0),window.removeEventListener("touchmove",h,{passive:!1})}return e.$$set=e=>{"element"in e&&n(0,o=e.element),"openingProperties"in e&&n(4,i=e.openingProperties)},e.$$.update=()=>{16&e.$$.dirty&&n(2,r=function(e){let t="";const{innerWidth:n,innerHeight:a}=window;return e.forEach((e=>{const{width:n,height:a,x:r=0,y:o=0,r:i=0}=e,{topLeft:s=0,topRight:l=0,bottomRight:c=0,bottomLeft:d=0}="number"==typeof i?{topLeft:i,topRight:i,bottomRight:i,bottomLeft:i}:i;t+=`M${r+s},${o}      a${s},${s},0,0,0-${s},${s}      V${a+o-d}      a${d},${d},0,0,0,${d},${d}      H${n+r-c}      a${c},${c},0,0,0,${c}-${c}      V${o+l}      a${l},${l},0,0,0-${l}-${l}      Z`})),`M${n},${a}          H0          V0          H${n}          V${a}          Z          ${t}`.replace(/\s/g,"")}(i))},[o,s,r,e=>{e.stopPropagation()},i,()=>o,l,c,d,function(e){p(),e.tour.options.useModalOverlay?(function(e){const{modalOverlayOpeningPadding:t,modalOverlayOpeningRadius:n,modalOverlayOpeningXOffset:r=0,modalOverlayOpeningYOffset:o=0}=e.options,i=function(e){let t={top:0,left:0};if(!e)return t;let n=e.ownerDocument.defaultView;for(;n!==window.top;){var a;const e=null==(a=n)?void 0:a.frameElement;if(e){var r,o;const n=e.getBoundingClientRect();t.top+=n.top+(null!=(r=n.scrollTop)?r:0),t.left+=n.left+(null!=(o=n.scrollLeft)?o:0)}n=n.parent}return t}(e.target),s=Jo(e.target),l=()=>{a=void 0,d(t,n,r+i.left,o+i.top,s,e.target,e._resolvedExtraHighlightElements),a=requestAnimationFrame(l)};l(),window.addEventListener("touchmove",h,{passive:!1})}(e),u()):c()},u,function(e){Ur[e?"unshift":"push"]((()=>{o=e,n(0,o)}))}]}class Zo extends co{constructor(e){super(),lo(this,e,Wo,Go,Ar,{element:0,openingProperties:4,getElement:5,closeModalOpening:6,hide:7,positionModal:8,setupForStep:9,show:10})}get getElement(){return this.$$.ctx[5]}get closeModalOpening(){return this.$$.ctx[6]}get hide(){return this.$$.ctx[7]}get positionModal(){return this.$$.ctx[8]}get setupForStep(){return this.$$.ctx[9]}get show(){return this.$$.ctx[10]}}const Qo=new class extends qn{constructor(){super(),this.activeTour=void 0,ra(this)}},Yo="undefined"==typeof window;Qo.Step=Yo?class{constructor(e){}}:$o,Qo.Tour=Yo?class{constructor(e,t){}}:class extends qn{constructor(e={}){return super(),this.trackedEvents=["active","cancel","complete","show"],this.classPrefix=void 0,this.currentStep=void 0,this.focusedElBeforeOpen=void 0,this.id=void 0,this.modal=void 0,this.options=void 0,this.steps=void 0,ra(this),this.options=Object.assign({},{exitOnEsc:!0,keyboardNavigation:!0},e),this.classPrefix=oa(this.options.classPrefix),this.steps=[],this.addSteps(this.options.steps),["active","cancel","complete","inactive","show","start"].map((e=>{(e=>{this.on(e,(t=>{(t=t||{}).tour=this,Qo.trigger(e,t)}))})(e)})),this._setTourID(e.id),this}addStep(e,t){let n=e;return n instanceof $o?n.tour=this:n=new $o(this,n),Un(t)?this.steps.push(n):this.steps.splice(t,0,n),n}addSteps(e){return Array.isArray(e)&&e.forEach((e=>{this.addStep(e)})),this}back(){const e=this.steps.indexOf(this.currentStep);this.show(e-1,!1)}async cancel(){if(this.options.confirmCancel){const e=this.options.confirmCancelMessage||"Are you sure you want to stop the tour?";let t;t=Bn(this.options.confirmCancel)?await this.options.confirmCancel():window.confirm(e),t&&this._done("cancel")}else this._done("cancel")}complete(){this._done("complete")}getById(e){return this.steps.find((t=>t.id===e))}getCurrentStep(){return this.currentStep}hide(){const e=this.getCurrentStep();if(e)return e.hide()}isActive(){return Qo.activeTour===this}next(){const e=this.steps.indexOf(this.currentStep);e===this.steps.length-1?this.complete():this.show(e+1,!0)}removeStep(e){const t=this.getCurrentStep();this.steps.some(((t,n)=>{if(t.id===e)return t.isOpen()&&t.hide(),t.destroy(),this.steps.splice(n,1),!0})),t&&t.id===e&&(this.currentStep=void 0,this.steps.length?this.show(0):this.cancel())}show(e=0,t=!0){const n=Hn(e)?this.getById(e):this.steps[e];n&&(this._updateStateBeforeShow(),Bn(n.options.showOn)&&!n.options.showOn()?this._skipStep(n,t):(this.currentStep=n,this.trigger("show",{step:n,previous:this.currentStep}),n.show()))}async start(){this.trigger("start"),this.focusedElBeforeOpen=document.activeElement,this.currentStep=null,this.setupModal(),this._setupActiveTour(),this.next()}_done(e){const t=this.steps.indexOf(this.currentStep);if(Array.isArray(this.steps)&&this.steps.forEach((e=>e.destroy())),function(e){if(e){const{steps:t}=e;t.forEach((e=>{e.options&&!1===e.options.canClickTarget&&e.options.attachTo&&(Vn(e.target)&&e.target.classList.remove("shepherd-target-click-disabled"),e._resolvedExtraHighlightElements&&e._resolvedExtraHighlightElements.forEach((e=>{Vn(e)&&e.classList.remove("shepherd-target-click-disabled")})))}))}}(this),this.trigger(e,{index:t}),Qo.activeTour=null,this.trigger("inactive",{tour:this}),this.modal&&this.modal.hide(),("cancel"===e||"complete"===e)&&this.modal){const e=document.querySelector(".shepherd-modal-overlay-container");e&&(e.remove(),this.modal=null)}Vn(this.focusedElBeforeOpen)&&this.focusedElBeforeOpen.focus()}_setupActiveTour(){this.trigger("active",{tour:this}),Qo.activeTour=this}setupModal(){this.modal=new Zo({target:this.options.modalContainer||document.body,props:{styles:this.styles}})}_skipStep(e,t){const n=this.steps.indexOf(e);if(n===this.steps.length-1)this.complete();else{const e=t?n+1:n-1;this.show(e,t)}}_updateStateBeforeShow(){this.currentStep&&this.currentStep.hide(),this.isActive()||this._setupActiveTour()}_setTourID(e){const t=this.options.tourName||"tour",n=e||sa();this.id=`${t}--${n}`}};const Xo={en:JSON.parse(JSON.stringify({topbar:{appSubtitle:"Secure requisition form builder",aria:{themeToggleLight:"Switch to Light Theme",themeToggleDark:"Switch to Dark Theme",reset:"Reset Application",faq:"Open FAQ",tour:"Start Guided Tour",copyUrl:"Copy URL",copyEncryptedUrl:"Copy Encrypted URL",pasteData:"Paste and Import Data",saveData:"Save Data",loadData:"Load Data",generatePdf:"Generate PDF",moreActions:"More Actions",toggleLanguage:"Switch Language between German and English"},tooltips:{themeToggleLight:"Switch to Light Theme",themeToggleDark:"Switch to Dark Theme",reset:"Reset Application",faq:"FAQ",tour:"Start Guided Tour",copyUrl:"Copy URL",copyEncryptedUrl:"Copy Encrypted URL",pasteData:"Paste Data",saveData:"Save Data",loadData:"Load Data",generatePdf:"Generate PDF",toggleLanguage:"Switch Language (DE/EN)"},menu:{reset:"Reset Application",faq:"FAQ",tour:"Start Guided Tour",copyUrl:"Copy URL",copyEncryptedUrl:"Copy Encrypted URL",pasteData:"Paste Data",saveData:"Save Data",loadData:"Load Data",generatePdf:"Generate PDF",toggleLanguage:"Switch Language"}},patientForm:{title:"Patient Details",labels:{givenName:"Given Name *",familyName:"Family Name *",birthdate:"Birthdate *",sex:"Sex *",insurance:"Insurance *",physicianName:"Physician Name *",familyHistory:"Family History",parentalConsanguinity:"Parental Consanguinity",diagnosis:"Diagnosis / Suspicion *",orderingDate:"Ordering Date",consent:"Consent",consentGivenBy:"Consent Given By",consentDate:"Consent Date",consentSecondaryFindings:"Consent to receive secondary findings?",consentMaterial:"Allow use of material for quality assurance?",consentExtendedStorage:"Store results beyond 10 years (max. 30 years)?",consentResearch:"Use for research/quality assurance purposes?",requestVariantSegregation:"Request Variant Segregation",variantDetails:"Variant Details"},hints:{variantDetails:"Provide details for the variant segregation request"},options:{sex:{male:"Male",female:"Female",undetermined:"Undetermined"},familyHistory:{conspicuous:"Conspicuous",inconspicuous:"Inconspicuous",unknown:"Unknown"},consanguinity:{yes:"Yes",no:"No"},consent:{provided:"Already Provided",fill:"Fill Form"},yesNo:{yes:"Yes",no:"No"}}},phenotypeSelector:{toggleButton:{hide:"Hide Phenotype Options",add:"Add Phenotypes"},panelTitle:"Select Phenotype States",radioLabels:{noInput:"No Input",present:"Present",absent:"Absent"},noPhenotypesMessage:"No predefined phenotypes available for this category."},selectedPanelsSummary:{title:"Selected Panels:"},testSelector:{title:"Select Panels / Tests",tabs:{categorySelection:"Category Selection",search:"Search"},labels:{category:"Category",selectPanels:"Select Panels",searchPlaceholder:"Type a panel or gene name"}},footer:{versions:{app:"App:",testSchema:"Test schema:",pdfSchema:"PDF schema:"},tooltips:{disclaimerAcknowledged:"Disclaimer Acknowledged:",toggleLogViewer:"Toggle Log Viewer",githubRepo:"GitHub Repository",license:"License (MIT)",wiki:"Wiki / Documentation"},ariaLabels:{reopenDisclaimer:"Disclaimer Acknowledged - Click to reopen",toggleLogViewer:"Toggle Log Viewer",githubRepo:"GitHub Repository",licenseInfo:"License Information",wikiDocs:"Wiki Documentation"}},pasteDataModal:{title:"Paste and Import Data",instructions:"Paste your data in the text area below. The data should be formatted as key-value pairs, with each pair on a new line and separated by a colon.",labels:{pasteArea:"Paste your data here"},placeholders:{pasteArea:'First Name: John\nLast Name: Doe\nBirthdate: 1990-01-01\n...\n\nClick "Show Example" for a complete example.'},example:{title:"Example format:",useButton:"Use Example Data",showButton:"Show Example",hideButton:"Hide Example"},alerts:{parseSuccess:'Data successfully parsed! Click "Import Data" to apply these changes.',parseError:"Data could not be parsed. Please check the format."},buttons:{cancel:"Cancel",parse:"Parse Data",import:"Import"},validation:{pasteRequired:"Please paste data before parsing."}},decryptionDialog:{title:"Enter Password for Decryption",labels:{password:"Password"},buttons:{cancel:"Cancel",confirm:"Confirm"}},encryptionDialog:{title:"Enter Password for Encryption",labels:{password:"Password"},buttons:{cancel:"Cancel",confirm:"Confirm"}},faqDialog:{title:"Frequently Asked Questions",searchLabel:"Search FAQs",noResults:"No FAQs match your search criteria.",uncategorized:"Uncategorized",buttons:{close:"Close"}},loadDataDialog:{title:"Load Form Data",instruction:"Select a JSON file to import:",labels:{fileInput:"Select file"},validation:{fileRequired:"Please select a file"},buttons:{cancel:"Cancel",import:"Import"}},resetConfirmationDialog:{title:"Reset Application",confirmationText:"Are you sure you want to reset the entire application? This will clear all form data and cannot be undone.",buttons:{cancel:"Cancel",reset:"Reset"}},saveDataDialog:{title:"Export Form Data",instruction:"Save your form data for later use. You can name the file to identify it easily.",labels:{fileName:"File Name"},placeholders:{fileName:"requiform-data"},hints:{fileName:"Filename will be appended with .json"},buttons:{cancel:"Cancel",export:"Export"},defaultFileName:"requiform-data"},logViewer:{title:"Application Logs",emptyState:"No log entries yet.",levels:{debug:"Debug",info:"Info",warn:"Warn",error:"Error"},buttons:{download:"Download Logs",clear:"Clear Logs",close:"Close Logs",toggleDetails:"Toggle Details"}},disclaimer:{title:"Disclaimer",body:"This tool is for non-medical use only. It is not intended to provide medical advice or diagnosis. Please do not enter sensitive personal data.",acknowledgeButton:"I Acknowledge"},pedigreeDrawer:{title:"Pedigree Chart"},app:{includePedigreeChart:"Include Pedigree Chart"},tour:{buttons:{back:"Back",next:"Next",skip:"Skip",start:"Start Tour",finish:"Finish"},welcome:{text:"Welcome to RequiForm! This tour will guide you through the main features."},patientForm:{text:"Start by entering the patient information in this section."},testSelector:{text:"Select the required genetic tests here."},phenotypes:{text:"Add relevant HPO phenotypes for the patient."},topBarActions:{text:"Use the top bar actions like Generate PDF, Copy URL, etc."},generatePdf:{text:"Once the form is complete, generate the PDF request form using this button."},complete:{text:"You have completed the tour! You can restart it anytime from the Help menu."},completed:"Tour completed!",cancelled:"Tour cancelled."},validation:{required:{firstName:"First name is required.",lastName:"Last name is required.",birthdate:"Birthdate is required.",sex:"Sex is required.",insurance:"Insurance information is required.",referrer:"Referring physician is required.",diagnosis:"Diagnosis/Suspicion is required.",phenotypeId:"Phenotype ID is required.",phenotypeStatus:"Phenotype status is required."},invalid:{email:"Invalid email format.",birthdate:"Birthdate must be a valid date (YYYY-MM-DD) not in the future.",hpoIdFormat:"Invalid HPO ID format."},general:{missingData:"Patient data is missing."}}})),de:JSON.parse(JSON.stringify({topbar:{appSubtitle:"Sicherer Anforderungsformular-Generator",aria:{themeToggleLight:"Zu hellem Design wechseln",themeToggleDark:"Zu dunklem Design wechseln",reset:"Anwendung zurücksetzen",faq:"FAQ öffnen",tour:"Geführte Tour starten",copyUrl:"URL kopieren",copyEncryptedUrl:"Verschlüsselte URL kopieren",pasteData:"Daten einfügen und importieren",saveData:"Daten speichern",loadData:"Daten laden",generatePdf:"PDF generieren",moreActions:"Weitere Aktionen",toggleLanguage:"Sprache zwischen Deutsch und Englisch wechseln"},tooltips:{themeToggleLight:"Zu hellem Design wechseln",themeToggleDark:"Zu dunklem Design wechseln",reset:"Anwendung zurücksetzen",faq:"FAQ",tour:"Geführte Tour starten",copyUrl:"URL kopieren",copyEncryptedUrl:"Verschlüsselte URL kopieren",pasteData:"Daten einfügen",saveData:"Daten speichern",loadData:"Daten laden",generatePdf:"PDF generieren",toggleLanguage:"Sprache wechseln (DE/EN)"},menu:{reset:"Anwendung zurücksetzen",faq:"FAQ",tour:"Geführte Tour starten",copyUrl:"URL kopieren",copyEncryptedUrl:"Verschlüsselte URL kopieren",pasteData:"Daten einfügen",saveData:"Daten speichern",loadData:"Daten laden",generatePdf:"PDF generieren",toggleLanguage:"Sprache wechseln"}},patientForm:{title:"Patientendetails",labels:{givenName:"Vorname *",familyName:"Familienname *",birthdate:"Geburtsdatum *",sex:"Geschlecht *",insurance:"Versicherung *",physicianName:"Arztname *",familyHistory:"Familienanamnese",parentalConsanguinity:"Elterliche Konsanguinität",diagnosis:"Diagnose / Verdacht *",orderingDate:"Bestelldatum",consent:"Einwilligung",consentGivenBy:"Einwilligung gegeben von",consentDate:"Datum der Einwilligung",consentSecondaryFindings:"Einwilligung zum Erhalt von Sekundärbefunden?",consentMaterial:"Nutzung des Materials zur Qualitätssicherung erlauben?",consentExtendedStorage:"Ergebnisse länger als 10 Jahre speichern (max. 30 Jahre)?",consentResearch:"Nutzung für Forschungs-/Qualitätssicherungszwecke?",requestVariantSegregation:"Variantensegregation anfordern",variantDetails:"Variantendetails"},hints:{variantDetails:"Details zur Anforderung der Variantensegregation angeben"},options:{sex:{male:"Männlich",female:"Weiblich",undetermined:"Unbestimmt"},familyHistory:{conspicuous:"Auffällig",inconspicuous:"Unauffällig",unknown:"Unbekannt"},consanguinity:{yes:"Ja",no:"Nein"},consent:{provided:"Bereits vorhanden",fill:"Formular ausfüllen"},yesNo:{yes:"Ja",no:"Nein"}}},phenotypeSelector:{toggleButton:{hide:"Phänotyp-Optionen ausblenden",add:"Phänotypen hinzufügen"},panelTitle:"Phänotyp-Zustände auswählen",radioLabels:{noInput:"Keine Angabe",present:"Vorhanden",absent:"Fehlend"},noPhenotypesMessage:"Für diese Kategorie sind keine vordefinierten Phänotypen verfügbar."},selectedPanelsSummary:{title:"Ausgewählte Panels:"},testSelector:{title:"Panels / Tests auswählen",tabs:{categorySelection:"Kategorieauswahl",search:"Suche"},labels:{category:"Kategorie",selectPanels:"Panels auswählen",searchPlaceholder:"Panel- oder Gen-Namen eingeben"}},footer:{versions:{app:"App:",testSchema:"Testschema:",pdfSchema:"PDF-Schema:"},tooltips:{disclaimerAcknowledged:"Haftungsausschluss bestätigt:",toggleLogViewer:"Log-Anzeige umschalten",githubRepo:"GitHub-Repository",license:"Lizenz (MIT)",wiki:"Wiki / Dokumentation"},ariaLabels:{reopenDisclaimer:"Haftungsausschluss bestätigt - Zum erneuten Öffnen klicken",toggleLogViewer:"Log-Anzeige umschalten",githubRepo:"GitHub-Repository",licenseInfo:"Lizenzinformationen",wikiDocs:"Wiki-Dokumentation"}},pasteDataModal:{title:"Daten einfügen und importieren",instructions:"Fügen Sie Ihre Daten in das Textfeld unten ein. Die Daten sollten als Schlüssel-Wert-Paare formatiert sein, wobei jedes Paar in einer neuen Zeile steht und durch einen Doppelpunkt getrennt ist.",labels:{pasteArea:"Fügen Sie Ihre Daten hier ein"},placeholders:{pasteArea:'Vorname: Max\nNachname: Mustermann\nGeburtsdatum: 1990-01-01\n...\n\nKlicken Sie auf "Beispiel anzeigen" für ein vollständiges Beispiel.'},example:{title:"Beispielformat:",useButton:"Beispieldaten verwenden",showButton:"Beispiel anzeigen",hideButton:"Beispiel ausblenden"},alerts:{parseSuccess:'Daten erfolgreich geparst! Klicken Sie auf "Daten importieren", um diese Änderungen anzuwenden.',parseError:"Daten konnten nicht geparst werden. Bitte überprüfen Sie das Format."},buttons:{cancel:"Abbrechen",parse:"Daten parsen",import:"Daten importieren"},validation:{pasteRequired:"Bitte fügen Sie Daten vor dem Parsen ein."}},decryptionDialog:{title:"Passwort zur Entschlüsselung eingeben",labels:{password:"Passwort"},buttons:{cancel:"Abbrechen",confirm:"Bestätigen"}},encryptionDialog:{title:"Passwort zur Verschlüsselung eingeben",labels:{password:"Passwort"},buttons:{cancel:"Abbrechen",confirm:"Bestätigen"}},faqDialog:{title:"Häufig gestellte Fragen",searchLabel:"FAQs durchsuchen",noResults:"Keine FAQs entsprechen Ihren Suchkriterien.",uncategorized:"Unkategorisiert",buttons:{close:"Schließen"}},loadDataDialog:{title:"Formulardaten laden",instruction:"Wählen Sie eine zuvor gespeicherte JSON-Datei aus, um die Formulardaten zu laden.",labels:{fileInput:"JSON-Datei auswählen"},buttons:{cancel:"Abbrechen",import:"Importieren"},validation:{fileRequired:"Bitte wählen Sie eine Datei zum Importieren aus."}},resetConfirmationDialog:{title:"Anwendung zurücksetzen",confirmationText:"Sind Sie sicher, dass Sie die gesamte Anwendung zurücksetzen möchten? Dies löscht alle Formulardaten und kann nicht rückgängig gemacht werden.",buttons:{cancel:"Abbrechen",reset:"Zurücksetzen"}},saveDataDialog:{title:"Formulardaten exportieren",instruction:"Speichern Sie Ihre Formulardaten zur späteren Verwendung. Sie können die Datei benennen, um sie leicht zu identifizieren.",labels:{fileName:"Dateiname"},placeholders:{fileName:"requiform-daten"},hints:{fileName:"An den Dateinamen wird .json angehängt"},buttons:{cancel:"Abbrechen",export:"Exportieren"},defaultFileName:"requiform-daten"},logViewer:{title:"Anwendungsprotokolle",emptyState:"Noch keine Protokolleinträge.",levels:{debug:"Debug",info:"Info",warn:"Warnung",error:"Fehler"},buttons:{download:"Protokolle herunterladen",clear:"Protokolle löschen",close:"Protokolle schließen",toggleDetails:"Details umschalten"}},disclaimer:{title:"Haftungsausschluss",body:"Dieses Werkzeug ist nur für nicht-medizinische Zwecke bestimmt. Es ist nicht dafür gedacht, medizinischen Rat oder Diagnosen zu liefern. Bitte geben Sie keine sensiblen persönlichen Daten ein.",acknowledgeButton:"Ich bestätige"},pedigreeDrawer:{title:"Stammbaumdiagramm"},app:{includePedigreeChart:"Stammbaumdiagramm einschließen"},tour:{buttons:{back:"Zurück",next:"Weiter",skip:"Überspringen",start:"Tour starten",finish:"Beenden"},welcome:{text:"Willkommen bei RequiForm! Diese Tour führt Sie durch die Hauptfunktionen."},patientForm:{text:"Beginnen Sie mit der Eingabe der Patienteninformationen in diesem Abschnitt."},testSelector:{text:"Wählen Sie hier die erforderlichen Gentests aus."},phenotypes:{text:"Fügen Sie relevante HPO-Phänotypen für den Patienten hinzu."},topBarActions:{text:"Nutzen Sie die Aktionen in der oberen Leiste wie PDF generieren, URL kopieren usw."},generatePdf:{text:"Sobald das Formular vollständig ist, generieren Sie das PDF-Anforderungsformular mit dieser Schaltfläche."},complete:{text:"Sie haben die Tour abgeschlossen! Sie können sie jederzeit über das Hilfe-Menü neu starten."},completed:"Tour abgeschlossen!",cancelled:"Tour abgebrochen."},validation:{required:{firstName:"Vorname ist erforderlich.",lastName:"Nachname ist erforderlich.",birthdate:"Geburtsdatum ist erforderlich.",sex:"Geschlecht ist erforderlich.",insurance:"Versicherungsinformationen sind erforderlich.",referrer:"Überweisender Arzt ist erforderlich.",diagnosis:"Diagnose/Verdacht ist erforderlich.",phenotypeId:"Phänotyp-ID ist erforderlich.",phenotypeStatus:"Phänotyp-Status ist erforderlich."},invalid:{email:"Ungültiges E-Mail-Format.",birthdate:"Geburtsdatum muss ein gültiges Datum (JJJJ-MM-TT) sein und darf nicht in der Zukunft liegen.",hpoIdFormat:"Ungültiges HPO-ID-Format."},general:{missingData:"Patientendaten fehlen."}}}))};Yt(Xo.en),Yt(Xo.de);const ei=E({locale:function(){try{const e=localStorage.getItem("userLanguage");if(e&&["en","de"].includes(e))return e;const t=navigator.language.split("-")[0];return["en","de"].includes(t)?t:"en"}catch{return"en"}}(),fallbackLocale:"en",messages:Xo,warnHtmlMessage:!1,escapeParameter:!0});const ti={en:[{category:"General",question:"What is RequiForm?",answer:"RequiForm is a web application designed to help clinicians and researchers easily generate standardized clinical data requisitions, particularly for genetic testing. It focuses on privacy, usability, and adherence to standards like HPO."},{category:"General",question:"Which browsers are supported?",answer:"RequiForm is tested on the latest versions of modern browsers like <strong>Chrome</strong>, <strong>Firefox</strong>, <strong>Edge</strong>, and <strong>Safari</strong>. While it may work on others, using an up-to-date version of these recommended browsers ensures the best experience."},{category:"Data Handling & Security",question:"How is my data handled? Is it secure?",answer:"<strong>All data processing happens entirely in your browser.</strong> Your data <strong>never leaves your device</strong>, and no information is stored on any servers. This client-side approach ensures maximum privacy and security for sensitive information. When using sharing features, data is either encoded directly in the URL or saved locally as a file."},{category:"Data Handling & Security",question:"What encryption is used for sharing?",answer:'The "Share Encrypted Link" option uses <strong>AES-GCM encryption</strong> with a key derived from your chosen password using <strong>PBKDF2</strong>. This is a strong, standard-based encryption method. <em>Remember: the security relies on the strength of your password and keeping it confidential.</em> The specific implementation details can be reviewed in the source code.'},{category:"Data Handling & Security",question:"What data format is used for file import/export?",answer:"The application uses a structured <strong>JSON format</strong> for saving and loading data. This format includes patient information, selected panels, and phenotype data. The exact structure can be inspected by saving the data to a file."},{category:"Data Handling & Security",question:"Can I use RequiForm offline?",answer:"Yes, once the application is loaded in your browser, it can function offline. However, features requiring external resources (like fetching HPO terms if not cached) might be limited without an internet connection."},{category:"Features",question:"How does the HPO term search work?",answer:"You can search for Human Phenotype Ontology (HPO) terms by typing keywords or HPO IDs. The search uses an integrated HPO database to suggest relevant terms. Selecting a term adds it to the patient's phenotype profile."},{category:"Features",question:"Can I customize the generated PDF?",answer:"The PDF layout and content are standardized. While direct customization isn't currently supported, the application includes fields for common requirements. Future versions may offer more branding or layout options."},{category:"Features",question:"How do I share the form data?",answer:"You can share the data in several ways:\n<ul>\n  <li><strong>Copy URL:</strong> Generates a link with the data encoded directly in it (can be long).</li>\n  <li><strong>Copy Encrypted URL:</strong> Generates a link with the data encrypted using a password you provide.</li>\n  <li><strong>Save Data:</strong> Downloads the data as a JSON file.</li>\n</ul>"},{category:"Troubleshooting",question:"The application seems slow or unresponsive.",answer:"Ensure you are using a supported browser and that it's up-to-date. Try clearing your browser's cache or restarting the browser. If the issue persists, check your system's resource usage or contact support if applicable."},{category:"Troubleshooting",question:"I encountered an error message.",answer:"Note down the error message and the steps you took leading up to it. Try refreshing the page. If the error persists, consult the browser's developer console (usually opened with F12) for more details, which might be helpful for debugging."}],de:[{category:"Allgemein",question:"Was ist RequiForm?",answer:"RequiForm ist eine Webanwendung, die Klinikern und Forschern hilft, standardisierte klinische Datenanforderungen, insbesondere für Gentests, einfach zu generieren. Der Fokus liegt auf Datenschutz, Benutzerfreundlichkeit und der Einhaltung von Standards wie HPO."},{category:"Allgemein",question:"Welche Browser werden unterstützt?",answer:"RequiForm wird mit den neuesten Versionen moderner Browser wie <strong>Chrome</strong>, <strong>Firefox</strong>, <strong>Edge</strong> und <strong>Safari</strong> getestet. Obwohl es möglicherweise auch in anderen Browsern funktioniert, gewährleistet die Verwendung einer aktuellen Version dieser empfohlenen Browser das beste Erlebnis."},{category:"Datenverarbeitung & Sicherheit",question:"Wie werden meine Daten gehandhabt? Sind sie sicher?",answer:"<strong>Die gesamte Datenverarbeitung findet ausschließlich in Ihrem Browser statt.</strong> Ihre Daten <strong>verlassen niemals Ihr Gerät</strong>, und es werden keine Informationen auf Servern gespeichert. Dieser clientseitige Ansatz gewährleistet maximale Privatsphäre und Sicherheit für sensible Informationen. Bei der Nutzung von Freigabefunktionen werden Daten entweder direkt in der URL kodiert oder lokal als Datei gespeichert."},{category:"Datenverarbeitung & Sicherheit",question:"Welche Verschlüsselung wird für die Freigabe verwendet?",answer:'Die Option "Verschlüsselten Link teilen" verwendet <strong>AES-GCM-Verschlüsselung</strong> mit einem Schlüssel, der mittels <strong>PBKDF2</strong> aus Ihrem gewählten Passwort abgeleitet wird. Dies ist eine starke, standardbasierte Verschlüsselungsmethode. <em>Denken Sie daran: Die Sicherheit hängt von der Stärke Ihres Passworts und dessen Geheimhaltung ab.</em> Die spezifischen Implementierungsdetails können im Quellcode eingesehen werden.'},{category:"Datenverarbeitung & Sicherheit",question:"Welches Datenformat wird für den Datei-Import/Export verwendet?",answer:"Die Anwendung verwendet ein strukturiertes <strong>JSON-Format</strong> zum Speichern und Laden von Daten. Dieses Format enthält Patienteninformationen, ausgewählte Panels und Phänotypdaten. Die genaue Struktur kann durch Speichern der Daten in eine Datei überprüft werden."},{category:"Datenverarbeitung & Sicherheit",question:"Kann ich RequiForm offline verwenden?",answer:"Ja, sobald die Anwendung in Ihrem Browser geladen ist, kann sie offline funktionieren. Funktionen, die externe Ressourcen erfordern (wie das Abrufen von HPO-Begriffen, wenn nicht zwischengespeichert), können jedoch ohne Internetverbindung eingeschränkt sein."},{category:"Funktionen",question:"Wie funktioniert die HPO-Begriffssuche?",answer:"Sie können nach Begriffen der Human Phenotype Ontology (HPO) suchen, indem Sie Schlüsselwörter oder HPO-IDs eingeben. Die Suche verwendet eine integrierte HPO-Datenbank, um relevante Begriffe vorzuschlagen. Die Auswahl eines Begriffs fügt ihn dem Phänotypprofil des Patienten hinzu."},{category:"Funktionen",question:"Kann ich das generierte PDF anpassen?",answer:"Das PDF-Layout und der Inhalt sind standardisiert. Obwohl eine direkte Anpassung derzeit nicht unterstützt wird, enthält die Anwendung Felder für gängige Anforderungen. Zukünftige Versionen könnten mehr Branding- oder Layout-Optionen bieten."},{category:"Funktionen",question:"Wie teile ich die Formulardaten?",answer:"Sie können die Daten auf verschiedene Arten teilen:\n<ul>\n  <li><strong>URL kopieren:</strong> Generiert einen Link, in dem die Daten direkt kodiert sind (kann lang sein).</li>\n  <li><strong>Verschlüsselte URL kopieren:</strong> Generiert einen Link, in dem die Daten mit einem von Ihnen angegebenen Passwort verschlüsselt sind.</li>\n  <li><strong>Daten speichern:</strong> Lädt die Daten als JSON-Datei herunter.</li>\n</ul>"},{category:"Fehlerbehebung",question:"Die Anwendung scheint langsam oder reagiert nicht.",answer:"Stellen Sie sicher, dass Sie einen unterstützten Browser verwenden und dieser aktuell ist. Versuchen Sie, den Cache Ihres Browsers zu leeren oder den Browser neu zu starten. Wenn das Problem weiterhin besteht, überprüfen Sie die Ressourcennutzung Ihres Systems oder wenden Sie sich gegebenenfalls an den Support."},{category:"Fehlerbehebung",question:"Ich habe eine Fehlermeldung erhalten.",answer:"Notieren Sie sich die Fehlermeldung und die Schritte, die Sie unternommen haben, bevor der Fehler auftrat. Versuchen Sie, die Seite neu zu laden. Wenn der Fehler weiterhin besteht, konsultieren Sie die Entwicklerkonsole des Browsers (normalerweise mit F12 geöffnet) für weitere Details, die bei der Fehlersuche hilfreich sein könnten."}]};const ni={schema:{name:"RequiForm Test Schema",version:"0.1.0"},categories:[{id:"nephrology",title:"Nephrology",titles:{en:"Nephrology",de:"Nephrologie"},tests:[{id:"nephronophthise",name:"Nephronophthise",names:{en:"Nephronophthisis",de:"Nephronophthise"},genes:["INVS","NPHP1 (Inkl. MLPA)","NPHP3","NPHP4","IQCB1","CEP290","GLIS2","TMEM67","RPGRIP1L","NEK8","SDCCAG8","TTC21B","WDR19","ZNF423","CEP164","IFT172","CEP83","DCDC2","MAPKBP1","ANKS6","PAX2","XPNPEP3","ADAMTS9","FAN1","SLC41A1"]},{id:"nephrotisches_syndrom_fsgs_alport",name:"Nephrotisches Syndrom, fokal segmentale Glomerulosklerose (FSGS), Alport Syndrome",names:{en:"Nephrotic Syndrome, Focal Segmental Glomerulosclerosis (FSGS), Alport Syndrome",de:"Nephrotisches Syndrom, fokal segmentale Glomerulosklerose (FSGS), Alport Syndrom"},genes:["AVIL","ACTN4","ANLN","ARHGDIA","CD2AP","COL4A3","COL4A4","COL4A5","COQ2","COQ6","COQ8B","CRB2","CUBN","DGKE","EMP2","FN1","GLA","INF2","ITGA3","KANK2","LAMB2","LMX1B","MAGI2","MYH9","MYO1E","NPHS1","NPHS2","NUP107","NUP205","NUP93","NUP160","NUP85","NUP133","PAX2","PDSS2","PLCE1","PTPRO","SCARB2","SMARCAL1","SGPL1","TBC1D8B","TRPC6","WDR73","WT1","APOL1","CLCN5","LMNA","ALG1","CD151","XPO5","DAAM2","TRIM8","NOS1AP","PRDM15","RCAN1","FAT1","KIRREL1"]},{id:"alport_thin_basement",name:"Alport Syndrom und Nephropathien vom Typ der dünnen Basalmembran",genes:["COL4A3","COL4A4","COL4A5","FN1","CD151","MYH9"]},{id:"senior_loken_syndrome",name:"Senior Løken Syndrom, Nephronophthise mit einer Retinadegeneration",genes:["NPHP1 (Inkl. MLPA)","NPHP3","NPHP4","IQCB1","WDR19","CEP290","SDCCAG8","TRAF3IP1","CEP164","ZNF423","INVS"]},{id:"joubert_syndrome",name:"Joubert Syndrom",genes:["NPHP1 (Inkl. MLPA)","CEP104","TMEM237","ARMC9","PDE6D","ARL13B","CC2D2A","CPLANE1","CEP120","AHI1","CEP41","CSPP1","TMEM67","INPP5E","TCTN3","SUFU","ARL3","TMEM138","TMEM216","CEP290","TCTN1","TCTN2","PIBF1","KIAA0586","KIF7","KIAA0556","ZNF423","RPGRIP1L","TMEM231","TMEM107","B9D1","MKS1","B9D2","OFD1","TTC21B","HYLS1"]},{id:"meckel_gruber_syndrome",name:"Meckel Gruber Syndrom",genes:["B9D1","B9D2","CC2D2A","CEP290","CEP41","CSPP1","KIF14","MKS1","NPHP3","RPGRIP1L","TCTN2","TCTN3","TMEM67","TMEM107","TMEM138","TMEM216","TMEM231","TMEM237","TTC21B","TXNDC15"]},{id:"autosomal_dominant_tubular",name:"Autosomal dominante tubuläre Nierenerkrankung",genes:["UMOD","MUC1 (ohne VNTR)","HNF1B","REN","SEC61A1","PARN"]},{id:"bartter_gitelman",name:"Bartter Syndrom und Gitelman Syndrom",genes:["BSND","CASR","CLCN5","CLCNKA","CLCNKB","CTNS","GNA11","KCNJ10","KCNJ1","MAGED2","SLC12A1","SLC12A3","KCNJ16","EHD1","CLDN10","RRAGD"]},{id:"kidney_stones",name:"Nierensteine (inkl. FHHNC familiäre Hypomagnesiämie mit Hypercalciurie und Nephrocalcinose)",genes:["ADCY10","AGXT","APRT","ATP6V0A4","ATP6V1B1","CA2","CASR","CLCN5","CLCNKB","CLDN2","CLDN16","CLDN19","CNNM2","CYP24A1","FAM20A","GRHPR","HNF4A","HOGA1","HPRT1","ATP1A1","FXYD2","TRPM6","KCNJ1","MAGED2","OCRL","SLC12A1","SLC26A1","SLC22A12","SLC2A9","SLC34A1","SLC34A3","SLC3A1","SLC4A1","SLC7A9","SLC26A6","SLC9A3R1","XDH","EGF"]},{id:"distal_rta",name:"Distale renal-tubuläre Azidose",genes:["SLC4A1","ATP6V1B1","ATP6V0A4","ATP6V1C2","WDR72","FOXI1","SLC4A4","CA2","VPS33B","VIPAS39"]},{id:"complement_diseases",name:"Komplementerkrankungen",genes:["CFH (inkl. MLPA)","CFHR1 (inkl. MLPA)","CFHR3 (inkl. MLPA)","CFI","CD46","CFB","CFD","KCNT2 (inkl. MLPA)","CFHR5 (inkl. MLPA)","C3","THBD","MMACHC","DGKE"]},{id:"kidney_cancer",name:"Nierenkarzinom",genes:["BAP1","CHEK2","DICER1","DIS3L2","FH","FLCN","GPC3","MET","PTEN","SDHB","SDHC","SDHD","SMARCB1","TP53","TSC1","TSC2","VHL","WT1"]},{id:"cakut",name:"CAKUT (Kongenitale Anomalien der Nieren und der ableitenden Harnwege)",genes:["ACE","ACTG2","AGT","BNC2","AGTR1","ANOS1","BMP4","CEP55","CHRM3","CTU2","DSTYK","EYA1","CCNQ","FAT4","FRAS1","FREM1","FREM2","GATA3","GPC3","CHRNA3","GLI3","GRIP1","HNF1B","HPSE2","KIF14","ITGA8","LRIG2","PAX2","PBX1","REN","RET","ROBO1","ROBO2","SALL1","SIX5","UMOD","ZIC3","TBX18","NRIP1","SOX11","SOX17","ZMYM2","NPNT","GFRA1","WNT9B","GREB1L","COL4A1"]},{id:"hypertension",name:"Hypertonie",genes:["ABCC6","CACNA1D","CACNA1H","CLCN2","CUL3","CYP11B1","CYP17A1","ENPP1","HSD11B2","KCNJ5","KLHL3","NF1","NR3C1","NR3C2","PDE3A","PPARG","SCNN1B","SCNN1G","SDHA","SDHAF2","SDHB","SDHC","SDHD","TMEM127","WNK1","WNK4","YY1AP1","CYP11B1","CYP11B2"]},{id:"polycystic_kidney_disease",name:"Polyzystische Nierenerkrankung",genes:["PKD1","PKD2","GANAB","PKHD1","DZIP1L","DNAJB11","ANKS6","UMOD","MUC1 (ohne VNTR)","HNF1B","REN","SEC61A1","BICC1","NPHP3","NEK8","TULP3","ALG8","ALG9","IFT140","FLCN","PRKCSH","SEC63","LRP5"]}],phenotypes:[{id:"vesikoureteraler_reflux",name:"Vesikoureteraler Reflux",hpo:"HP:0012002",description:"Retrograde flow of urine from the bladder into the ureters.",names:{en:"Vesicoureteral reflux",de:"Vesikoureteraler Reflux"},descriptions:{en:"Retrograde flow of urine from the bladder into the ureters.",de:"Rückfluss von Urin aus der Blase in die Harnleiter."}},{id:"megaureter",name:"Megaureter",hpo:"HP:0000078",description:"Abnormally dilated ureter."},{id:"nierenagenesie",name:"Nierenagenesie",hpo:"HP:0000119",description:"Absence of one or both kidneys."},{id:"nierenhypoplasie",name:"Nierenhypoplasie",hpo:"HP:0012563",description:"Underdeveloped kidneys."},{id:"polyzystische_nieren",name:"(Poly-)zystische Nieren",hpo:"HP:0000107",description:"Multiple cysts in the kidneys."},{id:"nierendysplasie",name:"Nierendysplasie",hpo:"HP:0000001",description:"Abnormal kidney shape due to dysplasia."},{id:"nephrocalcinose",name:"Nephrocalcinose",hpo:"HP:0000002",description:"Calcium deposits in the kidneys."},{id:"nephrolithiasis",name:"Nephrolithiasis",hpo:"HP:0000079",description:"Kidney stones."},{id:"nephrotisches_syndrom_fsgs",name:"Nephrotisches Syndrom / FSGS",hpo:"HP:0000093",description:"Nephrotic syndrome with focal segmental glomerulosclerosis."},{id:"schrumpfniere",name:"Schrumpfniere",hpo:"HP:0000095",description:"Shrinkage of the kidneys."},{id:"interstitielle_nephritis",name:"Interstitielle Nephritis",hpo:"HP:0000003",description:"Inflammation of the kidney interstitium."}]},{id:"cardiology",title:"Cardiology",tests:[{id:"lqts",name:"Long QT-Syndrom (LQTS)",genes:["CACNA1C","CALM1","CALM2","CALM3","CAV3","KCNE1","KCNE2","KCNH2","KCNJ2","KCNQ1","SCN5A","TRDN"]},{id:"sqts",name:"Short QT-Syndrom (SQTS)",genes:["CACNA1C","CACNA2D1","CACNB2","KCNH2","KCNJ2","KCNQ1","SCN5A","SLC4A3","SLC22A5"]},{id:"brugada",name:"Brugada-Syndrom (BrS)",genes:["CACNA1C","CACNB2","GPD1L","HCN4","KCND3","KCNE3","SCN1B","SCN3B","SCN5A"]},{id:"arvc",name:"Arrhythmogene rechtsventrikuläre Kardiomyopathie (ARVC)",genes:["CDH2","DES","DSC2","DSG2","DSP","FLNC","JUP","LMNA","PLN","PKP2","TMEM43"]},{id:"cpvt",name:"Catecholaminerge polymorphe ventrikuläre Tachykardie (CPVT)",genes:["CALM1","CALM2","CALM3","CASQ2","KCNJ2","RYR2","TECRL","TRDN"]},{id:"rcm",name:"Restriktive Kardiomyopathie (RCM)",genes:["ACTC1","DES","FLNC","GLA","MYBPC3","MYH7","MYPN","TNNI3","TNNT2","TTN"]},{id:"hcm",name:"Hypertrophe Kardiomyopathie (HCM)",genes:["ACTC1","ACTN2","ALPK3","CAV3","CSRP3","FHOD3","FLNC","GLA","JPH2","KLHL24","LAMP2","MT-TI","MYBPC3","MYH7","MYL2","MYL3","PLN","PRKAG2","TRIM63","TNNC1","TNNI3","TNNT2","TPM1","TTR"]},{id:"dcm",name:"Dilatative Kardiomyopathie (DCM)",genes:["ACTC1","ACTN2","BAG3","CAP2","DES","DMD","DSG2","DSP","EYA4","FLII","FLNC","JPH2","LMNA","MYBPC3","MYH7","NEXN","PLN","PPP1R13L","PRDM16","RAF1","RBM20","RPL3L","SCN5A","TAZ","TNNC1","TNNI3","TNNI3K","TNNT2","TPM1","TTN*","VCL"]}],phenotypes:[{id:"synkopen",name:"Synkopen",hpo:"HP:0001262",description:"Episodes of fainting."},{id:"plotzlicher_herztod",name:"Plötzlicher Herztod / Herzstillstand",hpo:"HP:0001644",description:"Sudden cardiac arrest."}]}]},ai=ni.categories||[],ri={schema:{name:"RequiForm PDF Schema",version:"0.1.0"},header:JSON.parse('{"elements":[{"type":"image","position":{"x":40,"y":30},"size":{"width":225,"height":47},"source":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAcIAAABeCAYAAACwyxTJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAADiwSURBVHhe7Z15fBRF2sd/3TOTO+QOIRADSsIplyggrye4rhcgnuuJuC4IC+HyVUAFuXkFREQkgkAAEQXxwGUXBRZFUQOCBEgicoQAOcl9TObqfv+gn6Km05MDEq7U9/Opz0x3V1c9dT1PVXV1taSqqgqBQCAQCJoosv6EQCAQCARNCWEIBQKBQNCkEYZQIBAIBE0aYQgFAoFA0KQRhlAgEAgETRphCAUCgUDQpJEa+/UJVVVRWlYGa2UlAECSpGrXASAgIAD+/v7VrgsEAoFA0Jg0uiG02WxYs3Yt/rtjByRJqmboVFWFCuDRRx7BwIEDIctikCoQCASCS0ejG0Kr1YrJkydj1apVMJlMhoZQURRMnDgR48aNE4ZQIBAIBJeUS2J1ZFmGyWSCLMs1OoFAIBAILjXC+ggEAoGgSSMMoUAgEAiaNMIQCgQCgaBJIwyhQCAQCJo0whAKBAKBoEkjDKFAIBAImjTCEAoEAoGgSSMMoUAgEAiaNMIQCgQCgaBJIwyhQCAQCJo0whAKBAKBoEkjDKFAIBAImjT1NoSqqrJvCAoEAoHg2oe+EnSt6n63zzCxv0Yfx9W+GwjNT12/FmG1WvHGG28gKSkJsizX+BmmMWPG1DlctwLxIO+5H9XwO4g8iqIA/EeDa/BL4RI1hStoPFRVhd1uR1paGkpKSqpd8/Lywo033oiAgABRRoImBQ1WTp8+jRMZGdV0lqqqiImJQevWrWEymdyuAYCiqufukSRUVVUh9XAq/vgjHaWlpYiMbI5u3boiJiYGFosFuEZ0IDOElHkupxMuRfGYOFVVYTabDb8taERjGEJVVeFyueB0ueBJAlVVYTKZmJz6eHnIqLpcLrhcLv1lhqqqkGUZZrOZhVdTuILGQ1VVFBYW4tVXX8XPP//sVm8URUFoaCiWLVuGdu3aiTISNClIp65evRqLFy+G3W53u+ZyufD3v/8dI0eOhI+Pj9u90AyhqqooLyvD119/jSVLliArKwsulws+Pj7o0qULRo0ahf+57TaY62gHrnTcDKHVasX69etx4MCBasaDRoOyLGPwI4+gd69eMJvNXFDGNIYhtNls2LZtG7797jtINRijW2+9FYMGDWI9F0+QIdy2fTu2/vvf5wysQZgulwu9e/fGw4MHw8fb+5wRNvB3KbHZbCgvL2ejWh6LxYJmzZrVKU+vRvLz8zFs2DDs2rWrmiEMDw/Hxo0b0bFjR8OyFFxaSAGXlJQY1tXaoA6oLMuwWCywWCxu+oTasCjr83mdmJiIOXPmVDOETqcTCQkJePXVVw0NId2/evVqzJ07F4WFhdXyuVOnTpg3bx569OhxTegXt6nR0tJSjBkzBps3bzasUKo2ypozZw6efvrpWg0MGskQVlZWYuHChViwYAEgSZANZAWAIUOGYPr06fD29tZfqoaqqnjvvfcwd+5cOBwO/WUAgNPpxDPPPINZs2bB39//ijCEBw4cwPLly1FSUgJJklhFVVUVnTt3xogRIxAYGKi/7ZogPz8fw4cPr9EQdujQoVqdE1x6VFXFqVOnsGjRIuTm5tapnfP4+PrCz9cXgYGBiIiMROvYWLRp0watYmLQLDCQlbEo63PUZAhdLhdGjx6NV1991VA3qqqKgoICDB061G22hfSLqs0Kjhw5EuPHjzc0plcbhrWRRoNG7kpDqkHeC0UfjlGYkiRddiMIAHn5+di2bRu2bNmCLVu24N///je2bNmCb775BsnJyR6N+rVCbeVc23XBpaO0tBQ7d+7EN998g3/961+sztbFbfr8c6xevRrvv/8+3po6Ff/4xz/w2GOPYcjzz2P+ggVIS0uDzWbTRym4QHJzc3HixAmA04eEJElwOh34/fffYbVaubuuXqoZQr3iN3KXG708Nbn6oL/Xk7ui0BYDybIMWZbZc1GTyVTvXrdA0JhQPeXraG2Or9dms5mtT3C5XCgoKMBPP/2EdxcuxCuvvIKNGzeisrLy3KhFH7mgXqiqwqawaRTofv2cn2sFoSmvcjwZ6SvOYAsEGvq6WhO8X76ek4GUZRkOhwPJycmYNGkS3n33XeTn53tcRCeoGxERkWjZsmU1A0hlYTab0b59h2tiWhTCEAoEgssFP9KgtQI1OfLP30PIsgyr1YqVK1fi888/h91uNxzJCOqAJCE0NBQPPPAAAgMD3fKeyqJVq1a455574OXlpb/7qkQYQoFAcFmhxRexsbFo165dNdemTRu0atWKrYAmxaxHlmUUFhZixYoVSE1NPW8w9R4FtWKxWPDMM89g9OjRCA8PhyzLUFUVFosFHTp0wMSJE9G7d+9r5vHLtZEKgUBw1UKrfKdNm4YVK1ZUc8uXL8eSJUswb948jBkzBl27doXJZHIzhjRlJ8syzpw5gx07dojFMxcITSuHhobixRdfxIJ33sGECRPw0ksvYfLkyVi4cCHuu+++a2Y0CGEIBZcS/bSWUa/+UqMayKI24iiC4mM7H9H5y5gXjZneumKxWBAbG4u4uLhq7sbOndGrVy8MGDgQ48aNwwcffIC//e1v8PLygqotFuNxOBzYvXs3ioqKcCWs7G5MGrPsJElCYGAg/nrvvRg7dizefPNNDBs2DD169Gi0Z4OXqx0IQyhoEMiY1OR4v5cLVT23opDJpJOLndP8NRT6+HiDSPnB55M+zxoDPh9qco3FhSzuMlssuOGGGzBixAj07fs/AFef+MU0p0+fxtmzZ3V31x193sAory5ROcEobr3T39CASJIEk8kEb29vmLQt2epaXnWGbxv6tHlwDYkwhIIGRdUeqDscDpRXVODs2bPIyclBTk4OcnNzUVRUhEprJVwuV6NU6NpQtW0Ey8rKkJeXx+QqKy2Fw+Fwk6eBm/q5uF0uVFZWuuVLXl4eysrK4HA4PD7/agwofRIAVVFQUVGB/Px85OTkoKioCEoN2w02FPyqUI+QgdNklWUZMTExGDDgIXh7e7uXmea3pKQEZWVlbsFcCIqiwG63o7i4GLm5uW712GG3nysv/U2NiKqqcDidKCkpQW5uLnJzcmGtrGRGpKGpqWzqVHZ1RTr/XraiqrDZbCgsLGJtpLCwEDabDQrtStRQ8WpU21lm7Nix+OabbwwTqGpbrM2ePfuy7ixjtVrZzjKStpTaiOeffx7Tpk0z3D1Bj6qqWLx4MebOnQun06m/DGg7yzz99NOYOXMmAgIC9JcvC9u2bUNCQgLOnj3L8pby9M4770RiYiJCQ0P1t10UvOJRVRUOhwNlZWXIycnBiRMnkJGRgTNnzqCoqAglJSVsZwtJkuDv749mzZqhRVQLxMXHoX379rjuuusQGBh4vhw1pVcb+fn5ePnll/HDDz+41QF65rRh40Z06tgRqrZBd3Z2NlJSUnDw4CGcPJmBouJiuJxOyLKMoKAgtGzZEl27dkXXrl3RqlWrc/VGkkDvatYFyhuJ24WjrKwMWVlZOHz4MP7880+cyjyF4pJiWK1WSJIEs9mMoOBgRISHI75dO7Rv1w433HADgoKC3NpYXWRQFAWFhYUoLi4+f1JLg8ViQfPmzVl7UBQFpaWlSEtLw/79+3H48GEUFBTAZrMhPj4er7zyCiLCwxtE6aiqitTUVLzwwgs4ceIEG1lAkyM2NhZJSUno2LGj232eUBQFv//+O5566ikUFhZWK//g4GB8+OGHuPPOO93u06NCG41wOBwO5Obl4cTx40hJScHJkyeRn5/PtjKUZRn+/v6IiorC9ddfj+7du6N169YICwtjOo6vB56w2+3Iz88/91I6+dPuCwwMREREBCRZBrQ2lp+fjz179iDl4EFknDiBkpISqCrw6KOP4PHHH3fb8vJid5YBgKqqKuTm5cHpcFSTz8/PD5GRkTAZ7DVKuWm32ZCbm3suft39AQEBiIiIYPXA5XKhvLwcR48exaFDh5FyMAV5eXmoKC8HtPiaN49E27Zx6NmzJ2644QYEBwefj5uTwXOOe0YYQg1hCOsOVRmr1YrMzEzs3LkTe/fuxeHDh5GXlwer1eo2uuLLnM7JsgxfPz+0iIrC7bffjoceegi9evWq1472NRnCsLAwbPz8c3Ts0AFnz57Fli1bsHHjRqSlpaG0tBSKtrE8V/2Zgmvfvj0GDhyIwYMHIzw8HFI9er58eFVVVTh48CC+/OIL/LR7NzIzM1FRUXG+V6tBckiSBG9vb4SFheGmm27Cvffei7/85S9oFhQEuY4yVFVV4aOPPsKnn356/qQkQVUUNG8ehVmzZiIuLg5OpxMpKSn4ZP16fPftt8jPz2cK0+VyoWfPnkhKSkJ0dPT5cC6ChjaEAHDkyBE88sgj1bZsU7RN1z9ctgy3/c+56VNPeadSmWmdlqysLOzYsQNffvkl/vzzTxQUFMDpdLqVK0OS4KV1Lm666SY89thj6Nu3LwICAgzrvp4zZ85g1uzZSElJOe9Pk+O+++/HmIQE+Pj6oqK8HP/5z3/w+eefIzk5mRlkimPMmDF47bXX3PRxQxjCgwcPYuasWcjOynIzZKqq4uabb8Ybb7yBkJAQ95u1+1VVxfETJzB1yhSczMx0S5+iqrjrzjvx2muvwc/PDzabDb/t24evvvwSO3bsQG5uLqxVVdB3UCRJgsViQXR0NPr06YOXXnoJ7du3P59uLQ7POe4ZYwsiENRCRUUFFi5ciBdffBEzZszA119/jaNHj6KsrAxOpxOS9lzBk5MkCdbKShw7dgyrV6/G6NGjkZSUhIKCAkBnUC4UVVFw5MgRTJkyBdOnT8cvv/yCktJSqFqHTuZ2LCGZKioqsHfvXsyaNQtTpkxBWlqam+EykkvlFar2m5OTg8TERIwc+U+sWLkSqampKC8vd8sXfqcUk7aLisPhQHZ2Nr755htMnjwZr7/+On7fv99tKtlIBkJVVeTm5iI1NRVpaWlIT09Heloa0tLS8OefR1BVVYXKykp8/fXXGDduHNauWYOsrCw4nU638uGfB11JUNoVRUFlZaXHTqu/vz8C/P31pxksH1UVktap27lzJ0aPHo0pU6bgxx9/RG5eHlzaBvx8eVGZybIMp9OJ06dP4+uvv8b48eOxcOFCnD592q0ueCovh8OBjBMnkHr4MNJSU1k5paamIjsrC4qi4PSpU3jnnXfw+uuvY/v27W51yGw2s431GwOr1YpjR4+eq0eaI/lOnToFVw1T55IkwWaz4dixYyxtdH9aaipOnz5zLn2nT2Px4sVISEhA0urVyMzMhM1mg8lgNyHK75MnT+Kzzz5jgzaHw8Ha34UYQQhDKLgQJEmC1WrFf3fuRHp6Oux2OySDHUDoP6HqphjJn6p9O23evHn45JNP3HqwF4okScjIyMC8efOwadMmlJaWQtJmJIxmJvSyW61WfPnll5gzZw5yc3NrVGjAuZ4ucfbsWSxatAiLFi1CRsYJNp2mn7nglSW4uEm+kpISbNy4EW+99RZSUlJqVDw8fDh653K58O2332LmrFk4fPgwVK1TQPcQFovlijOElMOqNuORcfIkm17W06JFC4SFhetPG2K321nH48cff0RlZeW5/KJnk1r4VAdYeWn3U/7l5uZi2bJlWPTee+dWrNYBiesY8eUkSRKKi4uxZMkSLFu+nE3/6stKlmV4e3sb5sHFYlSHeDk9QfJJmnzGTsKpU6cxb/58LFq0CCdPnjzXKeHynE8Tf47iTklJwdtvv42UlJRqsyz1xXNqBIIasFgs8Pfzq9YoSEm5tG878k7hdggh+MpdWFiIZcuW4ddff72oii1pvdF3Fy7Eli1bzhtgVYWqxc/LojdEJA8ZjeXLl6O4uLhOiyIKCgqwePFirF69GhUVFZA5o0u/FLeR0+eNqqr49ddf8dZbb+GPP/6o2Rhr6JUIOGO7Z89ezJ8/H6cyM1m5Gfn39fO74gwhT0lJCf67YwcqKyvZOSpLWZbRq3cvhIeHAVy+G2G327F161bMmTMHx44dq5YXFKaXlxeaNWuGoKAg+Pv7w2QysTpK/mVZRlVVFdavW4dPPvmE7XtaE55ks1qtWLt2LdZ/+imqqqrc6hFBYfv6+la7djHo80BPTdfqgiRJyM7OwcyZM7BxwwbYbLZq6aN895R/ktZGjx07hqVLlyIvN/eCR4MQhlBwoZjNZvj6+gI64wetYbZo0QLx8fG46aabcMsttyA+Ph5RUVHVFAhVfqrYOTk52Lx580Wt+JMkCRXl5TiQksK+vkEy+vr6IiqqBWJiYrTFCBKbduTvp19VVfHFF19g3759HhsanVcUBd999x02bNjgNkomR3kUHByMzp07o1+/fujfvz9uuukmhIeHuzV8vQy//vorPvvsMzfFXx8kSUJ5eTk+/ngtjh075qZ4VO25Ed9h8blCp0YhSXA6ndi5cye2b99eTVEqioKIiEj079cfPj4+NSpTAMjIyEBiYiJOnz7tVh+hheXv748777oLr7zyCubOnYv58+dj5syZGD58ONq2bcvKlS/nSqsVn376KVJTU93i0qOPj5BlGenp6Vi//lNUVlS4fWaO6pDT6WT11sfHxzCcy40nmSRJwqFDB7Fjxw44HI5z/rQ6qGhponpP9ZG/l8Kl3x9/+gkpKSk1lnNtCEMouCAsFgt8fHzgcrng6+uLuLg4PPbYY5gxYybWrl2Lzz//HBs2bMCaNWuQlJSEDRs2YOPGjVj83mIMHDAQfn5+rCHz1VcFsGvXLhw9erRWJVYT/H2KoiA6OhovvfQSVq1ahc8/34hNmzZh48aNeGfBAjzwwAPw9vZmhhw6Q3TmzBl89tlnNX5yRlVVZGZmYunSpSgoKDAcJQcFBeGJJ57A6tWrsW7dOiQmJmLp0qVYs2YN1qxZg1GjRiEiIoKNDHkZFEXBF198gV9+OTdarm/eSJKE0tJSpKens3TS/cHBwejUqRPuvfdePPjgQ/jrX/+Krl271mkx3MVAaeDTwZ/jnaIosFVV4czp01i1ahVmzZqF3NxcpjDJj5+fH5599hl079692ihDT0VFBT7++GP89ttvbgqWwuvQoQPeeecdfLBkCUaOHIlBgwbhgQcewBNPPIGJEydi2bJleOyxxyBz276p2jdbjx49io0bN9Z7mp/kOHLkCLKzswCu/kiShFatWqFXr1544IEH8OCDD+Huu+9GVFSUPpgrHnoVQpLOdUR9fX3RtWtXDBs+HLNnz8bixYsxa9YsDB06FB07dmR5rEeSJBQWFDCjeqHI4Aqe0B8bwVdSPZ7OG0EVmajPvTz8ffW9X+/f6Phiwm8M9PmkP9ajT8PF4HK5YDKZMGXKFBw/fhwnTpzA7t27sXTpUgwb9g/cfvvtiI+PR8uWLREREYHw8HBER0cjPj4egx8ZjOUfLcfPP/+Mfv36nVPKnGyS1kvfvn2720iNFA3B/+cVGOHSGs3111+PzZs3Y8+ePZg9ezbuvvtuxMXFoXXr1ujYsSOefPJvWLlyJQ4ePIiEhAQWlktbJEHHmzdvxmeffQan0wnFYEozKysLkyZNwuHDh9lIitJkMpnwwgsvYO/evVi8eDF69eqF5s2bIygoCM2aNUNERAR69uyJN998E3v27MG0adOY8ZO1PR4lSUJ2djYmTZqI48eP11qOdJ3u1ftv1aoV5s+fj+PHj+PQoUPYsWMH1q5di1WrVmLdunVISEhgI/6GRl92sizj9OnTGDBgANq3b4/4+Hi0b98e7dq1Q1xcHNq0aYPo6GhER0ejW7dumDx5Ms6cOeOWrubNm2Ps2LHYt28fxo0bBy8vL1Z+VIYUt6Io56bO330XH330kVsekf+5c+di69atGDhwIEJDQ9l5WXsUYLFY0LlzZyxcuBAzZsxg05MUhkv7wvu2bdtYHeHLhJfHqHzomtlsxm233YatW7ciMzMTycnJ2Lx5M1asWIGkpFX4+OOPcccdd7COl1pDG6e49Of0jgyOXk79sf4a73j4OCVdve7UqRM+++wzHDlyBNu2bcOMGTPw4osv4tFHH8WLL76IOXPmYPv27UhOTkb//v3Pd565zoGiKPjhhx9w7NgxuLRZDb0MtSFGhIILwmQy4brrrkOzZs3qXekAICwsDH369GFGg1daiqKgqKiIGSOjnmBNqJrx8fHxweOPP45u3bq5vWPFQ7IHBgZiwIABiIuLg6Io1aZwbTYbjhw5whZnkFKk+0+cOIE///yTNXpqqC6XCzExMXj44Yfh7+/PGq9eIRE+Pj6477770LZtW0DrAJBfmjqu67NCcB1NykdFe7Vg5MiRGDBgAHx8fGDS7dt5OVC0dxoLCgpQVFSEwsJCFBYWoqSkhD1rs1gsMJvNbiOwsLAw9O/fH9OnT8c//vGPWl8VonSWlZXhwIEDqKqqYnkETY62bduiX79+bAs3ckbIsoxu3bqhZcuWbKRNit5ut+OPP/5g0+R1heKTJAldunTBhAkT0LlzZ7epal7mqw1ZW/0ZERGB4cOHo0+fPh7bJ7WVqKgo3H///QgMDGTp5vO0srISVVVVbufrkz/CEArqhaotRlC1+Xs6ritUOWVZRuvWrd1GHVTpFUVhr2Hw1+pL165d8eijj9ao6Clcp9OJtm3b4p577qnmX9Jeek9NTUVJSQlTwqSsVFVFWloacnJyYDab2XlZm5rr27cvOnTo4JY+T/IAQMuWLXHHHXfAy8uLGWUK02q14uDBgx5fG9BDclIZWSwWPPHEE3jiiScQGBjI5LmQ/G1IKH0WiwUWiwWyLDOjR7JRXlN6vLy8cOONN2LgwIHo2bMn65R5Sgtdk7TRdVpaGgsTWvgmkwl33HEHWrRowcpQ1TpWRuGqqorY2FjExMSwjhPfQUpNTUVFRYXhvZ4gv2FhYRg/fjxuvvlmNk1NYdcnvCsNqtODBg3CfffdV629GSHLMrp3744WLVq4lRf9KooCp7Y5Rn30EVH/OwRNHlJGpBxIAdQXHx8fNoVl1BCMztUVh8OBu+66CyEhIW49aR4+fFK8N998MwIDA+FyudwUmqIoOHv2LMrKylhDI4XkdDpx5MiRalukqdooplu3bvD19YWsjWRqa6iSNhLw9fWFqu0qwsd5UnttoD5QmcXExODBBx9kHRBS/pcbqgO0CETiZgj4/CS/DocDLpcLP//8M6ZNm4bx48dj/fr17D3UmlAUBSdOnEBxcTHLV4rH19cXnTt3htlsZueojhvVR0nbBCEyMpIZbVXrJMqyjIKCgnotcKJ7TSYT7rzzTtx0002QOIV/LSBpO0z169cP3t7eHkeDPKqqIigoCOHhxq/EyNoqb5Wb2q0PNbdIgcADvAKpawMlJUHKhQwDOEVN/ngjdCGKwMfHBzfeeCMzJp6gaybtXa42bdogIiKCyUi/AFBeXs42ciYZoY0mjx8/btgAmzVrhtatWzNjow9Tj6qNdlq1aoWgoCDI3Ltj1JPOyspCubb1VG3o8/zWW29FXFwcwD13rSl/LhV8WauaMrPb7czg0bNZ+iXlSVuPffvtt3jzzTcxceJEHDhwwLAsCDKENM2tcCPiwMBAxMTEsHzhrxkhaR2J0NBQVnYq10ksKyuDzWarVx5LkgQfHx/069cPzZo1YzLSNVxkJ/FKICwsDLGxsWw0WFPnkMpCv3mAvlz4PJHqoZcgDKHgQuAbJSkLl7bM2eVyweFwoLKyEoWFhcjKykJmZiZOnjzJ9iDNyclhPWVSHPqGcDENXdFekwgODmZGxBP660FBQQgODnZTzGQwrFar24vS5Ke8vBxFRUVu91De+Pn5ISQkhMWjj08P5UNAQAAz4iSDpC3CKCsrQ2lpKVAHY8afN5lMaNeuHXsBm5Q1yXUp4eWifOrfvz8efPBBDBo0CAMGDMDgwYMxePBgPPzww7j33nvRpUsXREdHMyNI9dBkMsHLywtWqxWbN2/G7NmzkZ6eDqe2NRr5o1+73Y7c3FwWPzhlK8sycnNzz+2Aou3Mk5qaivT0dLarCu/S0tJw9OhRVFZWsjIHp6StVmu9RoQURlBQEHs9A7p6SmVWUz26klEUBV5eXm6dvJrS4skf39mhsqPrntqDJy5t7Rdc9VCFIyVD8/JOpxN5eXn45ZdfsGrVKrz55psYPXo0hg4dimeffRbPPfccnnvuOTz//PMYMmQIRo4ciRUrVqCiogLw0IPjj/XXakLSnjXxO27Udj/FT+9HytyIVNV6+DabzU2p0T2VlZVshCbpRmAmkwkWi8VNDqO08kjadBt9+FQ/GqiqqmILA2qDj9disSAkJITJUxdZGhM+3tDQUIwZMwaLFi3C22+/jQULFmD+/PmYN28e5s+fj8WLF2PlypVITEzEK6+8gg4dOrBRNm/sVFXF999/j3fffdfN2FF5QDNOBQUFrHNBnQBJkpCXl4fp06fjhRdecHNDhgwxdC+88AKGDh2KzZs3u8XDd1Boqrc++Pr6wo/bsIIvx8tZZg1JbWng0+npl8foXF0RhlBQL6iRm7hVlceOHcO6deswatQovPzyy3jrrbewdu1afPvtt9i7dy/S0tLwxx9/ID09HYcPH8a+ffuwc+dO/Prrr2ylXUMja9tB1RW+J6+/jxqk0+mEXfv0Do/NZmNfQycFSPBKrK6o2jQQ/x6fxE2p2u32Or+fRveQTI39buCFQB0Nf39/9nUSf39/BAYGMhcSEoKYmBjccssteOmllzBv3jzce++91cIhw7Fz5058//33bvWLysHlcrFpUb6sJO3ZY25uLjIyMurk6GsrRUVFhqOWC4HSQfKREzQewhAK6gU1dEmSUFVVhe+++w6jRo3ClClTsHPnTmRnZ8NutzPlRkaF731TI28sI0jUppCMlJakWxhB10l+vZFUtGdZRjvJ6MOuD7zyo3BIQaraCEh/vTbq6/9yQJ0MenZEdQacUff19UW3bt3w2muvoVu3bmzEJXMLJgoKCvDtt9+ipKQEks7gKdp7hATlB5UZLXSpq7NYLKy89B2hC4HSfrHhCOqOMISCC6K8vByJiYmYPHkyfvvtN7f9Akkx0MIGQtVWQEKndBqb+hol8svLzhsj/r/KvUbCX7sY+HBIdjLEdL2+NJRsjYHEPWumOqSvN+QP2uIkSZLQtm1bPPLII/DXvjJB99PXCg4fPozMzEw340TlROFT3HycZFDr4miVKzgDRuGo2sjex8fHLT21oU8v1QFB4yEMocAj1Kh5xUu96U2bNmHJkiXIyjq/DZSs9dxp2s7f3x/x8fG4/fbb8dhjj+HZZ5/FM888g4cffhi33XYb4uLiGmWqTtVGo3oFqEevtEjZkDJGDcqIv9disbDXQPQKnBRtfaG4SMlK3IgH3KIacAa7LvHUxc/lgNIHbvTN5zd/TO8ZyrKMHj16ICIigvmTtefVAFBcXIxTp05VKwcaxVE80OI0a5816tSpE/r06YPevXu7uT59+lRzvXv3xq233opevXqhZ8+ezF+vXr3Qq1cvdO/eHQEBAW5pqY0rtYyuZYQhFNSIUQPeu3cvPvjgAzbtJGlThna7HSaTCeHh4Xj88cexcOFCJCUlYenSpZg9ezamT5+OmTNnYt68efjggw8watQo+Pn56YNvEOidvtogBUlOURS3USspJZouo42cKd2SttTdaMqUwuCNVl2QuPfkJM64KtqIx9fXFz4+PsxvXairv0uFJ3koTz0d6/MyIiICkZGRrEwor2RtZ5eSkhJAFx+VGfmnDobD4UBkZCQmTJiAxMREfPjhh0hMTKz2n3fLli3D0qVL8eGHHzK3ZMkSLF26FCtWrMDEiRPRokWLOtVFIzzlk6BhqV8LFTQ5qCGSQaiqqsJXX32FkydPuj3HcTqdsFgsCA8Px4QJEzBlyhQ89NBDaNOmDUJDQxEYGAgfHx/4+vrC398fYWFh7OvvDY2kPb+kZ5U1xcGPEmg04ekbd97e3uw9Jt7Q+fn5VVvYQvfb7XY2QqkLZJDtdjv7/A4pf7rm7e3N9rZEE1aWiqLAYrEYvmYCLb+M8t5iscDf3x8y97yVXslwOp0IDAxEVFQUmjdvjqioKPa/rq5ly5Zo0aIFIiMjERkZyV7OF1y5CEMoqDOKoiA7Oxu7du2Ci9tejXrVPj4+SEhIwFNPPYXg4GCAMwpkcHglVVBQUOfVj/XFbrcjPz+fKTqKXw8vn6Ltd1lcXMyu8/cFBgYiLCwMku59QF9fX4SEhDB/hKq9e1hWVsaMWG2QLKWlpWxrLpKf4ouMjERgYKD+1iaFqk1/U8eFDCBfvyTd4ia65u3tzV6A55G0kTh9AozCq6+jcKmzpI9HcOUhDKGgziiKgvT0dLYhtslkYr+KoqBjx47o37+/287/ZABIGfDnsrKyUFVV1SiKwuFwIDU1FTabDZKH3rhecQFAdnY2m07jcblc7GsRenm9vb3Z3pSSbsccq9WKnJycalNj+jAICuPkyZMoKytzk13VRjjNmzevtkdrU4PyLy8vD/n5+awcKS9U7pUM3j+0EWFUVBTLa0KWZZSVlSEjI8OtvvJ+6LgmR3LozwmuXIQhvIagxqZvdGR4yBnh6Rqdl7QVnmfPnnXbRYN+TSYT2rdvj5CQEKi6XR6gMzqSJCE/Px/JycnVDAShl6UuaSAkbRT1888/Iy8vj8XJjwz14UjadOqePXtQXFzsJruqfQ4nJiaGjfzoXkWbnouJiWEbblOaTCYTysvLkZqayp476tOgP1a0Z5QHDx50e0mffi0WC+Lj4xEQEAA9vMxXA/py5OuC/hqfT5ROu92OPXv2ICsri61UJr+yLLMpeL0hMpvNaNmyJetM8GHbbDbs2rWLddD4siH48/x1+k8dIT5e/bNNwZWFKJ1rBL7RKdrndgh9Q64LfOMGp6TokzjUsCleh8MBb29vdo5X3uRo2TuN1uir0p4UOB+GXp7aMJvN+P3337Fr1y63/FB1K0Vd2tZwiqIgLy8PP/74I3uuxCs2WZbRvn17+Pv7u6VJ1ToBHTp0YM/t+DQ5nU4kJycjOzubLbmnNNAKUD6PnU4ncnJysHv3biYX/16Zv78/2rdvz5478Xl0tWAkK6VF0XVWKE+ozCh/VVVFRkYGvv76a/YsWOG+cwdtP8uWLVu65RMRGxuLkJAQZrD457ApKSk4dOgQy3+9TDwUL8mkenguqb9PcGUhDOE1gsq9bM0bKVIg0L0WUBf4pfvglp3zSouQJAmnTp1i7xPyqzZJQcja6rzs7GwsWrQIhYWFHnvKejkpTk/+eSi+4uJiLFu2zG0TZiOFJkkSKioq8NVXX2Hv3r1stSYpXZfLBT8/P/Tp04dte0aQQeratSv7RAzJrmrvke3btw9fffUVy09wH/7lyw3aKGfDhg1IS0tj5eVyuVg8cXFx6NixIwvnWoE6SZLuuZ6s7RAka6Msp9OJqqoq7N27F1OmTMHevXtZ3lGHgcLr3r07M4R8vVFVFa1bt2abj9M5RVs0k5OTg6VLl+LEiROsbPgy1aOvq6qqorCw0O1bh3Wpt4LLhyidaxBq+Ha7HZWVlWyT5pKSEvard6WlpdWulZeXsx4xKSl/f3+3EQopAUmScOjQIdaTpne9eJlUVUV2djY++OADJCcns+lCI3gjS3GRqwsk4/Hjx/F///d/SElJYbu/8OGoqoqKigr861//wtq1a2G32yFrI0CV+4pA27ZtER8fX02h0mggOjoavXv3ZiM+iVuaX1lZiU8++QS7d++Gw+Fg4fLhqNq03JYtW7B+/Xp2HlxemM1m9O3bt9aPz16NSNrWcTabDRUVFbBru/XQB1crKipw9uxZHDhwAImJiZgyZQr++9//srIC13GDNhq8/fbb3fZrpfyUtN1p+vbty2YxVK6jZjabsW3bNixevBgnT55kZcrXPb7e00jfbrfj1KlT2Lx5MxYuXIgjR4641TPBlYswhNcIZKjAKc4//vgD48aNw/DhwzFixAgMHz4cw4cPx8svv1zN0bXhw4dj2LBhGDZsGCZMmIDMzEwWpiRJiI2NZStCSZmT4T1z5gyWLFmC5ORkVFRUuCmm4uJi7N27F6+//jrWrFkDh8PBjIwRVVVVbsaQ4BWKXjkRsjYitVgssNvt2LlzJ8aOHYulS5fi0KFDyM/PR0lJCU6dOoXvv/8e8+bNw+TJk91evibFKWkbYD/44IOIjIxkaSXIT1BQEO6//34EBwfDpb1zSOGYzWYcP34cr776KlatWsUWwthsNti1d93S0tLw3nvv4a233sLJkyfdOh9eXl6oqqrC9ddfj/vvv7/aqPRaoLi4GImJiZg2bRqmT5+OqVOnYvr06Zg+fTomTZqEf/7zn3j66acxdOhQzJkzB8nJyZB0z6mp8+JyuXDXXXehb9++rKzIHzmLxYK7774bsbGxcGobx1PHRdKeF3/66acYPnw4Vq9ejQMHDqCgoADl5eUoLy9HaWkpioqKcOrUKezbtw+bNm3C1KlT8cILL2DcuHHYsGED2/Sb5BNcuVx2Q6hXbILaIQPAGwJ93plMJhQWFmLXrl3Ytm0bduzYgW3btmH79u3Ytm1bNbd9+3Z2jX5/+OEH9vFSMlhxcXGIjY1lcZOyJ3bv3o2JEydi/vz5+Oqrr7B9+3asX78eM2bMwPjx47F161ZmZMxmM3tBXZ+eqqoqt2d1elRN4el76/Sf/7q7oihIS0vDwoULMWLECIwePRqjR4/GyJEjMX78eCxfvhwVFRXMaPFh2Ww2dO/eHffccw9TaLw8vKLt0aMH7rrrLrddS8i/LMvIzMzE3LlzkZCQgGnTpmHRokV455132Jc6lixZwlZAmrR9Wl3aNl7+/v546KGH0LFjR8MOAgzyqbbjxkafV3SsPy9JEsrLy7Fp0yYsX74cq1atwsqVK/HRRx9h5cqVWLduHbZs2YIDBw4gOzsbivYZH7pX1Z7L0W+HDh0wZMgQ9vkr6pjwMkjaNPPAgQPh7e3NzoHr9Kmqiv3792P27NkYNWoUxowZg9dffx1Tp07Fm2++iTFjxmDEiBEYNWoUXn/9daxatQoHDx5k76HS83Sa9qU08+k3yh/9MX+uNozC1R97CtdILk/+9Nf054zi06O/xwh9OPX5Xx8axRBSr+tqxEh2/fGVBt/ISInSf/6YnrUYOfIrc89k6ByFbTKZEBISwkYleiUjadNEhw8fxvvvv4/Ro0fj73//OyZMmICkpCQcOXIEijbVajab8de//hW9evUCDCowxcs7vT9FUdhnkfT3d+nSBZ07d2bnZW2KMj09Hdu3b8d//vMf/Prrr8jKymLTlTL3jJVGs2FhYRg6dCjatm1bLa8IVZvqDAgIwMsvv4yuXbuyBRzkj34rKirw888/IykpCW+//TbmzZuHdevWuSlQgjd4/fv3x5NPPskW5HgyhjwkJ4VJ6buUUNl5kpeXkfKXzvPlzl/np5X1aevUqRMmTpyIm2++mW1yYPRCu6ptTPD444/jzjvvdLuun6koLS3Fn3/+ia1bt2LdunVISkrCmjVrsGXLFvzyyy/IyMhAcXExqwfQnvVS54rSxKMvB/JD5/nrer+1Qf4pT6i+UJo8hcfnNX9sBPmhctWXr1LDAiN9+PrrRlA6eIyOjfzVheol1MRRDXon+uMrCUlbhUmV/kIdD3+eV56KNsL6y1/+gv79+8PhcEDiVoOSAiFD6nA4YLVa4XQ6YTabmSLz8vLC3XffjeHDhyM6OrqaLIqioLy83E0GmTO6JA9/D9+4JElCp06dMGLECFx33XWArlNAshAkr4v7uLDZbEZAQACeeuop9OvXD2Zt5xEekoMaoMlkQufOnZGQkID4+HhAU0ZObWNm8sN3SHh5KO0mbRTrcrng5eWF22+/HQkJCSyvwE1L66H7+PAkrYNCclIYjQ2vkPgy4uHLUO9k3eIuKkPqpKjcql9vb2/ccccdmDVrFu6++2638uXh64nJZELLli0xfvx49OzZk8VHo0tS7jI3bWo2m2HWNvXmy5LyFprhdTgcKC8vd7tGcfMySJqRovIhR/F5yjdP6NsHGSSqU0bh8fmtP8/LSo6/RmmjPCJkrjNJ8PcbtWUj+HtgYHD5++labWEaYVxbBIBBIVyJUIUkWRvKEVRhqXFKkoSYmBiMHz8evXv3hsS9QE6O5JK5RSeqNkXk4+ODwYMHY+rUqWjXrh3bsoziJL927bt/fGMh5U+yQOt562VWtdcM7rvvPvzv//4vYmNjmcLk00gGiIwUKQJV+0L4yJEj8c9//pO9MqGHP0dh0rOnOXPmoG/fvpC0j/2SIuKVkZGSkbUOhKQtTPrb3/6GKVOmoEuXLlA1hcanlYfCpDwjReR0OmHSdmExMuiNCcnKy82ntybn0PZbpWM+/+g3IiICffr0wcyZMzF//nzceuut1RZq6eHrpclkQrdu3TBt2jQMGDCAfcyZ6h6VEd2jaEaLx8VN0TudTjidTkRHRyMiIoLJ7kkealN8msg/HaMeSp33R22XD4fOk1++HtIv+Te6l+QjR7LTf4LqGi8/OX1YRm2L0Mdj1GaglQ+flvpiXDoCtwK7EqFKYbFYEBoaiuDgYISGhjaYCwkJQWhoKFOcqqY0XNpoqWPHjpgxYwaee+45REVFsedi4BoSKS6TtsNHnz59MHXqVEyaNAlt27ZlO3yEhYVViz8gIMBNMfCVnuJRtektkpdcZGQkWrZsCbPZjAceeADz5s3DgAEDEBER4abYaKQGTTmoqorg4GD069cPs2fPxksvvYTg4GCWFj18o+MbosViQd++fTF37lyMHTsWnTt3RmBgIDPkfN6Ayy9JG7FGRESgf//+mD17Nl599VV06NCBXVN0nQMeCsPPzw9BQUFo3rw5QkJCEBwczOoH/+J5Y6PoXio3aVPrfB0jpy//0NBQhIeHM3+RkZFo1aoVbrjhBtxyyy0YNGgQxo4di0WLFuH999/Hk08+iejoaJZPRlB5Ub5TeUmShM6dO7NFOv369UNERASr75QGfWeK0mfWnnWHh4ejd+/eePnll/H222+jX79+LHzeePJl3axZM5b+sLAwBAUFITg4GEFBQZC1GYP6lhf559tGcHAw+42MjISfn59b2dB9/LHZbEZQUJBbWdF/2quVr48S11kmFxQU5HYfyRCqrXwmGahseOg8+ZG1TRL4cCjs4OBgFkZ98wsAJPUcAICysjKMHTsWmzdv9iiYyWTC7Nmz8dRTT7E5eCO/hNVqxRtvvIGkpCSWKD0ulwuTJk1CQkIC6zkZ+SOsVisWLlyIBQsWQOJ6wNBl7PPPP49p06axJdKeoHsXL16MuXPnelzW73Q68cwzz2DGjBmXda9HXnHm5+fj4MGD7P29hsKlTcv16tWLbSsmcR8tpQZQVlaGPXv2IDk5Gb///jvy8/PZtKbZbEZERATatGmDvn37okePHoiNjXUzCJmZmUhPT3crb0VR0KxZM/Ts2RPe3t6QtVdBeGMraYsR9uzZw54TUhiSJKFdu3ZsUY8sy8jJycH+/fvx008/IS0tDbm5uex1Cm9vb0RGRiIuLg69e/fGzTffjObNm7spVE95S3WH8kfV9ZYdDgcyMjJw6NAh/Pbbb8jMzER2drbbqloyEFFRUejYsSO6dOmCLl26ICIiAmazuZqyIYzaiMPhwNGjR3H06FHWI6c8kCQJN954IzMYjQ3FTVRUVOC3335DRUVFNeVplL90v9lsZhuN+/r6MkPh4+PD6gR1Evh06cPky0VfXvz/goIC7N+/H4cPH0Zqairy8vJQVFTE3guksIOCghAUFISoqCjEx8ejQ4cOuOGGGxAVFcUW4BC8LFQe5eXl+P3339letNTJVBQFAQEB6NGjBwICAph8dSkzygOXy4WMjAwcP36czTDI3PR/XFwc4uLiquURlYXL5UJpaSlSUlJY+4JW51wuFyIiItC1a1c2+qYOA09ZWRn279/Pnn3z+eHn54eePXuyLfBgUJ+pPOia3W7HoUOHkJOT4+ZXVVX4+PigW7duzCDSdX2YnpBUVVUpEeXl5Zg5cya+++471nB4FG2Rw4QJEzBw4ECYuPlxHkqAqk1xLViwAF988QVgIBgV3LBhwzBkyBCYtOdMen88DWUI9UqdVqrZdRtBU3gulwuDBg3ChAkT4O3t7bHn2djwFcrouCHh89YTqra6sry8HFVVVbDZbEw5+fv7w8/PD35+fm75ReVE9xvBV2YqA71f/TGhvxdaXausrGTOqa1KtWhfMCA59coBBvWWx5MMPIr2HUer1crek6P7ZG3DcpKB9mrlMcoDvR/o2p7RdamWttXQ6PNGf1wf+DIl+LzQh61PZ01+9SjaVndVVVXM0aIqSdM5Xl5erLy8vLxg4Tab0IevP0fH/Dl9menl1x8boY9Xf0znqI7zcullJL+euBB5ePT3648JfRj6Y0J/v/64JtwMoaIoOH36NOuhGCkEVXt5ODg42C0z9ZCwLpcLOTk5KCoq8uhPVVVERUUhPDwc0MIz8ks0lCFUtV4YTT8UFBSwvSl5JO0BuklbGdiqVatL/qzlSobKEFzZqdrUkb4O1VSujYmRjPW5fjHo6xOd4+NorLgF9YfqAl+X9eUFrawU3TSr4OqETY2S0jJqtHqoctB/owpAxpX3Wx/0CpSnoQwhjUZrk4/Sx/tTdbuDNGX0+ULw9YIvl8tBbWWspyHlNIqbP6dvdw0Zt6D+6MurrmVT0zXBlY2htSGFpXcw6AXpKw10vV19JdI7cA+vyc+lgmQgeWtKt9F9gvOouhGVzC0eoby93JCMRrLUdO1i4esL/af8AffMtzHiFtQfffuXDd63Bafb+HOCqxNmCGkExhsFI+h6bXi6X4/EvX/GV6xLBY0KUYPMpKSowju1LZkE5+EVB7Q8U3Q7919u9DLW9drFwhs5Pl9goHQFVxY11WNRXtcOMnQFSg1S36Onc7wfeJjC5P1SOEbhSbrpMqOwGhuKG9yOEnrH997Jn+A8lE/6Y+pFG/lpqujrk8iXKxu+HhvVcVF21wbM8vDKq6bC1Rs0T1BY9N8TekVZW7gNiT7NNcXLy3Y5DPbVgKc8NDp3qdHXr9pcQ2IUrqfjho5bIBDUjtDoAoFAIGjSCEMoEAgEgiaNMIQCgUAgaNIIQygQCASCJo0whAKBQCBo0ghDKBAIBIImjTCEAoFAIGjSCEMoEAgEgibNVWUIaasqfrsq/pj3Z/RfIBAIBAI9V40h5I0fPGxzRrty8Dt0SLqvQwsEAoFAwHPVGEJwRlBRFLcPm/K/tJkx/0ULsSWaQCAQCDxxVVkIfhpUlmV4e3uzL0Pzzmw2w2QyQda+Pi8QCAQCgSck9Sp5iEajPUn7HuLx48dx7NgxvTdAmw5VFAWxsbFo3759rRuJCwQCgaDpctUYQoIf4am6byNSUiTd553Erv4CgUAg8MRVZwihWwlamyHUG0uBQCAQCHiuSkMoEAgEAkFDcVUtlhEIBAKBoKH5f1unZsky7qXqAAAAAElFTkSuQmCC"},{"type":"text","position":{"x":400,"y":40},"content":"Labor Berlin - Charité Vivantes GmbH","contents":{"en":"Labor Berlin - Charité Vivantes GmbH","de":"Labor Berlin - Charité Vivantes GmbH"},"style":{"font":"Helvetica","fontStyle":"normal","fontSize":10,"color":"#000000"}},{"type":"text","position":{"x":400,"y":50},"content":"Humangenetik","style":{"font":"Helvetica","fontStyle":"normal","fontSize":10,"color":"#000000"}},{"type":"text","position":{"x":400,"y":60},"content":"Sylter Straße 2 · 13353 Berlin","contents":{"en":"Sylter Strasse 2 · 13353 Berlin","de":"Sylter Straße 2 · 13353 Berlin"},"style":{"font":"Helvetica","fontStyle":"normal","fontSize":10,"color":"#000000"}},{"type":"text","position":{"x":40,"y":120},"content":"ANFORDERUNGSSCHEIN MOLEKULARGENETIK","contents":{"en":"MOLECULAR GENETICS REQUISITION FORM","de":"ANFORDERUNGSSCHEIN MOLEKULARGENETIK"},"style":{"font":"Helvetica","fontStyle":"bold","fontSize":14,"color":"#000000"}}]}'),body:{elements:[{type:"text",position:{x:40,y:140},content:"Patient*In",contents:{en:"Patient",de:"Patient*In"},style:{font:"Helvetica",fontStyle:"bold",fontSize:12,color:"#000000"}},{type:"text",position:{x:380,y:200},content:"- Praxisstempel -",contents:{en:"- Practice Stamp -",de:"- Praxisstempel -"},style:{font:"Helvetica",fontStyle:"italic",fontSize:12,color:"#A9A9A9"}},{type:"text",position:{x:40,y:160},content:"Vorname: {{givenName}}",contents:{en:"First Name: {{givenName}}",de:"Vorname: {{givenName}}"},style:{font:"Helvetica",fontStyle:"normal",fontSize:12,color:"#000000"}},{type:"text",position:{x:40,y:180},content:"Name: {{familyName}}",contents:{en:"Last Name: {{familyName}}",de:"Name: {{familyName}}"},style:{font:"Helvetica",fontStyle:"normal",fontSize:12,color:"#000000"}},{type:"text",position:{x:40,y:200},content:"Geburtsdatum: {{birthdate}}",contents:{en:"Date of Birth: {{birthdate}}",de:"Geburtsdatum: {{birthdate}}"},style:{font:"Helvetica",fontStyle:"normal",fontSize:12,color:"#000000"}},{type:"text",position:{x:40,y:220},content:"Geschlecht: {{sex}}",contents:{en:"Sex: {{sex}}",de:"Geschlecht: {{sex}}"},style:{font:"Helvetica",fontStyle:"normal",fontSize:12,color:"#000000"}},{type:"text",position:{x:40,y:240},content:"Bestelldatum: {{orderingDate}}",contents:{en:"Order Date: {{orderingDate}}",de:"Bestelldatum: {{orderingDate}}"},style:{font:"Helvetica",fontStyle:"normal",fontSize:12,color:"#000000"}},{type:"text",position:{x:40,y:260},content:"Kostenübernahme: {{insurance}}",style:{font:"Helvetica",fontStyle:"normal",fontSize:12,color:"#000000"}},{type:"text",position:{x:300,y:260},content:"Ärzt*In: {{physicianName}}",contents:{en:"Physician: {{physicianName}}",de:"Ärzt*In: {{physicianName}}"},style:{font:"Helvetica",fontStyle:"normal",fontSize:12,color:"#000000"}},{type:"text",position:{x:300,y:290},content:"Unterschrift: ______________________",contents:{en:"Signature: ______________________",de:"Unterschrift: ______________________"},style:{font:"Helvetica",fontStyle:"normal",fontSize:12,color:"#000000"}},{type:"text",position:{x:40,y:270},content:"Familienanamnese: {{familyHistory}}",contents:{en:"Family History: {{familyHistory}}",de:"Familienanamnese: {{familyHistory}}"},style:{font:"Helvetica",fontStyle:"normal",fontSize:12,color:"#000000"}},{type:"text",position:{x:40,y:284},content:"Elterliche Blutsverwandtschaft: {{parentalConsanguinity}}",contents:{en:"Parental Consanguinity: {{parentalConsanguinity}}",de:"Elterliche Blutsverwandtschaft: {{parentalConsanguinity}}"},style:{font:"Helvetica",fontStyle:"normal",fontSize:12,color:"#000000"}},{type:"text",position:{x:40,y:298},content:"Diagnose / Verdacht: {{diagnosis}}",contents:{en:"Diagnosis / Suspicion: {{diagnosis}}",de:"Diagnose / Verdacht: {{diagnosis}}"},style:{font:"Helvetica",fontStyle:"normal",fontSize:12,color:"#000000"}},{type:"text",position:{x:40,y:330},content:"Angeforderte Analyse(n):",contents:{en:"Requested Analysis:",de:"Angeforderte Analyse(n):"},style:{font:"Helvetica",fontStyle:"bold",fontSize:12,color:"#000000"}},{type:"rectangle",position:{x:320,y:130},size:{width:220,height:100},style:{borderColor:"#000000",borderWidth:.7}},{type:"line",start:{x:40,y:310},end:{x:540,y:310},style:{lineWidth:1,color:"#000000"}}]},panels:{baseY:350,maxHeight:700,spacing:14,offsetX:60,secondPageBaseY:50},qr:{position:{x:450,y:700},size:{width:100,height:100}},phenotypePage:{title:"Phenotype Data",titleContents:{en:"Phenotype Data",de:"Phänotyp-Daten"}},footer:{elements:[{type:"text",position:{x:40,y:780},content:"Tel: +49 (0)30 450 625 432",contents:{en:"Phone: +49 (0)30 450 625 432",de:"Tel: +49 (0)30 450 625 432"},style:{font:"Helvetica",fontStyle:"normal",fontSize:10,color:"#000000"}},{type:"text",position:{x:40,y:794},content:"E-Mail: humangenetik@laborberlin.com",contents:{en:"Email: humangenetik@laborberlin.com",de:"E-Mail: humangenetik@laborberlin.com"},style:{font:"Helvetica",fontStyle:"normal",fontSize:10,color:"#000000"}},{type:"text",position:{x:40,y:808},content:"laborberlin.com/humangenetik",contents:{en:"laborberlin.com/humangenetik",de:"laborberlin.com/humangenetik"},style:{font:"Helvetica",fontStyle:"normal",fontSize:10,color:"#000000"}}]},pageNumber:{enabled:!0,position:{x:500,y:820},font:"Helvetica",fontStyle:"normal",fontSize:10,color:"#000000"},consent:{enabled:!0,title:"Einwilligung zur genetischen Analyse nach GenDG",titleContents:{de:"Einwilligung zur genetischen Analyse nach GenDG",en:"Consent for Genetic Analysis according to GenDG"},paragraphs:["Ich erkläre mich hiermit einverstanden, dass von mir bzw. meinem Kind entnommenes Probenmaterial auf genetische Veränderungen auf Basis einer Genpanel- oder Gesamt-Exom-Anreicherung untersucht wird. Ich wurde über Zweck, Art, Umfang und Aussagekraft der angeforderten genetischen Untersuchung aufgeklärt. Ich wurde informiert, dass die Proben oder die erhobenen Daten als Analyseauftrag an Dritte verschickt werden können. Dabei werden personenbezogene Daten pseudonymisiert auf Datenservern gespeichert, teilweise auf 'Cloud'-Servern innerhalb Europas. Weiterhin werden Daten ggf. für die Abrechnung der Diagnostik zur jeweiligen Krankenkasse übermittelt. Ebenso wurden die möglichen Konsequenzen, die sich aus den Ergebnissen der genetischen Untersuchung für mich oder auch andere Familienmitglieder ergeben können, ausführlich besprochen.","Ich bin damit einverstanden, dass die Befunde der Analyse(n) zusätzlich zur/zum anfordernden Ärztin/Arzt auch weitergeleitet werden an: {{consentName}} (Anschrift falls vorhanden).","Bei genetischen Untersuchungen kann es zu Ergebnissen kommen, die nicht im Zusammenhang mit der klinischen Fragestellung stehen, aber nach aktuellem Wissensstand (angelehnt an die Empfehlungen des ACMG https://www.laborberlin.com/Zufallsbefunde) eine Behandlungs- oder Vorsorgekonsequenz für mich oder Angehörige haben können. Zufallsbefunde mitteilen: {{zufallsbefundeLabel}}","Mit der Aufbewahrung von überschüssigem Untersuchungsmaterial für ggf. ergänzende Untersuchungen zur Diagnosefindung und für laboranalytische Kontrollmaßnahmen bin ich einverstanden. ({{materialLabel}})","Ich bin einverstanden, dass die Untersuchungsergebnisse über die gesetzlich vorgeschriebene Frist von 10 Jahren hinaus (maximal 30 Jahre) aufbewahrt werden können. ({{extendedLabel}})","Ich bin einverstanden, dass erhobene Daten/Ergebnisse über die infrage stehende Erkrankung in verschlüsselter (pseudonymisierter) Form für wissenschaftliche und qualitätssichernde Zwecke genutzt und anonymisiert in Fachzeitschriften veröffentlicht werden. ({{researchLabel}})","Ich wurde darauf hingewiesen, dass ich meine Einwilligung jederzeit ohne Angaben von Gründen ganz oder teilweise zurückziehen kann, ohne dass mir daraus Nachteile entstehen, und dass ich das Recht habe, Untersuchungsergebnisse nicht zu erfahren (Recht auf Nichtwissen)."],paragraphsContents:{de:["Ich erkläre mich hiermit einverstanden, dass von mir bzw. meinem Kind entnommenes Probenmaterial auf genetische Veränderungen auf Basis einer Genpanel- oder Gesamt-Exom-Anreicherung untersucht wird. Ich wurde über Zweck, Art, Umfang und Aussagekraft der angeforderten genetischen Untersuchung aufgeklärt. Ich wurde informiert, dass die Proben oder die erhobenen Daten als Analyseauftrag an Dritte verschickt werden können. Dabei werden personenbezogene Daten pseudonymisiert auf Datenservern gespeichert, teilweise auf 'Cloud'-Servern innerhalb Europas. Weiterhin werden Daten ggf. für die Abrechnung der Diagnostik zur jeweiligen Krankenkasse übermittelt. Ebenso wurden die möglichen Konsequenzen, die sich aus den Ergebnissen der genetischen Untersuchung für mich oder auch andere Familienmitglieder ergeben können, ausführlich besprochen.","Ich bin damit einverstanden, dass die Befunde der Analyse(n) zusätzlich zur/zum anfordernden Ärztin/Arzt auch weitergeleitet werden an: {{consentName}} (Anschrift falls vorhanden).","Bei genetischen Untersuchungen kann es zu Ergebnissen kommen, die nicht im Zusammenhang mit der klinischen Fragestellung stehen, aber nach aktuellem Wissensstand (angelehnt an die Empfehlungen des ACMG https://www.laborberlin.com/Zufallsbefunde) eine Behandlungs- oder Vorsorgekonsequenz für mich oder Angehörige haben können. Zufallsbefunde mitteilen: {{zufallsbefundeLabel}}","Mit der Aufbewahrung von überschüssigem Untersuchungsmaterial für ggf. ergänzende Untersuchungen zur Diagnosefindung und für laboranalytische Kontrollmaßnahmen bin ich einverstanden. ({{materialLabel}})","Ich bin einverstanden, dass die Untersuchungsergebnisse über die gesetzlich vorgeschriebene Frist von 10 Jahren hinaus (maximal 30 Jahre) aufbewahrt werden können. ({{extendedLabel}})","Ich bin einverstanden, dass erhobene Daten/Ergebnisse über die infrage stehende Erkrankung in verschlüsselter (pseudonymisierter) Form für wissenschaftliche und qualitätssichernde Zwecke genutzt und anonymisiert in Fachzeitschriften veröffentlicht werden. ({{researchLabel}})","Ich wurde darauf hingewiesen, dass ich meine Einwilligung jederzeit ohne Angaben von Gründen ganz oder teilweise zurückziehen kann, ohne dass mir daraus Nachteile entstehen, und dass ich das Recht habe, Untersuchungsergebnisse nicht zu erfahren (Recht auf Nichtwissen)."],en:["I hereby declare that I agree to the examination of the sample material taken from me or my child for genetic changes on the basis of a gene panel or whole-exome enrichment. I have been informed about the purpose, type, scope and significance of the requested genetic examination. I have been informed that the samples or the data collected can be sent to third parties as an analysis order. In this process, personal data is pseudonymized on data servers, partly on 'cloud' servers within Europe. Furthermore, data may be transmitted to the respective health insurance company for the billing of diagnostics. The possible consequences that may arise from the results of the genetic examination for me or other family members have also been discussed in detail.","I agree that the findings of the analysis(es) will also be forwarded to {{consentName}} (address if available) in addition to the requesting physician.","Genetic testing may reveal findings unrelated to the clinical question, but which may have treatment or preventive consequences for me or relatives according to current knowledge (based on ACMG recommendations https://www.laborberlin.com/Zufallsbefunde). Share incidental findings: {{zufallsbefundeLabel}}","I agree with the storage of excess examination material for possible supplementary examinations for diagnosis and for laboratory analytical control measures. ({{materialLabel}})","I agree that the examination results can be kept beyond the legally prescribed period of 10 years (maximum 30 years). ({{extendedLabel}})","I agree that collected data/results about the disease in question may be used in encrypted (pseudonymized) form for scientific and quality assurance purposes and published anonymously in professional journals. ({{researchLabel}})","I have been informed that I can withdraw my consent in whole or in part at any time without giving reasons, without any disadvantages, and that I have the right not to know examination results (right not to know)."]},signatureArea:{patientLabel:"Patient*in / gesetzl. Vertreter*in (Druckbuchstaben)",physicianLabel:"Ärztin/Arzt (Druckbuchstaben)",signHint:"Datum / Unterschrift"},signatureAreaContents:{de:{patientLabel:"Patient*in / gesetzl. Vertreter*in (Druckbuchstaben)",physicianLabel:"Ärztin/Arzt (Druckbuchstaben)",signHint:"Datum / Unterschrift"},en:{patientLabel:"Patient / Legal Representative (BLOCK LETTERS)",physicianLabel:"Physician (BLOCK LETTERS)",signHint:"Date / Signature"}}}},oi={key:0,class:"mb-4"},ii={style:{display:"none"}},si=tn({__name:"App",setup(t){const{t:n,locale:m}=a(),y=I((()=>e((()=>import("./PatientForm.D64Hf04F.js")),__vite__mapDeps([0,1,2,3,4,5,6])))),b=I((()=>e((()=>import("./TestSelector.Xl_J2DXE.js")),__vite__mapDeps([7,2,1,3,4,8,6])))),w=I((()=>e((()=>import("./PhenotypeSelector.CkIREc7_.js")),__vite__mapDeps([9,2,1,3,4,10,6])))),v=I((()=>e((()=>import("./SelectedPanelsSummary.DHcP8wp8.js")),__vite__mapDeps([11,2,4,1,3,12,6])))),x=I((()=>e((()=>import("./PedigreeDrawer.BuNNnNn9.js")),__vite__mapDeps([13,2,1,3,4,14,6])))),D=I((()=>e((()=>import("./ValidationSummary.D_e_vQcj.js")),__vite__mapDeps([15,1,2,3,4,16,6])))),A=I((()=>e((()=>import("./AppFooter.DYbM0xAQ.js")),__vite__mapDeps([17,2,1,3,4,18,6])))),P=I((()=>e((()=>import("./LogViewer.CpRNlBy2.js")),__vite__mapDeps([19,2,1,3,4,20,6])))),k=I((()=>e((()=>import("./Disclaimer.C4UiqV8A.js")),__vite__mapDeps([21,2,1,3,4,22,6])))),_=I({loader:()=>e((()=>import("./PdfGenerator.DgIFEDqL.js")),__vite__mapDeps([23,4,2,24,1,3,6])),delay:200}),E=I((()=>e((()=>import("./PasteDataModal.KDEm6zAs.js")),__vite__mapDeps([25,2,1,3,4,26,6])))),N=I((()=>e((()=>import("./EncryptionDialog.CqWfmfbq.js")),__vite__mapDeps([27,2,1,3])))),O=I((()=>e((()=>import("./DecryptionDialog.zCd3YSQb.js")),__vite__mapDeps([28,2,1,3])))),T=I((()=>e((()=>import("./FAQDialog.Bctk6lE5.js")),__vite__mapDeps([29,2,1,3,4,30,6])))),z=I((()=>e((()=>import("./ResetConfirmationDialog.Dh5jf_ty.js")),__vite__mapDeps([31,2,1,3])))),M=I((()=>e((()=>import("./SaveDataDialog.C6M-jpL5.js")),__vite__mapDeps([32,2,1,3])))),B=I((()=>e((()=>import("./LoadDataDialog.BWgcjjfr.js")),__vite__mapDeps([33,2,1,3])))),H=Pn(),U=In(),q=Fn(),j=Rn(),$=function(){const e=g(null),t=Pn(),n=In();function a(e){try{if(!e||"string"!=typeof e)return Qt.error("Process error: No valid data provided"),t.showSnackbar("No valid data provided."),!1;Qt.debug("Processing pasted data:",e.substring(0,100)+"...");const a=zn(e);return Qt.debug("Parse result:",a),a.success?(Qt.debug("Importing parsed data:",a.data),n.importFormData(a.data,!0),n.syncLegacyPatientData(),n.syncUnifiedPatientData(),Qt.debug("Form state after import:",{patientData:n.patientData,selectedTests:n.selectedTests,phenotypeDataObj:n.phenotypeDataObj}),t.showSnackbar("Data imported successfully!"),!0):(Qt.error("Parse failed:",a.error),t.showSnackbar(a.error||"Invalid data format."),!1)}catch(a){return Qt.error("Error processing pasted data:",a),t.showSnackbar("Error processing pasted data. Please check the format."),!1}}function r(e){return!(!e||"object"!=typeof e)&&(e.patientData&&"object"==typeof e.patientData||e.selectedTests&&Array.isArray(e.selectedTests)||e.phenotypeData&&"object"==typeof e.phenotypeData)}return{importedFile:e,saveToFile:function(e){try{const a=function(e,t="requiform-data"){try{const n=JSON.stringify(e,null,2),a=new Blob([n],{type:"application/json"}),r=document.createElement("a");return r.href=URL.createObjectURL(a),r.download=`${t}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(r.href),!0}catch(n){return!1}}(n.exportFormData(),e);return a?(t.showSnackbar("Data saved successfully!"),Qt.debug("Data saved successfully to",e),!0):(t.showSnackbar("Error saving data to file."),Qt.error("Error saving data to file."),!1)}catch(a){return Qt.error("Error saving data to file:",a),t.showSnackbar("Error saving data to file."),!1}},loadFromFile:async function(a){try{if(!a)return t.setLoadDataError("No file selected."),!1;e.value=a;let o=await function(e){return new Promise(((t,n)=>{if(!e)return void n(new Error("No file provided"));const a=new FileReader;a.onload=e=>{try{const n=JSON.parse(e.target.result);t(n)}catch{n(new Error("Invalid JSON format"))}},a.onerror=()=>{n(new Error("Error reading file"))},a.readAsText(e)}))}(a);return o=Yt(o),Qt.debug("Sanitized JSON data from file."),r(o)?(n.importFormData(o,!0),t.showSnackbar("Data loaded successfully!"),Qt.debug("Data loaded from file:",a.name,o),!0):(t.setLoadDataError("Invalid data format. The file does not contain valid RequiForm data."),!1)}catch(o){return Qt.error("Error loading data from file:",o),t.setLoadDataError(`Error loading data: ${o.message}`),!1}},processPastedData:a,importFromJson:async function(e){if(!e||"string"!=typeof e)return Qt.error("Import error: No valid data provided",e),t.showSnackbar("No valid data provided."),!1;Qt.debug("Attempting to import data:",e.substring(0,100)+"...");try{let a=JSON.parse(e);if(Qt.debug("Successfully parsed as JSON:",a),a=Yt(a),Qt.debug("Sanitized JSON data from pasted input."),r(a)){Qt.debug("Valid form data format detected, importing directly");const e=n.importFormData(a,!0);return Qt.debug("Import result:",e,"Current form state:",{patientData:n.patientData,selectedTests:n.selectedTests,phenotypeDataObj:n.phenotypeDataObj}),n.syncLegacyPatientData(),n.syncUnifiedPatientData(),t.showSnackbar("Data imported successfully!"),!0}return Qt.error("Invalid data format:",a),t.showSnackbar("Invalid data format. The JSON does not contain valid RequiForm data."),!1}catch(o){return Qt.debug("Not valid JSON, trying formatted text processing:",o.message),a(e)}},isValidFormData:r}}(),Q=function(){const e=g(null),t=Pn();return{setPdfGeneratorRef:function(t){e.value=t},generatePdf:async function(){if(!e.value)return t.showSnackbar("Could not generate PDF. Please try again."),!1;try{return await e.value.generatePdf(),!0}catch(n){return t.showSnackbar("Error generating PDF. Please try again."),!1}}}}(),Y=function(){const e=g(null);function t(){e.value?(Qt.info("Starting application tour..."),e.value.start()):Qt.error("App Tour: Could not start, tour instance not available.")}return{tourInstance:e,initialize:function(){e.value=function(){const e=new Qo.Tour({useModalOverlay:!0,defaultStepOptions:{classes:"shepherd-theme-arrows shepherd-custom",scrollTo:{behavior:"smooth",block:"center"},cancelIcon:{enabled:!0},buttons:[{action(){return this.back()},secondary:!0,text:ei.global.t("tour.buttons.back")},{action(){return this.next()},text:ei.global.t("tour.buttons.next")}]}});return e.addStep({id:"welcome",text:ei.global.t("tour.welcome.text"),attachTo:{element:"#app",on:"center"},buttons:[{action(){return localStorage.setItem("requiformTourCompleted","true"),this.cancel()},secondary:!0,text:ei.global.t("tour.buttons.skip")},{action(){return this.next()},text:ei.global.t("tour.buttons.start")}]}),e.addStep({id:"patient-form",text:ei.global.t("tour.patientForm.text"),attachTo:{element:"#patient-form-component",on:"bottom"},when:{show:()=>document.querySelector("#patient-form-component")}}),e.addStep({id:"test-selector",text:ei.global.t("tour.testSelector.text"),attachTo:{element:"#test-selector-component",on:"bottom"},when:{show:()=>document.querySelector("#test-selector-component")}}),e.addStep({id:"phenotypes",text:ei.global.t("tour.phenotypes.text"),attachTo:{element:"#phenotype-selector-component",on:"bottom"},when:{show:()=>document.querySelector("#phenotype-selector-component")}}),e.addStep({id:"top-bar-actions",text:ei.global.t("tour.topBarActions.text"),attachTo:{element:"#top-bar-actions",on:"bottom"},when:{show:()=>document.querySelector("#top-bar-actions")}}),e.addStep({id:"generate-pdf",text:ei.global.t("tour.generatePdf.text"),attachTo:{element:"#generate-pdf-btn",on:"left"},when:{show:()=>document.querySelector("#generate-pdf-btn")}}),e.addStep({id:"tour-complete",text:ei.global.t("tour.complete.text"),buttons:[{action(){return this.complete()},text:ei.global.t("tour.buttons.finish")}]}),e.on("complete",(()=>{Qt.info(ei.global.t("tour.completed")),localStorage.setItem("requiformTourCompleted","true")})),e.on("cancel",(()=>{Qt.info(ei.global.t("tour.cancelled"))})),e}(),localStorage.getItem("requiformTourCompleted")||t()},startTour:t}}(),X=function(){const e=Pn(),{localizedFaqContent:t}=function(){const{locale:e}=a();return{localizedFaqContent:r((()=>{const t=ti[e.value]||ti.en||[];return Array.isArray(t)?t:[]}))}}();return{faqItems:t,openFaq:function(){e.toggleFAQModal(!0)},closeFaq:function(){e.toggleFAQModal(!1)}}}(),ee=function(){const e=Pn(),t=In();return{initiateReset:function(){e.openResetConfirmationDialog()},cancelReset:function(){e.closeResetConfirmationDialog()},confirmReset:function(){e.closeResetConfirmationDialog(),t.resetForm(),e.showSnackbar("Form has been reset!")},toggleTheme:function(){e.toggleTheme()}}}();L("ui",H),L("form",U),L("settings",q),L("isValid",U.isValid),L("validationErrors",U.validationErrors),L("sectionValidation",U.sectionValidation),L("validateForm",U.validateForm),L("getFieldErrors",U.getFieldErrors),L("patientData",U.patientData),L("updatePersonalInfo",U.updatePatientData),L("updatePhenotypeData",U.updatePhenotypeData),L("updateSelectedPanels",U.updateSelectedPanels);const te=g(ri),ne=r((()=>U&&U.patientData?ai?ai.map((e=>({id:e.id,categoryTitle:e.title,tests:e.tests.filter((e=>{var t;return null==(t=U.patientData.selectedPanels)?void 0:t.includes(e.id)}))}))).filter((e=>e.tests.length>0)):(Qt.warn("groupedPanelDetails: testsData.categories not available yet."),[]):(Qt.warn("groupedPanelDetails: formStore or patientData not available yet."),[])));function ae(){q.acknowledgeDisclaimer(),H.closeDisclaimerModal()}function re(e){j.copyEncryptedUrl(e).then((e=>{e&&H.closeEncryptionDialog()}))}function oe(e){j.handlePasswordSubmit(e)}function ie(e){$.saveToFile(e).then((e=>{e&&H.closeSaveDataDialog()}))}function se(e){$.loadFromFile(e).then((e=>{e&&H.closeLoadDataDialog()}))}async function le(e){try{Qt.debug("App: Received data for import, length:",(null==e?void 0:e.length)||0),await $.importFromJson(e)?(H.closePasteDataDialog(),H.showSnackbar("Data imported successfully!"),setTimeout((()=>{Qt.debug("App: Current form state after import:",{personalInfo:U.patientData.personalInfo,selectedPanels:U.patientData.selectedPanels.length,phenotypeData:U.patientData.phenotypeData.length})}),0)):Qt.error("App: Failed to import data")}catch(t){Qt.error("App: Error importing data:",t),H.showSnackbar("Error importing data. Please try again.")}}const ce=g(null),de=g(null);async function ue(){const e=U.validateForm(!0);if(U.setShowValidation(!0),Qt.debug("Validation errors:",U.validationErrors),Qt.debug("Validation sections:",U.sectionValidation),e){if(U.showPedigree&&de.value)try{const e=await de.value.getPedigreeDataUrl();U.updatePedigreeDataUrl(e);const t=de.value.getPedigreeData();t&&Qt.debug("Updated pedigree data:",t),Qt.debug("Pedigree data updated successfully for PDF generation")}catch(t){Qt.error("Error updating pedigree data for PDF:",t)}await Q.generatePdf()}else{Qt.debug("Form validation failed. Please correct the errors before generating PDF."),H.showSnackbar("Please correct the form errors before generating PDF."),U.setShowValidation(!0),window.scrollTo({top:0,behavior:"smooth"});const e=document.querySelector(".validation-summary");e&&(e.setAttribute("tabindex","-1"),e.focus(),e.classList.add("highlight-animation"),setTimeout((()=>{e.classList.remove("highlight-animation")}),1500))}}C((()=>{Y.initialize(),j.initializeFromUrl()})),S(ce,(e=>{e&&(Qt.debug("PDF generator reference connected"),Q.setPdfGeneratorRef(e))}),{immediate:!0});const he=()=>{const e="en"===m.value?"de":"en";m.value=e,document.documentElement.lang=e,localStorage.setItem("userLanguage",e),Qt.info(`Language switched to ${e.toUpperCase()}`)},pe=()=>{H.toggleLogViewer()};return(e,t)=>(i(),o(Z,{theme:h(H).isDark?"dark":"light",id:"app"},{default:s((()=>[c(sn,{isDark:h(H).isDark,onToggleTheme:h(ee).toggleTheme,onResetForm:h(ee).initiateReset,onOpenFaq:h(X).openFaq,onGeneratePdf:ue,onCopyUrl:h(j).copyShareableUrl,onCopyEncryptedUrl:h(H).openEncryptionDialog,onStartTour:h(Y).startTour,onSaveData:h(H).openSaveDataDialog,onLoadData:h(H).openLoadDataDialog,onOpenPasteData:h(H).openPasteDataDialog,onToggleLanguage:he,onToggleLogViewer:pe},null,8,["isDark","onToggleTheme","onResetForm","onOpenFaq","onCopyUrl","onCopyEncryptedUrl","onStartTour","onSaveData","onLoadData","onOpenPasteData"]),t[27]||(t[27]=d()),!h(q).disclaimerAcknowledged||h(H).showDisclaimerModal?(i(),o(h(k),{key:0,onDismiss:ae})):f("",!0),t[28]||(t[28]=d()),c(W,null,{default:s((()=>[c(G,{class:"main-content-container"},{default:s((()=>[h(U).showValidation?(i(),F("div",oi,[c(h(D),{showValidation:h(U).showValidation,isValid:h(U).isValid,validationErrors:h(U).validationErrors},null,8,["showValidation","isValid","validationErrors"])])):f("",!0),t[11]||(t[11]=d()),c(h(y),{patientData:h(U).patientData.personalInfo,"onUpdate:patientData":h(U).updatePatientData,pdfConfig:te.value,id:"patient-form-component"},null,8,["patientData","onUpdate:patientData","pdfConfig"]),t[12]||(t[12]=d()),c(J,{modelValue:h(U).showPedigree,"onUpdate:modelValue":t[0]||(t[0]=e=>h(U).showPedigree=e),label:h(n)("app.includePedigreeChart"),class:"mb-4"},null,8,["modelValue","label"]),t[13]||(t[13]=d()),h(U).showPedigree?(i(),o(h(x),{key:1,ref_key:"pedigreeDrawerRef",ref:de,"onUpdate:pedigreeDataUrl":h(U).updatePedigreeDataUrl},null,8,["onUpdate:pedigreeDataUrl"])):f("",!0),t[14]||(t[14]=d()),c(h(b),{id:"test-selector-component"}),t[15]||(t[15]=d()),c(h(w),{groupedPanelDetails:ne.value,modelValue:h(U).phenotypeDataObj,"onUpdate:modelValue":t[1]||(t[1]=e=>h(U).phenotypeDataObj=e),id:"phenotype-selector-component"},null,8,["groupedPanelDetails","modelValue"]),t[16]||(t[16]=d()),l("div",ii,[c(h(_),{ref_key:"pdfGeneratorRef",ref:ce,patientData:h(U).patientData.personalInfo,pedigreeDataUrl:h(U).pedigreeDataUrl,phenotypeData:h(U).phenotypeDataObj,pdfConfig:te.value},null,8,["patientData","pedigreeDataUrl","phenotypeData","pdfConfig"])]),t[17]||(t[17]=d()),c(h(v),{groupedPanelDetails:ne.value},null,8,["groupedPanelDetails"])])),_:1}),t[19]||(t[19]=d()),c(K,{modelValue:h(H).snackbar,"onUpdate:modelValue":t[3]||(t[3]=e=>h(H).snackbar=e),timeout:"3000",top:"",right:"",transition:"scale-transition"},{action:s((({attrs:e})=>[c(V,p({color:"red",text:""},e,{onClick:t[2]||(t[2]=e=>h(H).snackbar=!1)}),{default:s((()=>[c(R,null,{default:s((()=>t[18]||(t[18]=[d("mdi-close")]))),_:1})])),_:2},1040)])),default:s((()=>[d(u(h(H).snackbarMessage)+" ",1)])),_:1},8,["modelValue"]),t[20]||(t[20]=d()),c(h(N),{modelValue:h(H).encryptionDialog,"onUpdate:modelValue":t[4]||(t[4]=e=>h(H).encryptionDialog=e),onCancel:h(H).closeEncryptionDialog,onConfirm:re},null,8,["modelValue","onCancel"]),t[21]||(t[21]=d()),c(h(O),{modelValue:h(H).decryptionDialog,"onUpdate:modelValue":t[5]||(t[5]=e=>h(H).decryptionDialog=e),error:h(H).decryptionError,onCancel:h(H).cancelDecryption,onConfirm:oe},null,8,["modelValue","error","onCancel"]),t[22]||(t[22]=d()),c(h(T),{modelValue:h(H).showFAQModal,"onUpdate:modelValue":t[6]||(t[6]=e=>h(H).showFAQModal=e),faqItems:h(X).faqItems.value,onClose:h(X).closeFaq},null,8,["modelValue","faqItems","onClose"]),t[23]||(t[23]=d()),c(h(z),{modelValue:h(H).resetConfirmationDialog,"onUpdate:modelValue":t[7]||(t[7]=e=>h(H).resetConfirmationDialog=e),onCancel:h(ee).cancelReset,onConfirm:h(ee).confirmReset},null,8,["modelValue","onCancel","onConfirm"]),t[24]||(t[24]=d()),c(h(M),{modelValue:h(H).saveDataDialog,"onUpdate:modelValue":t[8]||(t[8]=e=>h(H).saveDataDialog=e),defaultFileName:h(U).saveDataName,onCancel:h(H).closeSaveDataDialog,onConfirm:ie},null,8,["modelValue","defaultFileName","onCancel"]),t[25]||(t[25]=d()),c(h(B),{modelValue:h(H).loadDataDialog,"onUpdate:modelValue":t[9]||(t[9]=e=>h(H).loadDataDialog=e),error:h(H).loadDataError,onCancel:h(H).closeLoadDataDialog,onConfirm:se},null,8,["modelValue","error","onCancel"]),t[26]||(t[26]=d()),c(h(E),{modelValue:h(H).pasteDataDialog,"onUpdate:modelValue":t[10]||(t[10]=e=>h(H).pasteDataDialog=e),onClose:h(H).closePasteDataDialog,onImport:le},null,8,["modelValue","onClose"])])),_:1}),t[29]||(t[29]=d()),c(h(A),{disclaimerAcknowledged:h(q).disclaimerAcknowledged,acknowledgmentTime:h(q).acknowledgmentTime,onReopenDisclaimer:h(H).openDisclaimerModal},null,8,["disclaimerAcknowledged","acknowledgmentTime","onReopenDisclaimer"]),t[30]||(t[30]=d()),h(H).showLogViewer?(i(),o(h(P),{key:1})):f("",!0)])),_:1},8,["theme"]))}},[["__scopeId","data-v-c56701a6"]]);!async function(){try{await async function(){Qt.info("[Branding] No external config path specified (VITE_BRANDING_CONFIG_PATH). Using defaults.")}();const e=Q({components:X,directives:Y,theme:{themes:{light:{dark:!1,colors:{...en.themeColors}},dark:{dark:!0,colors:{...en.darkThemeColors}}}}}),t=function(){const e=m(!0),t=e.run((()=>g({})));let n=[],a=[];const r=y({install(e){cn(r),r._a=e,e.provide(dn,r),e.config.globalProperties.$pinia=r,a.forEach((e=>n.push(e))),a=[]},use(e){return this._a?n.push(e):a.push(e),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return r}(),n=N(si);n.use(e),n.use(t),n.use(ei),n.mount("#app"),Qt.info("Application mounted.")}catch(e){Qt.error("Failed during application startup:",e),document.getElementById("app").innerHTML='\n      <div style="padding: 20px; text-align: center; color: red;">\n        <h2>Application Initialization Failed</h2>\n        <p>Could not load critical configuration. Please check the console or contact support.</p>\n      </div>\n    '}}();export{Jt as L,tn as _,be as a,en as b,ri as c,zn as d,Mn as g,kt as i,Qt as l,Gt as p,ni as t,Pn as u,et as z};
