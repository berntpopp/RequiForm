import{_ as I,C as z,ad as j,d as f,Q as d,ak as i,r as F,v as J,S as k,x as $,z as V,A as m,J as u,i as o,H as l,a6 as c,T as v,B as p,M as q,al as C,a1 as L,am as A,O as G,ah as H,G as S,I as y,a3 as M,F as W,ai as R,an as Q,ao as K,a4 as P}from"./index.BOhBcDCI.js";const X={class:"log-header-controls"},Y={class:"d-flex align-center"},Z={class:"timestamp mr-2"},ee={class:"level mr-2"},te={class:"message flex-grow-1"},le={key:0,class:"log-details mt-1"},se={__name:"LogViewer",setup(ae){const{t:s}=z(),E=j(),n=f(()=>d.entries),N=t=>new Date(t).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),O=()=>{E.toggleLogViewer()},D=()=>{if(!n.value||n.value.length===0){d.warn("LogViewer: No logs to download.");return}try{const t=JSON.stringify(n.value,null,2),e=new Blob([t],{type:"application/json"}),g=`requiform-logs-${new Date().toISOString().replace(/[:.]/g,"-")}.json`,r=document.createElement("a");r.href=URL.createObjectURL(e),r.download=g,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(r.href),d.info("LogViewer: Logs downloaded successfully.")}catch(t){d.error("LogViewer: Failed to download logs:",t)}},T=()=>{d.clear()},h=f(()=>[{title:s("logViewer.levels.debug"),value:i.DEBUG},{title:s("logViewer.levels.info"),value:i.INFO},{title:s("logViewer.levels.warn"),value:i.WARN},{title:s("logViewer.levels.error"),value:i.ERROR}]),x=f({get:()=>d.currentLogLevel,set:t=>{d.setLevel(t)}}),B=f(()=>{switch(x.value){case i.DEBUG:return"text-log-debug";case i.INFO:return"text-log-info";case i.WARN:return"text-log-warn";case i.ERROR:return"text-log-error";default:return""}}),w=F(new Set),U=t=>{w.value.has(t)?w.value.delete(t):w.value.add(t)},b=t=>w.value.has(t),_=t=>{try{return JSON.stringify(t,null,2)}catch(e){return`Error formatting data: ${e.message}`}};return J(n,async()=>{await k();const t=document.querySelector(".log-list");t&&(t.scrollTop=t.scrollHeight)},{deep:!0}),$(async()=>{await k();const t=document.querySelector(".log-list");t&&(t.scrollTop=t.scrollHeight)}),(t,e)=>(m(),V(K,{class:"log-viewer-card",elevation:"8","max-width":"500","max-height":"400"},{default:u(()=>[o(A,{class:"d-flex justify-space-between align-center py-2"},{default:u(()=>[c("span",null,v(p(s)("logViewer.title")),1),e[4]||(e[4]=l()),c("div",X,[o(q,{modelValue:x.value,"onUpdate:modelValue":e[0]||(e[0]=a=>x.value=a),items:h.value,density:"compact","hide-details":"",variant:"plain",class:C(["log-level-select",B.value])},null,8,["modelValue","items","class"]),e[1]||(e[1]=l()),o(L,{icon:"mdi-download",variant:"text",size:"small",onClick:D,title:p(s)("logViewer.buttons.download"),disabled:!n.value.length},null,8,["title","disabled"]),e[2]||(e[2]=l()),o(L,{icon:"mdi-delete-sweep",variant:"text",size:"small",onClick:T,title:p(s)("logViewer.buttons.clear"),disabled:!n.value.length},null,8,["title","disabled"]),e[3]||(e[3]=l()),o(L,{icon:"mdi-close",variant:"text",size:"small",onClick:O,title:p(s)("logViewer.buttons.close")},null,8,["title"])])]),_:1}),e[10]||(e[10]=l()),o(G),e[11]||(e[11]=l()),o(Q,{class:"log-list pa-0"},{default:u(()=>[o(H,{density:"compact",class:"py-0"},{default:u(()=>[(m(!0),S(W,null,M(n.value,(a,g)=>(m(),V(R,{key:g,class:C([["log-entry",`log-${a.level.toLowerCase()}`],"py-1 px-3"])},{default:u(()=>[c("div",Y,[c("span",Z,v(N(a.timestamp)),1),e[5]||(e[5]=l()),c("span",ee,"["+v(a.level)+"]",1),e[6]||(e[6]=l()),c("span",te,v(a.displayMessage),1),e[7]||(e[7]=l()),a.rawData!==null?(m(),V(L,{key:0,icon:b(g)?"mdi-chevron-up":"mdi-chevron-down",variant:"text",size:"x-small",onClick:r=>U(g),class:"ml-1",title:p(s)("logViewer.buttons.toggleDetails")},null,8,["icon","onClick","title"])):y("",!0)]),e[8]||(e[8]=l()),o(P,null,{default:u(()=>[b(g)?(m(),S("div",le,[c("pre",null,v(_(a.rawData)),1)])):y("",!0)]),_:2},1024)]),_:2},1032,["class"]))),128)),e[9]||(e[9]=l()),n.value.length?y("",!0):(m(),V(R,{key:0,class:"text-center text-disabled py-2"},{default:u(()=>[l(v(p(s)("logViewer.emptyState")),1)]),_:1}))]),_:1})]),_:1})]),_:1}))}},ne=I(se,[["__scopeId","data-v-ccc42ee4"]]);export{ne as default};
